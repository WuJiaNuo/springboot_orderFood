(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69c6550c"],{a539:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container"},[s("div",{staticClass:"tools-div"},[s("el-button",{attrs:{type:"success",icon:"el-icon-plus",disabled:!1===t.$hasBP("bnt.sysDept.add"),size:"mini"},on:{click:function(e){return t.add()}}},[t._v("添 加")])],1),s("el-table",{staticStyle:{width:"100%","margin-bottom":"20px","margin-top":"10px"},attrs:{data:t.sysDeptList,"row-key":"id",border:"","default-expand-all":!1,"tree-props":{children:"children"}}},[s("el-table-column",{attrs:{prop:"name",label:"部门名称"}}),s("el-table-column",{attrs:{prop:"leader",label:"负责人"}}),s("el-table-column",{attrs:{prop:"phone",label:"联系电话"}}),s("el-table-column",{attrs:{prop:"sortValue",label:"排序"}}),s("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-switch",{attrs:{disabled:!0},model:{value:1===e.row.status,callback:function(s){t.$set(e.row,"status === 1",s)},expression:"scope.row.status === 1"}})]}}])}),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),s("el-table-column",{attrs:{label:"操作",width:"180",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[2!==e.row.type?s("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"mini",title:"添加下级部门"},on:{click:function(s){return t.add(e.row)}}}):t._e(),s("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",disabled:!1===t.$hasBP("bnt.sysDept.update"),title:"修改"},on:{click:function(s){return t.edit(e.row)}}}),s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",disabled:!1===t.$hasBP("bnt.sysDept.remove")||e.row.children.length>0,title:"删除"},on:{click:function(s){return t.removeDataById(e.row.id)}}})]}}])})],1),s("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-form",{ref:"dataForm",staticStyle:{"padding-right":"40px"},attrs:{model:t.sysDept,rules:t.rules,"label-width":"150px",size:"small"}},[s("el-form-item",{attrs:{label:"上级部门"}},[s("select-dept-tree",{attrs:{treeTitle:"选择部门",dataTree:t.dataDeptTree,treeVal:t.sysDept.parentName,treeId:t.sysDept.parentId},on:{saveTreeId:t.saveDeptId}})],1),s("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[s("el-input",{model:{value:t.sysDept.name,callback:function(e){t.$set(t.sysDept,"name",e)},expression:"sysDept.name"}})],1),s("el-form-item",{attrs:{label:"负责人",prop:"leader"}},[s("el-input",{model:{value:t.sysDept.leader,callback:function(e){t.$set(t.sysDept,"leader",e)},expression:"sysDept.leader"}})],1),s("el-form-item",{attrs:{label:"电话",prop:"phone"}},[s("el-input",{model:{value:t.sysDept.phone,callback:function(e){t.$set(t.sysDept,"phone",e)},expression:"sysDept.phone"}})],1),s("el-form-item",{attrs:{label:"排序"}},[s("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.sysDept.sortValue,callback:function(e){t.$set(t.sysDept,"sortValue",e)},expression:"sysDept.sortValue"}})],1),s("el-form-item",{attrs:{label:"状态",prop:"type"}},[s("el-radio-group",{model:{value:t.sysDept.status,callback:function(e){t.$set(t.sysDept,"status",e)},expression:"sysDept.status"}},[s("el-radio",{attrs:{label:1}},[t._v("正常")]),s("el-radio",{attrs:{label:0}},[t._v("停用")])],1)],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:function(e){return t.saveOrUpdate()}}},[t._v("确 定")])],1)],1)],1)},n=[],i=(s("d3b7"),s("3ca3"),s("ddb0"),s("e9c4"),s("b0c0"),s("c2d0")),o={id:"",parentId:"",name:"",treePath:"",leader:"",phone:"",sortValue:1,status:1},l={components:{SelectDeptTree:function(){return s.e("chunk-7795b7c1").then(s.bind(null,"2143"))}},data:function(){return{sysDeptList:[],expandKeys:[],dialogTitle:"",dialogVisible:!1,sysDept:o,saveBtnDisabled:!1,rules:{name:[{required:!0,message:"请输入部门名称",trigger:"blur"}]},dataDeptTree:[]}},created:function(){this.fetchData(),this.fetchPopDept()},methods:{fetchData:function(){var t=this;console.log("加载列表"),i["a"].findNodes().then((function(e){t.sysDeptList=e.data}))},saveDeptId:function(t){var e=this;t==this.sysDept.id?this.$alert("上级部门不能和当前部门相同","提示",{confirmButtonText:"确定",callback:function(t){e.sysDept.parentId="",e.sysDept.parentName="",i["a"].getById(e.sysDept.id).then((function(t){e.sysDept=t.data}))}}):(this.sysDept.parentId=t,this.sysDept.parentName=treeName)},fetchPopDept:function(){var t=this;i["a"].findSelectNodes().then((function(e){t.dataDeptTree=e.data,console.log("loadDeptData"),console.log(JSON.stringify(t.dataDeptTree))}))},removeDataById:function(t){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return i["a"].removeById(t)})).then((function(t){e.fetchData(),e.$message({type:"success",message:t.message})})).catch((function(){e.$message.info("取消删除")}))},add:function(t){this.typeDisabled=!1,this.dialogTitle="添加下级部门",this.dialogVisible=!0,this.sysDept=Object.assign({},o),this.sysDept.id="",t?(this.sysDept.parentId=t.id,this.sysDept.parentName=t.name):(this.dialogTitle="添加顶级部门",this.sysDept.parentId="0")},edit:function(t){var e=this;this.dialogTitle="修改部门",this.dialogVisible=!0,i["a"].getById(t.id).then((function(t){e.sysDept=t.data}))},saveOrUpdate:function(){var t=this;this.$refs.dataForm.validate((function(e){e&&(t.saveBtnDisabled=!0,t.sysDept.id?t.update():t.save())}))},save:function(){var t=this;i["a"].save(this.sysDept).then((function(e){t.$message.success(e.message||"操作成功"),t.dialogVisible=!1,t.fetchData(t.page)}))},update:function(){var t=this;i["a"].updateById(this.sysDept).then((function(e){t.$message.success(e.message||"操作成功"),t.dialogVisible=!1,t.fetchData()}))}}},r=l,c=s("2877"),d=Object(c["a"])(r,a,n,!1,null,null,null);e["default"]=d.exports},c2d0:function(t,e,s){"use strict";var a=s("b775"),n="/admin/system/sysDept";e["a"]={findNodes:function(){return Object(a["a"])({url:"".concat(n,"/findNodes"),method:"get"})},findSelectNodes:function(){return Object(a["a"])({url:"".concat(n,"/findSelectNodes"),method:"get"})},findNodesByParent:function(t){return Object(a["a"])({url:"".concat(n,"/findNodesByParent/").concat(t),method:"get"})},getById:function(t){return Object(a["a"])({url:"".concat(n,"/get/").concat(t),method:"get"})},removeById:function(t){return Object(a["a"])({url:"".concat(n,"/remove/").concat(t),method:"delete"})},save:function(t){return Object(a["a"])({url:"".concat(n,"/save"),method:"post",data:t})},updateById:function(t){return Object(a["a"])({url:"".concat(n,"/update"),method:"put",data:t})}}},e9c4:function(t,e,s){var a=s("23e7"),n=s("d066"),i=s("d039"),o=n("JSON","stringify"),l=/[\uD800-\uDFFF]/g,r=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,d=function(t,e,s){var a=s.charAt(e-1),n=s.charAt(e+1);return r.test(t)&&!c.test(n)||c.test(t)&&!r.test(a)?"\\u"+t.charCodeAt(0).toString(16):t},u=i((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&a({target:"JSON",stat:!0,forced:u},{stringify:function(t,e,s){var a=o.apply(null,arguments);return"string"==typeof a?a.replace(l,d):a}})}}]);