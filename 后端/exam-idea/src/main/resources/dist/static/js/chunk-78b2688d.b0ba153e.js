(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78b2688d","chunk-7f2a6cdd"],{"7e5c":function(e,t,a){"use strict";a("99af");var n=a("b775"),s="/admin/system/sysUser";t["a"]={getPageList:function(e,t,a){return Object(n["a"])({url:"".concat(s,"/").concat(e,"/").concat(t),method:"get",params:a})},save:function(e){return Object(n["a"])({url:"".concat(s,"/save"),method:"post",data:e})},getUserId:function(e){return Object(n["a"])({url:"".concat(s,"/getUser/").concat(e),method:"get"})},getByIds:function(e){return Object(n["a"])({url:"".concat(s,"/getByIds"),method:"post",data:e})},update:function(e){return Object(n["a"])({url:"".concat(s,"/update"),method:"post",data:e})},removeById:function(e){return Object(n["a"])({url:"".concat(s,"/remove/").concat(e),method:"delete"})},batchRemove:function(e){return Object(n["a"])({url:"".concat(s,"/batchRemove"),method:"delete",data:e})},updateStatus:function(e,t){return Object(n["a"])({url:"".concat(s,"/updateStatus/").concat(e,"/").concat(t),method:"get"})},uploadFile:function(e){return Object(n["a"])({url:"".concat(s,"/import"),method:"post",data:e})}}},"9b57":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-input",{staticClass:"input-with-select",staticStyle:{"line-hight":"40px"},attrs:{placeholder:"请选择",size:e.size,disabled:e.inpDisabled},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("el-button",{attrs:{slot:"append",disabled:e.btnDisabled,icon:"el-icon-search"},on:{click:e.showUserSelect},slot:"append"})],1),a("SysUserSelectDialog",{ref:"sysUserSelect",attrs:{selectData:e.selectData,single:e.single,where:e.where},on:{doSubmit:e.selectionsToInput}})],1)},s=[],l=(a("b0c0"),a("a15b"),a("d81d"),a("e99c")),o=a("7e5c"),i={data:function(){return{name:"",selectData:[],sysUserService:null}},props:{size:{type:String,default:"small"},myvals:{type:Array,default:function(){return[]}},btnDisabled:{type:Boolean,default:!1},inpDisabled:{type:Boolean,default:!0},single:{type:Boolean,default:!1},where:{type:String,default:""}},components:{SysUserSelectDialog:l["default"]},created:function(){},watch:{myvals:{handler:function(e){var t=this;this.selectData=[],e&&e.length>0&&o["a"].getByIds(e).then((function(e){e&&e.data&&(t.selectData=e.data)}))},immediate:!0,deep:!1},selectData:{handler:function(e){this.name=e.map((function(e){return e.name})).join(",")},immediate:!1,deep:!1}},methods:{selectionsToInput:function(e){this.selectData=e;for(var t=[],a=0;a<this.selectData.length;a++){var n=this.selectData[a],s=n.id;t.push(s)}this.$emit("getInfo",t)},showUserSelect:function(){this.$refs.sysUserSelect.init()}}},r=i,c=(a("b289"),a("2877")),u=Object(c["a"])(r,n,s,!1,null,null,null);t["default"]=u.exports},"9b96":function(e,t,a){},a15b:function(e,t,a){"use strict";var n=a("23e7"),s=a("44ad"),l=a("fc6a"),o=a("a640"),i=[].join,r=s!=Object,c=o("join",",");n({target:"Array",proto:!0,forced:r||!c},{join:function(e){return i.call(l(this),void 0===e?",":e)}})},b289:function(e,t,a){"use strict";a("9b96")},e99c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"分配用户",width:"1000px","close-on-click-modal":!1,"append-to-body":!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"title"},slot:"title"},[a("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:function(t){e.visible=!1}}},[e._v("关闭")]),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-check"},on:{click:function(t){return e.doSubmit()}}},[e._v("确定")])],1),a("div",[a("div",{staticClass:"search-div",staticStyle:{height:"55px","margin-top":"-25px"}},[a("el-form",{ref:"searchForm",attrs:{size:"small",model:e.searchForm}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{size:"small",placeholder:"用户名",clearable:""},on:{input:function(t){return e.changeInput(t)}},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}})],1)],1),a("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:5}},[a("el-form-item",{attrs:{prop:"name"}},[a("el-input",{attrs:{size:"small",placeholder:"姓名",clearable:""},on:{input:function(t){return e.changeInput(t)}},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1)],1),a("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:5}},[a("el-form-item",{attrs:{prop:"phone"}},[a("el-input",{attrs:{size:"small",placeholder:"手机",clearable:""},on:{input:function(t){return e.changeInput(t)}},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1)],1),a("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:5}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(t){return e.refreshList()}}},[e._v("搜索 ")]),a("el-button",{attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:function(t){return e.resetSearch()}}},[e._v("重置 ")])],1)],1)],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"sysUserTable",staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.dataList,size:"small",stripe:"",border:"","row-key":e.getRowKeys},on:{select:e.handleSelectionChange,"select-all":e.handleSelectionChange,"selection-change":e.propertySelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,"header-align":"center",align:"center",width:"50"}}),a("el-table-column",{attrs:{sortable:"",prop:"deptName",label:"部门名称","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"username",label:"用户名","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"name",label:"姓名","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"phone",label:"手机","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"postName",label:"岗位","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"description",label:"描述","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"status",label:"状态","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"createTime",label:"创建时间","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"updateTime",label:"更新时间","show-overflow-tooltip":"true"}})],1),a("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":e.pageNo,"page-sizes":[5,10,50,100],"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}})],1)])],1)},s=[],l=(a("e9c4"),a("d3b7"),a("159b"),a("b0c0"),a("7e5c")),o={data:function(){return{searchForm:{},dataListAllSelections:[],idKey:"id",dataList:[],pageNo:1,pageSize:5,total:0,loading:!1,visible:!1}},props:{selectData:{type:Array,default:function(){return[]}},single:{type:Boolean,default:!1},where:{type:String,default:""}},methods:{changeInput:function(){this.$forceUpdate()},getRowKeys:function(e){return e.id},init:function(){var e=this;this.visible=!0,this.$nextTick((function(){e.dataListAllSelections=JSON.parse(JSON.stringify(e.selectData)),e.$refs.sysUserTable.clearSelection(),e.resetSearch()}))},refreshList:function(){var e=this;if(this.loading=!0,null!=this.where&&""!=this.where){var t=JSON.parse(this.where);this.searchForm=Object.assign(t,this.searchForm)}l["a"].getPageList(this.pageNo,this.pageSize,this.searchForm).then((function(t){e.dataList=t.data.records,e.total=t.data.total,e.selectData&&e.selectData.length<=1e4&&e.$nextTick((function(){var e=this,t=[];console.log("selectData"),console.log(this.selectData),this.dataList.forEach((function(a){e.selectData.forEach((function(e){e.id===a.id&&t.push(a)}))})),t&&t.forEach((function(t){e.$refs.sysUserTable.toggleRowSelection(t,!0)}))})),e.loading=!1}))},sizeChangeHandle:function(e){this.pageSize=e,this.pageNo=1,this.refreshList()},currentChangeHandle:function(e){this.pageNo=e,this.refreshList()},resetSearch:function(){this.$refs.searchForm.resetFields(),this.refreshList()},propertySelectionChange:function(e){this.dataListAllSelections=e},handleSelectionChange:function(e,t){if(t)this.selectData&&this.selectData.length<=1e4&&this.$nextTick((function(){var a=this,n=e.length&&-1!==e.indexOf(t);n||this.selectData.forEach((function(e,n){e.id==t.id&&(a.selectData[n]={id:""},console.log("has removed "+e.name))}))}));else{var a=this.$refs.sysUserTable.store.states.isAllSelected;0==a?(console.log("点击了反选"),this.$nextTick((function(){var e=this;this.selectData&&this.selectData.length<=1e4&&this.dataList.forEach((function(t){e.selectData.forEach((function(a,n){a.id==t.id&&(e.selectData[n]={id:""},console.log("has removed "+a.name))}))}))}))):console.log("点击了全选")}},doSubmit:function(){this.visible=!1,this.selectData&&this.selectData.length<=1e4&&this.$nextTick((function(){var e=this;this.selectData.forEach((function(t){var a=!1;e.dataListAllSelections.forEach((function(e,n){e.id==t.id&&(a=!0)})),0==a&&""!=t.id&&(e.dataListAllSelections.push(t),console.log("has push"),console.log(t))})),this.$emit("doSubmit",this.dataListAllSelections)}))}}},i=o,r=a("2877"),c=Object(r["a"])(i,n,s,!1,null,null,null);t["default"]=c.exports},e9c4:function(e,t,a){var n=a("23e7"),s=a("d066"),l=a("d039"),o=s("JSON","stringify"),i=/[\uD800-\uDFFF]/g,r=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,u=function(e,t,a){var n=a.charAt(t-1),s=a.charAt(t+1);return r.test(e)&&!c.test(s)||c.test(e)&&!r.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},h=l((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&n({target:"JSON",stat:!0,forced:h},{stringify:function(e,t,a){var n=o.apply(null,arguments);return"string"==typeof n?n.replace(i,u):n}})}}]);