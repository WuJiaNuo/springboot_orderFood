(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6fd7333a","chunk-63041761"],{"0b38":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-input",{staticClass:"input-with-select",staticStyle:{"line-hight":"40px"},attrs:{placeholder:"请选择",size:t.size,disabled:t.inpDisabled},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[a("el-button",{attrs:{slot:"append",disabled:t.btnDisabled,icon:"el-icon-search"},on:{click:t.showUserSelect},slot:"append"})],1),a("TbExamSelectDialog",{ref:"tbExamSelect",attrs:{selectData:t.selectData,single:t.single,where:t.where},on:{doSubmit:t.selectionsToInput}})],1)},o=[],n=(a("b0c0"),a("a15b"),a("d81d"),a("392b")),i=a("20c5"),s={data:function(){return{name:"",selectData:[],tbExamService:null}},props:{size:{type:String,default:"small"},myvals:{type:Array,default:function(){return[]}},btnDisabled:{type:Boolean,default:!1},inpDisabled:{type:Boolean,default:!0},single:{type:Boolean,default:!1},where:{type:String,default:""}},components:{TbExamSelectDialog:n["default"]},created:function(){},watch:{myvals:{handler:function(t){var e=this;this.selectData=[],t&&t.length>0&&i["a"].getByIds(t).then((function(t){t&&t.data&&(e.selectData=t.data)}))},immediate:!0,deep:!1},selectData:{handler:function(t){this.name=t.map((function(t){return t.title})).join(",")},immediate:!1,deep:!1}},methods:{selectionsToInput:function(t){this.selectData=t;for(var e=[],a=0;a<this.selectData.length;a++){var l=this.selectData[a],o=l.id;e.push(o)}this.$emit("getInfo",e)},showUserSelect:function(){this.$refs.tbExamSelect.init()}}},r=s,c=(a("d3c3"),a("2877")),u=Object(c["a"])(r,l,o,!1,null,null,null);e["default"]=u.exports},"20c5":function(t,e,a){"use strict";a("99af");var l=a("b775"),o="/Exam";e["a"]={getPageList:function(t,e,a){return Object(l["a"])({url:"".concat(o,"/").concat(t,"/").concat(e),method:"get",params:a})},getMyExamist:function(t,e,a){return Object(l["a"])({url:"".concat(o,"/myExam/").concat(t,"/").concat(e),method:"get",params:a})},getAllTbExam:function(t){return Object(l["a"])({url:"".concat(o,"/list"),method:"get",params:t})},getById:function(t){return Object(l["a"])({url:"".concat(o,"/get/").concat(t),method:"get"})},getByIds:function(t){return Object(l["a"])({url:"".concat(o,"/getByIds"),method:"post",data:t})},save:function(t){return Object(l["a"])({url:"".concat(o,"/save"),method:"post",data:t})},updateById:function(t){return Object(l["a"])({url:"".concat(o,"/update"),method:"put",data:t})},removeById:function(t){return Object(l["a"])({url:"".concat(o,"/remove/").concat(t),method:"delete"})},batchRemove:function(t){return Object(l["a"])({url:"".concat(o,"/batchRemove"),method:"delete",data:t})},updateStatus:function(t,e){return Object(l["a"])({url:"".concat(o,"/updateStatus/").concat(t,"/").concat(e),method:"get"})}}},"392b":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"选择题目",width:"1000px","close-on-click-modal":!1,"append-to-body":!0,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"title"},slot:"title"},[a("el-button",{attrs:{size:"small",icon:"el-icon-circle-close"},on:{click:function(e){t.visible=!1}}},[t._v("关闭")]),a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-circle-check"},on:{click:function(e){return t.doSubmit()}}},[t._v("确定")])],1),a("div",[a("div",{staticClass:"search-div",staticStyle:{height:"55px","margin-top":"-25px"}},[a("el-form",{ref:"searchForm",attrs:{size:"small",model:t.searchForm}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{prop:"title"}},[a("el-input",{attrs:{size:"small",placeholder:"标题",clearable:""},on:{input:function(e){return t.changeInput(e)}},model:{value:t.searchForm.title,callback:function(e){t.$set(t.searchForm,"title",e)},expression:"searchForm.title"}})],1)],1),a("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:5}},[a("el-form-item",{attrs:{prop:"remark"}},[a("el-input",{attrs:{size:"small",placeholder:"备注",clearable:""},on:{input:function(e){return t.changeInput(e)}},model:{value:t.searchForm.remark,callback:function(e){t.$set(t.searchForm,"remark",e)},expression:"searchForm.remark"}})],1)],1),a("el-col",{staticStyle:{"margin-left":"5px"},attrs:{span:5}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(e){return t.refreshList()}}},[t._v("搜索 ")]),a("el-button",{attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:function(e){return t.resetSearch()}}},[t._v("重置 ")])],1)],1)],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tbExamTable",staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.dataList,size:"small",stripe:"",border:"","row-key":t.getRowKeys},on:{select:t.handleSelectionChange,"select-all":t.handleSelectionChange,"selection-change":t.propertySelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0,"header-align":"center",align:"center",width:"50"}}),a("el-table-column",{attrs:{sortable:"",prop:"deptName",label:"部门名称","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"title",label:"标题","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"duration",label:"时长","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"criteria",label:"及格标准","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"startTime",label:"开始时间","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"endTime",label:"结束时间","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"remark",label:"备注","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"createTime",label:"创建时间","show-overflow-tooltip":"true"}}),a("el-table-column",{attrs:{sortable:"",prop:"updateTime",label:"修改时间","show-overflow-tooltip":"true"}})],1),a("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":t.pageNo,"page-sizes":[5,10,50,100],"page-size":t.pageSize,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}})],1)])],1)},o=[],n=(a("e9c4"),a("d3b7"),a("159b"),a("20c5")),i={data:function(){return{searchForm:{},dataListAllSelections:[],idKey:"id",dataList:[],pageNo:1,pageSize:5,total:0,loading:!1,visible:!1}},props:{selectData:{type:Array,default:function(){return[]}},single:{type:Boolean,default:!1},where:{type:String,default:""}},methods:{changeInput:function(){this.$forceUpdate()},getRowKeys:function(t){return t.id},init:function(){var t=this;this.visible=!0,this.$nextTick((function(){t.dataListAllSelections=JSON.parse(JSON.stringify(t.selectData)),t.$refs.tbExamTable.clearSelection(),t.resetSearch()}))},refreshList:function(){var t=this;if(this.loading=!0,null!=this.where&&""!=this.where){var e=JSON.parse(this.where);this.searchForm=Object.assign(e,this.searchForm)}n["a"].getPageList(this.pageNo,this.pageSize,this.searchForm).then((function(e){t.dataList=e.data.pageModel.records,t.total=e.data.pageModel.total,t.selectData&&t.selectData.length<=1e4&&t.$nextTick((function(){var t=this,e=[];console.log("selectData"),console.log(this.selectData),this.dataList.forEach((function(a){t.selectData.forEach((function(t){t.id===a.id&&e.push(a)}))})),e&&e.forEach((function(e){t.$refs.tbExamTable.toggleRowSelection(e,!0)}))})),t.loading=!1}))},sizeChangeHandle:function(t){this.pageSize=t,this.pageNo=1,this.refreshList()},currentChangeHandle:function(t){this.pageNo=t,this.refreshList()},resetSearch:function(){this.$refs.searchForm.resetFields(),this.refreshList()},propertySelectionChange:function(t){this.dataListAllSelections=t},handleSelectionChange:function(t,e){if(e)this.selectData&&this.selectData.length<=1e4&&this.$nextTick((function(){var a=this,l=t.length&&-1!==t.indexOf(e);console.log("selected="+l),l||this.selectData.forEach((function(t,l){t.id==e.id&&(a.selectData[l]={id:""},console.log("has removed "+t.title))}))}));else{console.log("全选还是反选");var a=this.$refs.tbExamTable.store.states.isAllSelected;0==a?(console.log("点击了反选"),this.$nextTick((function(){var t=this;this.selectData&&this.selectData.length<=1e4&&this.dataList.forEach((function(e){t.selectData.forEach((function(a,l){a.id==e.id&&(t.selectData[l]={id:""},console.log("has removed "+a.title))}))}))}))):console.log("点击了全选")}},doSubmit:function(){this.visible=!1,this.selectData&&this.selectData.length<=1e4&&this.$nextTick((function(){var t=this;console.log("last selectData"),console.log(this.selectData),this.selectData.forEach((function(e){var a=!1;t.dataListAllSelections.forEach((function(t,l){t.id==e.id&&(a=!0)})),0==a&&""!=e.id&&(t.dataListAllSelections.push(e),console.log("has push"),console.log(e))})),this.$emit("doSubmit",this.dataListAllSelections)}))}}},s=i,r=a("2877"),c=Object(r["a"])(s,l,o,!1,null,null,null);e["default"]=c.exports},a15b:function(t,e,a){"use strict";var l=a("23e7"),o=a("44ad"),n=a("fc6a"),i=a("a640"),s=[].join,r=o!=Object,c=i("join",",");l({target:"Array",proto:!0,forced:r||!c},{join:function(t){return s.call(n(this),void 0===t?",":t)}})},d3c3:function(t,e,a){"use strict";a("d402")},d402:function(t,e,a){},e9c4:function(t,e,a){var l=a("23e7"),o=a("d066"),n=a("d039"),i=o("JSON","stringify"),s=/[\uD800-\uDFFF]/g,r=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,u=function(t,e,a){var l=a.charAt(e-1),o=a.charAt(e+1);return r.test(t)&&!c.test(o)||c.test(t)&&!r.test(l)?"\\u"+t.charCodeAt(0).toString(16):t},h=n((function(){return'"\\udf06\\ud834"'!==i("\udf06\ud834")||'"\\udead"'!==i("\udead")}));i&&l({target:"JSON",stat:!0,forced:h},{stringify:function(t,e,a){var l=i.apply(null,arguments);return"string"==typeof l?l.replace(s,u):l}})}}]);