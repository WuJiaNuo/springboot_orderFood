{"remainingRequest":"F:\\project\\ksmg\\basemf-sig\\exam_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\project\\ksmg\\basemf-sig\\exam_vue\\src\\components\\Custom\\TreeSelect\\TreeModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\project\\ksmg\\basemf-sig\\exam_vue\\src\\components\\Custom\\TreeSelect\\TreeModal.vue","mtime":1695044329291},{"path":"F:\\project\\ksmg\\basemf-sig\\exam_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\project\\ksmg\\basemf-sig\\exam_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\project\\ksmg\\basemf-sig\\exam_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\project\\ksmg\\basemf-sig\\exam_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzeXNEZXB0QXBpIGZyb20gJ0AvYXBpL3N5c3RlbS9zeXNEZXB0JwpleHBvcnQgZGVmYXVsdCB7CiAgICBwcm9wczogewogICAgICAgIGRhdGFUcmVlOiB7CiAgICAgICAgICAgIHR5cGU6IEFycmF5LAogICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICB9LAogICAgICAgIHRyZWVJZDogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6ICcnLAogICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICB9LAogICAgICAgIHRyZWVUaXRsZTogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6ICcnLAogICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICB9LAogICAgICAgIGlzTGF6eTogewogICAgICAgICAgICB0eXBlOiBCb29sZWFuLAogICAgICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgdHlwZTogT2JqZWN0LAogICAgICAgICAgICBkZWZhdWx0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnbmFtZScsCiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46ICdjaGlsZHJlbicsCiAgICAgICAgICAgICAgICAgICAgaXNMZWFmOiAnaXNMZWFmJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdHJlZVByb3BzOiB7CiAgICAgICAgICAgICAgICBsYWJlbDogJ25hbWUnLAogICAgICAgICAgICAgICAgaWQ6J2lkJywKICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAnY2hpbGRsaXN0JywKICAgICAgICAgICAgICAgIGlzTGVhZjogJ2xlYWYnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICAgICAgICB0cmVlRGF0YTogW10sCiAgICAgICAgICAgIHNlYXJjaFZhbHVlOiAnJywKICAgICAgICAgICAgZGVmYXVsdEV4cGFuZGVkS2V5czogW10sCiAgICAgICAgICAgIHNlbGVjdGVkVmFsdWU6ICcnLAogICAgICAgICAgICBzZWxlY3RlZE5hbWU6ICcnCiAgICAgICAgfQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgc2VhcmNoVmFsdWUodmFsdWUpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy50cmVlLmZpbHRlcih2YWx1ZSkKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHNob3coaWQsIG5hbWUpIHsKICAgICAgICAgICAgdGhpcy5zZWFyY2hWYWx1ZSA9ICcnCiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEV4cGFuZGVkS2V5cyA9IFtdCiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZSA9IGlkCiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROYW1lID0gbmFtZQogICAgICAgICAgICBpZih0aGlzLmlzTGF6eT09ZmFsc2UpewogICAgICAgICAgICAgICAgdGhpcy5sb2FkVHJlZSgpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZQogICAgICAgIH0sCiAgICAgICAgbG9hZE5vZGVCeVBhcmVudChub2RlLCByZXNvbHZlKSB7CiAgICAgICAgICAgIGlmIChub2RlLmxldmVsID09PSAwKSB7CiAgICAgICAgICAgICAgICAvL+iwg+eUqOWQjuWPsOafpeivouesrOS4gOe6p+WIqwogICAgICAgICAgICAgICAgc3lzRGVwdEFwaS5maW5kTm9kZXNCeVBhcmVudCgnMCcpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGxldCBwYXJlbnRJZCA9IG5vZGUuZGF0YS5pZDsKICAgICAgICAgICAgICAgIHN5c0RlcHRBcGkuZmluZE5vZGVzQnlQYXJlbnQocGFyZW50SWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBsb2FkVHJlZSgpIHsKICAgICAgICAgICAgdGhpcy50cmVlRGF0YSA9IHRoaXMuZGF0YVRyZWUKICAgICAgICAgICAgLy8gICB0aGlzLiRhcGkuc3lzdGVtLm9yZ2FuaXphdGlvbi50cmVlKCkKICAgICAgICAgICAgLy8gICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIC8vICAgICAgIHRoaXMudHJlZURhdGEgPSByZXMuZGF0YQogICAgICAgICAgICAvLyAgICAgICAvLyDpu5jorqTlsZXlvIDmoLnoioLngrkKICAgICAgICAgICAgLy8gICAgICAgdGhpcy5kZWZhdWx0RXhwYW5kZWRLZXlzLnB1c2godGhpcy50cmVlRGF0YVswXS5pZCkKICAgICAgICAgICAgLy8gICAgICAgLy8g6buY6K6k5bGV5byA5b2T5YmN6IqC54K5CiAgICAgICAgICAgIC8vICAgICAgIHRoaXMuZGVmYXVsdEV4cGFuZGVkS2V5cy5wdXNoKHRoaXMuc2VsZWN0ZWRWYWx1ZSkKICAgICAgICAgICAgLy8gICAgIH0pCgogICAgICAgICAgICAvL3RoaXMudHJlZURhdGEgPSBbe2lkOicxJyxsYWJlbDon5LiA57qnJyxjaGlsZHJlbjpbe2lkOicyJyxsYWJlbDon5LqM57qnMSd9LHtpZDonMycsbGFiZWw6J+S6jOe6pzInfV19XQogICAgICAgICAgICAvLyDpu5jorqTlsZXlvIDmoLnoioLngrkKICAgICAgICAgICAgaWYodGhpcy5pc0xhenkgIT0gJ3RydWUnKXsKICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdEV4cGFuZGVkS2V5cy5wdXNoKHRoaXMudHJlZURhdGFbMF0uaWQpCiAgICAgICAgICAgICAgICAvLyDpu5jorqTlsZXlvIDlvZPliY3oioLngrkKICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdEV4cGFuZGVkS2V5cy5wdXNoKHRoaXMudHJlZUlkKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjbG9zZSgpIHsKICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2UKICAgICAgICB9LAogICAgICAgIGNvbmZpcm0oKSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ29rJywgdGhpcy5zZWxlY3RlZFZhbHVlLCB0aGlzLnNlbGVjdGVkTmFtZSkKICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2UKICAgICAgICB9LAogICAgICAgIC8vIOagkeiKgueCuemAieS4reaUueWPmAogICAgICAgIGhhbmRsZVRyZWVTZWxlY3RDaGFuZ2UoZGF0YSkgewogICAgICAgICAgICB0aGlzLnNlbGVjdGVkVmFsdWUgPSBkYXRhLmlkCiAgICAgICAgICAgIGlmKGRhdGEubGFiZWwpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROYW1lID0gZGF0YS5sYWJlbAogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWROYW1lID0gZGF0YS5uYW1lCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGZpbHRlck5vZGUodmFsdWUsIGRhdGEpIHsKICAgICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuIHRydWUKICAgICAgICAgICAgaWYoZGF0YS5sYWJlbCl7CiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5sYWJlbC5pbmRleE9mKHZhbHVlKSAhPT0gLTEKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5uYW1lLmluZGV4T2YodmFsdWUpICE9PSAtMQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgIH0KfQoK"},{"version":3,"sources":["TreeModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"TreeModal.vue","sourceRoot":"src/components/Custom/TreeSelect","sourcesContent":["<template>\n  <div>\n    <el-dialog :title=\"treeTitle\" :visible=\"visible\" :class=\"$style.ElDialog\" width=\"400px\" append-to-body\n               @close=\"close\">\n      <el-input v-model=\"searchValue\" placeholder=\"请输入关键字过滤\" style=\"margin-bottom:10px;\"/>\n      <el-tag>当前选择：{{ selectedName }}</el-tag>\n      <el-tree\n        ref=\"tree\"\n        :data=\"treeData\"\n        node-key=\"id\"\n        :default-expanded-keys=\"defaultExpandedKeys\"\n        :filter-node-method=\"filterNode\"\n        :expand-on-click-node=\"false\"\n        @current-change=\"handleTreeSelectChange\"\n        :props=\"props\"\n        v-if=\"isLazy!=true\"\n      />\n      <el-tree\n        ref=\"tree\"\n        node-key=\"id\"\n        :props=\"treeProps\"\n        :load=\"loadNodeByParent\"\n        lazy\n        @current-change=\"handleTreeSelectChange\"\n        v-if=\"isLazy==true\"\n      >\n      </el-tree>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"confirm\">确定</el-button>\n        <el-button @click=\"close\">关闭</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\n    import sysDeptApi from '@/api/system/sysDept'\n    export default {\n        props: {\n            dataTree: {\n                type: Array,\n                required: false\n            },\n            treeId: {\n                type: String,\n                default: '',\n                required: false\n            },\n            treeTitle: {\n                type: String,\n                default: '',\n                required: false\n            },\n            isLazy: {\n                type: Boolean,\n                default: false\n            },\n            props: {\n                type: Object,\n                default: function () {\n                    return {\n                        label: 'name',\n                        children: 'children',\n                        isLeaf: 'isLeaf'\n                    }\n                }\n            }\n        },\n        data() {\n            return {\n                treeProps: {\n                    label: 'name',\n                    id:'id',\n                    children: 'childlist',\n                    isLeaf: 'leaf'\n                },\n                visible: false,\n                treeData: [],\n                searchValue: '',\n                defaultExpandedKeys: [],\n                selectedValue: '',\n                selectedName: ''\n            }\n        },\n        watch: {\n            searchValue(value) {\n                this.$refs.tree.filter(value)\n            }\n        },\n        methods: {\n            show(id, name) {\n                this.searchValue = ''\n                this.defaultExpandedKeys = []\n                this.selectedValue = id\n                this.selectedName = name\n                if(this.isLazy==false){\n                    this.loadTree()\n                }\n                this.visible = true\n            },\n            loadNodeByParent(node, resolve) {\n                if (node.level === 0) {\n                    //调用后台查询第一级别\n                    sysDeptApi.findNodesByParent('0').then(response => {\n                        resolve(response.data);\n                    })\n                }else{\n                    let parentId = node.data.id;\n                    sysDeptApi.findNodesByParent(parentId).then(response => {\n                        resolve(response.data);\n                    })\n                }\n            },\n            loadTree() {\n                this.treeData = this.dataTree\n                //   this.$api.system.organization.tree()\n                //     .then(res => {\n                //       this.treeData = res.data\n                //       // 默认展开根节点\n                //       this.defaultExpandedKeys.push(this.treeData[0].id)\n                //       // 默认展开当前节点\n                //       this.defaultExpandedKeys.push(this.selectedValue)\n                //     })\n\n                //this.treeData = [{id:'1',label:'一级',children:[{id:'2',label:'二级1'},{id:'3',label:'二级2'}]}]\n                // 默认展开根节点\n                if(this.isLazy != 'true'){\n                    this.defaultExpandedKeys.push(this.treeData[0].id)\n                    // 默认展开当前节点\n                    this.defaultExpandedKeys.push(this.treeId)\n                }\n            },\n            close() {\n                this.visible = false\n            },\n            confirm() {\n                this.$emit('ok', this.selectedValue, this.selectedName)\n                this.visible = false\n            },\n            // 树节点选中改变\n            handleTreeSelectChange(data) {\n                this.selectedValue = data.id\n                if(data.label) {\n                    this.selectedName = data.label\n                }else{\n                    this.selectedName = data.name\n                }\n            },\n            filterNode(value, data) {\n                if (!value) return true\n                if(data.label){\n                    return data.label.indexOf(value) !== -1\n                }else{\n                    return data.name.indexOf(value) !== -1\n                }\n            }\n\n        }\n    }\n\n</script>\n\n<style lang=\"scss\" module>\n  .ElDialog {\n    :global .el-dialog__body {\n      padding-top: 0px !important;\n    }\n  }\n</style>\n\n"]}]}
