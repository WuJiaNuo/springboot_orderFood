{"remainingRequest":"F:\\exam_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\exam_vue\\src\\components\\Custom\\TreeSelect\\TreeModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\exam_vue\\src\\components\\Custom\\TreeSelect\\TreeModal.vue","mtime":1682967855889},{"path":"F:\\exam_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\exam_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\exam_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\exam_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzeXNEZXB0QXBpIGZyb20gJ0AvYXBpL3N5c3RlbS9zeXNEZXB0JwpleHBvcnQgZGVmYXVsdCB7CiAgICBwcm9wczogewogICAgICAgIGRhdGFUcmVlOiB7CiAgICAgICAgICAgIHR5cGU6IEFycmF5LAogICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICB9LAogICAgICAgIHRyZWVJZDogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6ICcnLAogICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICB9LAogICAgICAgIHRyZWVUaXRsZTogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6ICcnLAogICAgICAgICAgICByZXF1aXJlZDogZmFsc2UKICAgICAgICB9LAogICAgICAgIGlzTGF6eTogewogICAgICAgICAgICB0eXBlOiBCb29sZWFuLAogICAgICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgdHlwZTogT2JqZWN0LAogICAgICAgICAgICBkZWZhdWx0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnbGFiZWwnLAogICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nLAogICAgICAgICAgICAgICAgICAgIGlzTGVhZjogJ2lzTGVhZicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRyZWVQcm9wczogewogICAgICAgICAgICAgICAgbGFiZWw6ICduYW1lJywKICAgICAgICAgICAgICAgIGlkOidpZCcsCiAgICAgICAgICAgICAgICBjaGlsZHJlbjogJ2NoaWxkbGlzdCcsCiAgICAgICAgICAgICAgICBpc0xlYWY6ICdsZWFmJwogICAgICAgICAgICB9LAogICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgICAgICAgdHJlZURhdGE6IFtdLAogICAgICAgICAgICBzZWFyY2hWYWx1ZTogJycsCiAgICAgICAgICAgIGRlZmF1bHRFeHBhbmRlZEtleXM6IFtdLAogICAgICAgICAgICBzZWxlY3RlZFZhbHVlOiAnJywKICAgICAgICAgICAgc2VsZWN0ZWROYW1lOiAnJwogICAgICAgIH0KICAgIH0sCiAgICB3YXRjaDogewogICAgICAgIHNlYXJjaFZhbHVlKHZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMudHJlZS5maWx0ZXIodmFsdWUpCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBzaG93KGlkLCBuYW1lKSB7CiAgICAgICAgICAgIHRoaXMuc2VhcmNoVmFsdWUgPSAnJwogICAgICAgICAgICB0aGlzLmRlZmF1bHRFeHBhbmRlZEtleXMgPSBbXQogICAgICAgICAgICB0aGlzLnNlbGVjdGVkVmFsdWUgPSBpZAogICAgICAgICAgICB0aGlzLnNlbGVjdGVkTmFtZSA9IG5hbWUKICAgICAgICAgICAgaWYodGhpcy5pc0xhenk9PWZhbHNlKXsKICAgICAgICAgICAgICAgIHRoaXMubG9hZFRyZWUoKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWUKICAgICAgICB9LAogICAgICAgIGxvYWROb2RlQnlQYXJlbnQobm9kZSwgcmVzb2x2ZSkgewogICAgICAgICAgICBpZiAobm9kZS5sZXZlbCA9PT0gMCkgewogICAgICAgICAgICAgICAgLy/osIPnlKjlkI7lj7Dmn6Xor6LnrKzkuIDnuqfliKsKICAgICAgICAgICAgICAgIHN5c0RlcHRBcGkuZmluZE5vZGVzQnlQYXJlbnQoJzAnKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBsZXQgcGFyZW50SWQgPSBub2RlLmRhdGEuaWQ7CiAgICAgICAgICAgICAgICBzeXNEZXB0QXBpLmZpbmROb2Rlc0J5UGFyZW50KHBhcmVudElkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbG9hZFRyZWUoKSB7CiAgICAgICAgICAgIHRoaXMudHJlZURhdGEgPSB0aGlzLmRhdGFUcmVlCiAgICAgICAgICAgIC8vICAgdGhpcy4kYXBpLnN5c3RlbS5vcmdhbml6YXRpb24udHJlZSgpCiAgICAgICAgICAgIC8vICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICAvLyAgICAgICB0aGlzLnRyZWVEYXRhID0gcmVzLmRhdGEKICAgICAgICAgICAgLy8gICAgICAgLy8g6buY6K6k5bGV5byA5qC56IqC54K5CiAgICAgICAgICAgIC8vICAgICAgIHRoaXMuZGVmYXVsdEV4cGFuZGVkS2V5cy5wdXNoKHRoaXMudHJlZURhdGFbMF0uaWQpCiAgICAgICAgICAgIC8vICAgICAgIC8vIOm7mOiupOWxleW8gOW9k+WJjeiKgueCuQogICAgICAgICAgICAvLyAgICAgICB0aGlzLmRlZmF1bHRFeHBhbmRlZEtleXMucHVzaCh0aGlzLnNlbGVjdGVkVmFsdWUpCiAgICAgICAgICAgIC8vICAgICB9KQoKICAgICAgICAgICAgLy90aGlzLnRyZWVEYXRhID0gW3tpZDonMScsbGFiZWw6J+S4gOe6pycsY2hpbGRyZW46W3tpZDonMicsbGFiZWw6J+S6jOe6pzEnfSx7aWQ6JzMnLGxhYmVsOifkuoznuqcyJ31dfV0KICAgICAgICAgICAgLy8g6buY6K6k5bGV5byA5qC56IqC54K5CiAgICAgICAgICAgIGlmKHRoaXMuaXNMYXp5ICE9ICd0cnVlJyl7CiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRFeHBhbmRlZEtleXMucHVzaCh0aGlzLnRyZWVEYXRhWzBdLmlkKQogICAgICAgICAgICAgICAgLy8g6buY6K6k5bGV5byA5b2T5YmN6IqC54K5CiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRFeHBhbmRlZEtleXMucHVzaCh0aGlzLnRyZWVJZCkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgY2xvc2UoKSB7CiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBjb25maXJtKCkgewogICAgICAgICAgICB0aGlzLiRlbWl0KCdvaycsIHRoaXMuc2VsZWN0ZWRWYWx1ZSwgdGhpcy5zZWxlY3RlZE5hbWUpCiAgICAgICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlCiAgICAgICAgfSwKICAgICAgICAvLyDmoJHoioLngrnpgInkuK3mlLnlj5gKICAgICAgICBoYW5kbGVUcmVlU2VsZWN0Q2hhbmdlKGRhdGEpIHsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlID0gZGF0YS5pZAogICAgICAgICAgICBpZihkYXRhLmxhYmVsKSB7CiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTmFtZSA9IGRhdGEubGFiZWwKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkTmFtZSA9IGRhdGEubmFtZQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBmaWx0ZXJOb2RlKHZhbHVlLCBkYXRhKSB7CiAgICAgICAgICAgIGlmICghdmFsdWUpIHJldHVybiB0cnVlCiAgICAgICAgICAgIGlmKGRhdGEubGFiZWwpewogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubGFiZWwuaW5kZXhPZih2YWx1ZSkgIT09IC0xCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEubmFtZS5pbmRleE9mKHZhbHVlKSAhPT0gLTEKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICB9Cn0KCg=="},{"version":3,"sources":["TreeModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"TreeModal.vue","sourceRoot":"src/components/Custom/TreeSelect","sourcesContent":["<template>\n  <div>\n    <el-dialog :title=\"treeTitle\" :visible=\"visible\" :class=\"$style.ElDialog\" width=\"400px\" append-to-body\n               @close=\"close\">\n      <el-input v-model=\"searchValue\" placeholder=\"请输入关键字过滤\" style=\"margin-bottom:10px;\"/>\n      <el-tag>当前选择：{{ selectedName }}</el-tag>\n      <el-tree\n        ref=\"tree\"\n        :data=\"treeData\"\n        node-key=\"id\"\n        :default-expanded-keys=\"defaultExpandedKeys\"\n        :filter-node-method=\"filterNode\"\n        :expand-on-click-node=\"false\"\n        @current-change=\"handleTreeSelectChange\"\n        :props=\"props\"\n        v-if=\"isLazy!=true\"\n      />\n      <el-tree\n        ref=\"tree\"\n        node-key=\"id\"\n        :props=\"treeProps\"\n        :load=\"loadNodeByParent\"\n        lazy\n        @current-change=\"handleTreeSelectChange\"\n        v-if=\"isLazy==true\"\n      >\n      </el-tree>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"confirm\">确定</el-button>\n        <el-button @click=\"close\">关闭</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\n    import sysDeptApi from '@/api/system/sysDept'\n    export default {\n        props: {\n            dataTree: {\n                type: Array,\n                required: false\n            },\n            treeId: {\n                type: String,\n                default: '',\n                required: false\n            },\n            treeTitle: {\n                type: String,\n                default: '',\n                required: false\n            },\n            isLazy: {\n                type: Boolean,\n                default: false\n            },\n            props: {\n                type: Object,\n                default: function () {\n                    return {\n                        label: 'label',\n                        children: 'children',\n                        isLeaf: 'isLeaf'\n                    }\n                }\n            }\n        },\n        data() {\n            return {\n                treeProps: {\n                    label: 'name',\n                    id:'id',\n                    children: 'childlist',\n                    isLeaf: 'leaf'\n                },\n                visible: false,\n                treeData: [],\n                searchValue: '',\n                defaultExpandedKeys: [],\n                selectedValue: '',\n                selectedName: ''\n            }\n        },\n        watch: {\n            searchValue(value) {\n                this.$refs.tree.filter(value)\n            }\n        },\n        methods: {\n            show(id, name) {\n                this.searchValue = ''\n                this.defaultExpandedKeys = []\n                this.selectedValue = id\n                this.selectedName = name\n                if(this.isLazy==false){\n                    this.loadTree()\n                }\n                this.visible = true\n            },\n            loadNodeByParent(node, resolve) {\n                if (node.level === 0) {\n                    //调用后台查询第一级别\n                    sysDeptApi.findNodesByParent('0').then(response => {\n                        resolve(response.data);\n                    })\n                }else{\n                    let parentId = node.data.id;\n                    sysDeptApi.findNodesByParent(parentId).then(response => {\n                        resolve(response.data);\n                    })\n                }\n            },\n            loadTree() {\n                this.treeData = this.dataTree\n                //   this.$api.system.organization.tree()\n                //     .then(res => {\n                //       this.treeData = res.data\n                //       // 默认展开根节点\n                //       this.defaultExpandedKeys.push(this.treeData[0].id)\n                //       // 默认展开当前节点\n                //       this.defaultExpandedKeys.push(this.selectedValue)\n                //     })\n\n                //this.treeData = [{id:'1',label:'一级',children:[{id:'2',label:'二级1'},{id:'3',label:'二级2'}]}]\n                // 默认展开根节点\n                if(this.isLazy != 'true'){\n                    this.defaultExpandedKeys.push(this.treeData[0].id)\n                    // 默认展开当前节点\n                    this.defaultExpandedKeys.push(this.treeId)\n                }\n            },\n            close() {\n                this.visible = false\n            },\n            confirm() {\n                this.$emit('ok', this.selectedValue, this.selectedName)\n                this.visible = false\n            },\n            // 树节点选中改变\n            handleTreeSelectChange(data) {\n                this.selectedValue = data.id\n                if(data.label) {\n                    this.selectedName = data.label\n                }else{\n                    this.selectedName = data.name\n                }\n            },\n            filterNode(value, data) {\n                if (!value) return true\n                if(data.label){\n                    return data.label.indexOf(value) !== -1\n                }else{\n                    return data.name.indexOf(value) !== -1\n                }\n            }\n\n        }\n    }\n\n</script>\n\n<style lang=\"scss\" module>\n  .ElDialog {\n    :global .el-dialog__body {\n      padding-top: 0px !important;\n    }\n  }\n</style>\n\n"]}]}
