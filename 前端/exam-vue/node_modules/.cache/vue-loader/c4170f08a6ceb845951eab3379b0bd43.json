{"remainingRequest":"F:\\project\\ksmg\\exam-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\project\\ksmg\\exam-vue\\src\\views\\pages\\business\\exam.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\project\\ksmg\\exam-vue\\src\\views\\pages\\business\\exam.vue","mtime":1697694788587},{"path":"F:\\project\\ksmg\\exam-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\project\\ksmg\\exam-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\project\\ksmg\\exam-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\project\\ksmg\\exam-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCByZXF1ZXN0IGZyb20gJ0AvdXRpbHMvcmVxdWVzdCcKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGZvcm06IHsKICAgICAgICBzaWdMaXN0OiBbXSwKICAgICAgICBtdWxMaXN0OiBbXSwKICAgICAgICBwZExpc3Q6IFtdLAogICAgICAgIHdkTGlzdDogW10sCiAgICAgICAgZXhhbUlkOiAnJywKICAgICAgICByZXN1bHRJZDonJywKICAgICAgICB0ZXN0TGlzdDpbXQogICAgICB9LAogICAgICBtaW46ICcnLAogICAgICBzZWM6ICcnLAogICAgICBleGFtVHlwZTonJywKICAgICAgZnJvbVR5cGU6JycKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGNvdW50RG93bigpIHsKICAgICAgLy9jb25zdCBlbmQgPSBEYXRlLnBhcnNlKG5ldyBEYXRlKCcyMDIzLTEwLTAyIDEzOjMwOjAwJykpCiAgICAgIGNvbnN0IGVuZCA9IERhdGUucGFyc2UobmV3IERhdGUodGhpcy4kcm91dGUucXVlcnkuZW5kVGltZSkpOwogICAgICBjb25zdCBub3cgPSBEYXRlLnBhcnNlKG5ldyBEYXRlKCkpCiAgICAgIGNvbnN0IG1zZWMgPSBlbmQgLSBub3cKICAgICAgaWYgKG1zZWMgPCAwKSByZXR1cm47CiAgICAgIGxldCBkYXkgPSBwYXJzZUludChtc2VjIC8gMTAwMCAvIDYwIC8gNjAgLyAyNCkKICAgICAgbGV0IGhyID0gcGFyc2VJbnQobXNlYyAvIDEwMDAgLyA2MCAvIDYwICUgMjQpCiAgICAgIGxldCBtaW4gPSBwYXJzZUludChtc2VjIC8gMTAwMCAvIDYwICUgNjApCiAgICAgIGxldCBzZWMgPSBwYXJzZUludChtc2VjIC8gMTAwMCAlIDYwKQogICAgICB0aGlzLmRheSA9IGRheQogICAgICB0aGlzLmhyID0gaHIgPiA5ID8gaHIgOiAnMCcgKyBocgogICAgICB0aGlzLm1pbiA9IG1pbiA+IDkgPyBtaW4gOiAnMCcgKyBtaW4KICAgICAgdGhpcy5zZWMgPSBzZWMgPiA5ID8gc2VjIDogJzAnICsgc2VjCiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzCiAgICAgIGlmIChtaW4gPj0gMCAmJiBzZWMgPj0gMCkgewogICAgICAgIC8v5YCS6K6h5pe257uT5p2f5YWz6Zet6K6i5Y2VCiAgICAgICAgaWYgKG1pbiA9PSAwICYmIHNlYyA9PSAwKSB7CiAgICAgICAgICB0aGlzLnN1YkV4KHRydWUpCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGF0LmNvdW50RG93bigpCiAgICAgICAgfSwgMTAwMCkKICAgICAgfQogICAgfSwKICAgIHNhdmUoZGF0YSkgewogICAgICByZXR1cm4gcmVxdWVzdCh7CiAgICAgICAgdXJsOiAnL2J1c2luZXNzL3RiUXVlc3Rpb24vc2F2ZUV4YW0nLAogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIGRhdGE6IGRhdGEKICAgICAgfSkKICAgIH0sCiAgICBnZXRFeGFtKHNlYXJjaE9iaikgewogICAgICByZXR1cm4gcmVxdWVzdCh7CiAgICAgICAgdXJsOiAnL2J1c2luZXNzL3RiUXVlc3Rpb24vbXlMaXN0JywKICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgIHBhcmFtczogc2VhcmNoT2JqCiAgICAgIH0pCiAgICB9LAogICAgc3ViRXgoYXV0bykgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgIHRoaXMuc2F2ZSh0aGlzLmZvcm0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gJzIwMCcpIHsKICAgICAgICAgIGlmKGF1dG8pewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+iAg+ivleaXtumXtOW3sui/h++8jOW3suiHquWKqOaPkOS6pO+8jOivt+WJjeW+gOaIkeeahOaIkOe7qeS4reafpeeci+aIkOe7qScpCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfogIPor5Xmj5DkuqTmiJDlip/vvIzor7fliY3lvoDmiJHnmoTmiJDnu6nkuK3mn6XnnIvmiJDnu6knKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgb25TdWJtaXQoKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruiupOaPkOS6pD8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5zdWJFeCgpCiAgICAgIH0pCiAgICB9CgogIH0KICAsCiAgbW91bnRlZCgpIHsKICAgIGNvbnN0IGVpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmV4YW1JZDsKICAgIHRoaXMuZXhhbVR5cGUgPSB0aGlzLiRyb3V0ZS5xdWVyeS50eXBlOwogICAgdGhpcy5mcm9tVHlwZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmZyb21UeXBlOwogICAgdGhpcy5mb3JtLnJlc3VsdElkID0gdGhpcy4kcm91dGUucXVlcnkucmVzdWx0SWQ7CiAgICB0aGlzLmZvcm0uZXhhbUlkID0gZWlkCiAgICBsZXQgcXVlcnlPYmogPSB7ZXhhbUlkOiBlaWQscmVzdWx0SWQ6dGhpcy5mb3JtLnJlc3VsdElkfQogICAgdGhpcy5nZXRFeGFtKHF1ZXJ5T2JqKS50aGVuKAogICAgICByZXNwb25zZSA9PiB7CiAgICAgICAgLy90aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3QKICAgICAgICB0aGlzLmZvcm0uc2lnTGlzdCA9IHJlc3BvbnNlLmRhdGEuc2lnTGlzdAogICAgICAgIHRoaXMuZm9ybS5tdWxMaXN0ID0gcmVzcG9uc2UuZGF0YS5tdWxMaXN0CiAgICAgICAgdGhpcy5mb3JtLnBkTGlzdCA9IHJlc3BvbnNlLmRhdGEucGRMaXN0CiAgICAgICAgdGhpcy5mb3JtLndkTGlzdCA9IHJlc3BvbnNlLmRhdGEud2RMaXN0CiAgICAgICAgLy8g5pWw5o2u5Yqg6L295bm257uR5a6a5oiQ5YqfCiAgICAgIH0KICAgICkKICAgIGlmKHRoaXMuZXhhbVR5cGU9PSc1MDAyJyl7CiAgICAgIHRoaXMuY291bnREb3duKCkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["exam.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"exam.vue","sourceRoot":"src/views/pages/business","sourcesContent":["<template>\n  <el-form ref=\"form\" :model=\"form\" size=\"small\" style=\"margin-left:30px;margin-right:500px\">\n    <div style=\"text-align: center;margin-top: 10px\"><span style=\"font-size: 25px;\"> {{\n        this.$route.query.examTitle\n      }}</span>\n      <span v-if=\"this.examType=='5002'\" style=\"color: red;margin-left: 10px\">剩余时间:{{hr}}小时 {{ min }}分钟 {{ sec }}秒 </span></div>\n    <div style=\"font-size: 20px;margin-bottom: 10px\" v-if=\"form.sigList.length>0\">(一) 单选题</div>\n    <el-form-item v-for=\"(item, index) in form.sigList\"\n                  :label=\"'('+(index+1)+')   '+item.content+':'\">\n      <br/>\n      <el-radio-group v-if=\"item.type=='4001'\" v-model=\"item.myCheck\">\n        <el-radio v-for=\"opitem in item.optionList\" :label=\"opitem.options\">{{opitem.options}}:{{ opitem.name }}</el-radio>\n      </el-radio-group>\n    </el-form-item>\n\n    <div style=\"font-size: 20px;margin-bottom: 10px\" v-if=\"form.mulList.length>0\">(二) 多选题</div>\n    <el-form-item v-for=\"(item, index) in form.mulList\"\n                  :label=\"'('+(index+1)+')   '+item.content+':'\">\n      <br/>\n      <el-checkbox-group  v-if=\"item.type==='4002'\" v-model=\"item.myCheckList\">\n        <el-checkbox  v-for=\"opitem in item.optionList\"\n                     :label=\"opitem.options\">{{opitem.options}}:{{ opitem.name }}</el-checkbox>\n      </el-checkbox-group>\n    </el-form-item>\n\n\n    <div style=\"font-size: 20px;margin-bottom: 10px\" v-if=\"form.pdList.length>0\">(三) 判断题</div>\n    <el-form-item v-for=\"(item, index) in form.pdList\"\n                  :label=\"'('+(index+1)+')   '+item.content+':'\">\n      <br/>\n      <el-radio-group v-if=\"item.type=='4003'\" v-model=\"item.myCheck\">\n        <el-radio v-for=\"opitem in item.optionList\" :label=\"opitem.options\">{{opitem.options}}:{{ opitem.name }}</el-radio>\n      </el-radio-group>\n    </el-form-item>\n\n    <div style=\"font-size: 20px;margin-bottom: 10px\" v-if=\"form.wdList.length>0\">(四) 问答题</div>\n    <el-form-item v-for=\"(item, index) in form.wdList\"\n                  :label=\"'('+(index+1)+')   '+item.content+':'\">\n      <el-input  v-if=\"item.type=='4004'\" style=\"width: 500px\"  v-model=\"item.myAnswer\"  />\n    </el-form-item>\n\n    <div style=\"margin-top: 20px\"/>\n    <el-button type=\"primary\" size=\"mini\" @click=\"onSubmit\" v-loading.fullscreen.lock=\"loading\">提交</el-button>\n    <el-button v-if=\"this.fromType==1\" @click=\"$router.push('/myExam')\" size=\"mini\" icon=\"el-icon-refresh-right\">返回</el-button>\n    <el-button v-else-if=\"this.fromType==2\" @click=\"$router.push('/myScore')\" size=\"mini\" icon=\"el-icon-refresh-right\">返回</el-button>\n  </el-form>\n</template>\n<script>\nimport request from '@/utils/request'\n\nexport default {\n  data() {\n    return {\n      loading: false,\n      form: {\n        sigList: [],\n        mulList: [],\n        pdList: [],\n        wdList: [],\n        examId: '',\n        resultId:'',\n        testList:[]\n      },\n      min: '',\n      sec: '',\n      examType:'',\n      fromType:''\n    }\n  },\n  methods: {\n    countDown() {\n      //const end = Date.parse(new Date('2023-10-02 13:30:00'))\n      const end = Date.parse(new Date(this.$route.query.endTime));\n      const now = Date.parse(new Date())\n      const msec = end - now\n      if (msec < 0) return;\n      let day = parseInt(msec / 1000 / 60 / 60 / 24)\n      let hr = parseInt(msec / 1000 / 60 / 60 % 24)\n      let min = parseInt(msec / 1000 / 60 % 60)\n      let sec = parseInt(msec / 1000 % 60)\n      this.day = day\n      this.hr = hr > 9 ? hr : '0' + hr\n      this.min = min > 9 ? min : '0' + min\n      this.sec = sec > 9 ? sec : '0' + sec\n      const that = this\n      if (min >= 0 && sec >= 0) {\n        //倒计时结束关闭订单\n        if (min == 0 && sec == 0) {\n          this.subEx(true)\n          return\n        }\n        setTimeout(function () {\n          that.countDown()\n        }, 1000)\n      }\n    },\n    save(data) {\n      return request({\n        url: '/business/tbQuestion/saveExam',\n        method: 'post',\n        data: data\n      })\n    },\n    getExam(searchObj) {\n      return request({\n        url: '/business/tbQuestion/myList',\n        method: 'get',\n        params: searchObj\n      })\n    },\n    subEx(auto) {\n      this.loading = true\n      this.save(this.form).then(response => {\n        this.loading = false\n        if (response.code == '200') {\n          if(auto){\n            this.$message.success('考试时间已过，已自动提交，请前往我的成绩中查看成绩')\n          }else{\n            this.$message.success('考试提交成功，请前往我的成绩中查看成绩')\n          }\n        }\n      }).catch(() => {\n        this.loading = false\n      })\n    },\n    onSubmit() {\n      this.$confirm('确认提交?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.subEx()\n      })\n    }\n\n  }\n  ,\n  mounted() {\n    const eid = this.$route.query.examId;\n    this.examType = this.$route.query.type;\n    this.fromType = this.$route.query.fromType;\n    this.form.resultId = this.$route.query.resultId;\n    this.form.examId = eid\n    let queryObj = {examId: eid,resultId:this.form.resultId}\n    this.getExam(queryObj).then(\n      response => {\n        //this.list = response.data.list\n        this.form.sigList = response.data.sigList\n        this.form.mulList = response.data.mulList\n        this.form.pdList = response.data.pdList\n        this.form.wdList = response.data.wdList\n        // 数据加载并绑定成功\n      }\n    )\n    if(this.examType=='5002'){\n      this.countDown()\n    }\n  }\n}\n</script>\n"]}]}