{"remainingRequest":"F:\\exam_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\exam_vue\\src\\views\\system\\sysUser\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\exam_vue\\src\\views\\system\\sysUser\\list.vue","mtime":1682846559844},{"path":"F:\\exam_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\exam_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\exam_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\exam_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnQC9hcGkvc3lzdGVtL3N5c1VzZXInCmltcG9ydCByb2xlQXBpIGZyb20gJ0AvYXBpL3N5c3RlbS9zeXNSb2xlJwppbXBvcnQgZGVwdEFwaSBmcm9tICdAL2FwaS9zeXN0ZW0vc3lzRGVwdCcKZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czp7CiAgICAgICAgLy/lr7zlhaXmoJHlvaLpgInmi6nnu4Tku7YKICAgICAgICBTZWxlY3REZXB0VHJlZTogKCkgPT4gaW1wb3J0KCdAL2NvbXBvbmVudHMvQ3VzdG9tL1RyZWVTZWxlY3QvVHJlZVNlbGVjdCcpCiAgICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0TG9hZGluZzogZmFsc2UsIC8vIOaVsOaNruaYr+WQpuato+WcqOWKoOi9vQogICAgICBsaXN0OiBudWxsLCAvLyDliJfooagKICAgICAgdG90YWw6IDAsIC8vIOaVsOaNruW6k+S4reeahOaAu+iusOW9leaVsAogICAgICBwYWdlOiAxLCAvLyDpu5jorqTpobXnoIEKICAgICAgbGltaXQ6IDMsIC8vIOavj+mhteiusOW9leaVsAogICAgICBzZWFyY2hPYmo6IHt9LCAvLyDmn6Xor6LooajljZXlr7nosaEKCiAgICAgIGNyZWF0ZVRpbWVzOiBbXSwKCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBzeXNVc2VyOiB7fSwKCiAgICAgIGRpYWxvZ1JvbGVWaXNpYmxlOiBmYWxzZSwKICAgICAgYWxsUm9sZXM6IFtdLCAvLyDmiYDmnInop5LoibLliJfooagKICAgICAgdXNlclJvbGVJZHM6IFtdLCAvLyDnlKjmiLfnmoTop5LoibJJROeahOWIl+ihqAogICAgICBpc0luZGV0ZXJtaW5hdGU6IGZhbHNlLCAvLyDmmK/lkKbmmK/kuI3noa7lrprnmoQKICAgICAgY2hlY2tBbGw6IGZhbHNlLCAvLyDmmK/lkKblhajpgIkKICAgICAgLy8vLy8vCiAgICAgIGRhdGFEZXB0VHJlZTpbXSAvL+agkeW9oumAieaLqeaVsOaNrgogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8v6LCD55So5YiX6KGo5pa55rOVCiAgICB0aGlzLmZldGNoRGF0YSgpCiAgfSwKICBtZXRob2RzOnsKICAgICAvL+Wbnuiwg+S/neWtmOmAieaLqeeahOmDqOmXqGlkCiAgICAgc2F2ZURlcHRJZCh0cmVlSWQsdHJlZU5hbWUpewogICAgICAgIGNvbnNvbGUubG9nKCflm57osIN0cmVlSWQ9Jyt0cmVlSWQpCiAgICAgICAgdGhpcy5zeXNVc2VyLmRlcHRJZCA9IHRyZWVJZAogICAgICAgICB0aGlzLnN5c1VzZXIuZGVwdE5hbWUgPSB0cmVlTmFtZQogICAgIH0sCgogLy/liJfooagKICAgIGZldGNoRGF0YShwYWdlPTEpIHsKICAgICAgdGhpcy5wYWdlID0gcGFnZQogICAgICBpZih0aGlzLmNyZWF0ZVRpbWVzICYmIHRoaXMuY3JlYXRlVGltZXMubGVuZ3RoPT0yKSB7CiAgICAgICAgdGhpcy5zZWFyY2hPYmouY3JlYXRlVGltZUJlZ2luID0gdGhpcy5jcmVhdGVUaW1lc1swXQogICAgICAgIHRoaXMuc2VhcmNoT2JqLmNyZWF0ZVRpbWVFbmQgPSB0aGlzLmNyZWF0ZVRpbWVzWzFdCiAgICAgIH0KCiAgICAgICAgLy/liqDovb3lvLnlh7rpgInmi6npg6jpl6jmlbDmja4KICAgICAgICBkZXB0QXBpLmZpbmRTZWxlY3ROb2RlcygpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXNwb25zZS5kYXRhPScrcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhRGVwdFRyZWUgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICAgICAgICB9KQoKICAgICAgYXBpLmdldFBhZ2VMaXN0KHRoaXMucGFnZSx0aGlzLmxpbWl0LHRoaXMuc2VhcmNoT2JqKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEucmVjb3JkcwogICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWwKICAgICAgICB9KQogICAgfSwKCiAgICAvL+WxleekuuWIhumFjeinkuiJsgogICAgc2hvd0Fzc2lnblJvbGUgKHJvdykgewogICAgICB0aGlzLnN5c1VzZXIgPSByb3cKICAgICAgdGhpcy5kaWFsb2dSb2xlVmlzaWJsZSA9IHRydWUKICAgICAgIHJvbGVBcGkuZ2V0Um9sZXNCeVVzZXJJZChyb3cuaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuYWxsUm9sZXMgPSByZXNwb25zZS5kYXRhLmFsbFJvbGVzCiAgICAgICAgY29uc29sZS5sb2codGhpcy5hbGxSb2xlcykKICAgICAgICB0aGlzLnVzZXJSb2xlSWRzID0gcmVzcG9uc2UuZGF0YS51c2VyUm9sZUlkcwogICAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlclJvbGVJZHMpCiAgICAgICAgdGhpcy5jaGVja0FsbCA9IHRoaXMudXNlclJvbGVJZHMubGVuZ3RoPT09dGhpcy5hbGxSb2xlcy5sZW5ndGgKICAgICAgICB0aGlzLmlzSW5kZXRlcm1pbmF0ZSA9IHRoaXMudXNlclJvbGVJZHMubGVuZ3RoPjAgJiYgdGhpcy51c2VyUm9sZUlkcy5sZW5ndGg8dGhpcy5hbGxSb2xlcy5sZW5ndGgKICAgICAgfSkKICAgIH0sCgogICAgLyoKICAgIOWFqOmAieWLvumAieeKtuaAgeWPkeeUn+aUueWPmOeahOebkeWQrAogICAgKi8KICAgIGhhbmRsZUNoZWNrQWxsQ2hhbmdlICh2YWx1ZSkgey8vIHZhbHVlIOW9k+WJjeWLvumAieeKtuaAgXRydWUvZmFsc2UKICAgICAgLy8g5aaC5p6c5b2T5YmN5YWo6YCJLCB1c2VyUm9sZUlkc+WwseaYr+aJgOacieinkuiJsmlk55qE5pWw57uELCDlkKbliJnmmK/nqbrmlbDnu4QKICAgICAgdGhpcy51c2VyUm9sZUlkcyA9IHZhbHVlID8gdGhpcy5hbGxSb2xlcy5tYXAoaXRlbSA9PiBpdGVtLmlkKSA6IFtdCiAgICAgIC8vIOWmguaenOW9k+WJjeS4jeaYr+WFqOmAieS5n+S4jeWFqOS4jemAieaXtiwg5oyH5a6a5Li6ZmFsc2UKICAgICAgdGhpcy5pc0luZGV0ZXJtaW5hdGUgPSBmYWxzZQogICAgfSwKCiAgICAvKgogICAg6KeS6Imy5YiX6KGo6YCJ5Lit6aG55Y+R55Sf5pS55Y+Y55qE55uR5ZCsCiAgICAqLwogICAgaGFuZGxlQ2hlY2tlZENoYW5nZSAodmFsdWUpIHsKICAgICAgY29uc3Qge3VzZXJSb2xlSWRzLCBhbGxSb2xlc30gPSB0aGlzCiAgICAgIHRoaXMuY2hlY2tBbGwgPSB1c2VyUm9sZUlkcy5sZW5ndGggPT09IGFsbFJvbGVzLmxlbmd0aCAmJiBhbGxSb2xlcy5sZW5ndGg+MAogICAgICB0aGlzLmlzSW5kZXRlcm1pbmF0ZSA9IHVzZXJSb2xlSWRzLmxlbmd0aD4wICYmIHVzZXJSb2xlSWRzLmxlbmd0aDxhbGxSb2xlcy5sZW5ndGgKICAgIH0sCgogICAgLy/liIbphY3op5LoibIKICAgIGFzc2lnblJvbGUgKCkgewogICAgICBsZXQgYXNzZ2luUm9sZVZvID0gewogICAgICAgIHVzZXJJZDogdGhpcy5zeXNVc2VyLmlkLAogICAgICAgIHJvbGVJZExpc3Q6IHRoaXMudXNlclJvbGVJZHMKICAgICAgfQogICAgICByb2xlQXBpLmFzc2lnblJvbGVzKGFzc2dpblJvbGVWbykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlc3BvbnNlLm1lc3NhZ2UgfHwgJ+WIhumFjeinkuiJsuaIkOWKnycpCiAgICAgICAgdGhpcy5kaWFsb2dSb2xlVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgdGhpcy5mZXRjaERhdGEodGhpcy5wYWdlKQogICAgICB9KQogICAgfSwKICAgIC8v5pu05pS555So5oi354q25oCBCiAgICBzd2l0Y2hTdGF0dXMocm93KSB7CiAgICAgIC8v5Yik5pat77yM5aaC5p6c5b2T5YmN55So5oi35Y+v55So77yM5L+u5pS556aB55SoCiAgICAgIHJvdy5zdGF0dXMgPSByb3cuc3RhdHVzID09PSAxID8gMCA6IDEKICAgICAgYXBpLnVwZGF0ZVN0YXR1cyhyb3cuaWQscm93LnN0YXR1cykKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzcG9uc2UubWVzc2FnZSB8fCAn5pON5L2c5oiQ5YqfJykKICAgICAgICAgIHRoaXMuZmV0Y2hEYXRhKCkKICAgICAgICB9KQogICAgfSwKICAgIC8v5Yig6ZmkCiAgICByZW1vdmVEYXRhQnlJZChpZCkgewogICAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeeUqOaItywg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgLy/osIPnlKjmlrnms5XliKDpmaQKICAgICAgICAgIGFwaS5yZW1vdmVCeUlkKGlkKQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgLy/mj5DnpLoKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIC8v5Yi35pawCiAgICAgICAgICAgICAgdGhpcy5mZXRjaERhdGEoKQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgfSwKICAgIC8v5qC55o2uaWTmn6Xor6LvvIzmlbDmja7lm57mmL4KICAgIGVkaXQoaWQpIHsKICAgICAgLy/lvLnlh7rmoYYKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICAvL+iwg+eUqOaOpeWPo+afpeivogogICAgICBhcGkuZ2V0VXNlcklkKGlkKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuc3lzVXNlciA9IHJlc3BvbnNlLmRhdGEKICAgICAgICB9KQogICAgfSwKICAgIC8v5re75Yqg5oiW6ICF5L+u5pS55pa55rOVCiAgICBzYXZlT3JVcGRhdGUoKSB7CiAgICAgIGlmKCF0aGlzLnN5c1VzZXIuaWQpIHsKICAgICAgICB0aGlzLnNhdmUoKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXBkYXRlKCkKICAgICAgfQogICAgfSwKICAgIC8v5L+u5pS5CiAgICB1cGRhdGUoKSB7CiAgICAgIGFwaS51cGRhdGUodGhpcy5zeXNVc2VyKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIC8v5o+Q56S6CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aTjeS9nOaIkOWKnycpCiAgICAgICAgICAvL+WFs+mXreW8ueahhgogICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICAgIC8v5Yi35pawCiAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICAgICAgfSkKICAgIH0sCiAgICAvL+a3u+WKoAogICAgc2F2ZSgpIHsKICAgICAgYXBpLnNhdmUodGhpcy5zeXNVc2VyKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIC8v5o+Q56S6CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aTjeS9nOaIkOWKnycpCiAgICAgICAgICAvL+WFs+mXreW8ueahhgogICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICAgIC8v5Yi35pawCiAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICAgICAgfSkKICAgIH0sCiAgICAvL+a3u+WKoOW8ueahhueahOaWueazlQogICAgYWRkKCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuc3lzVXNlciA9IHt9CiAgICB9LAogICAgLy8g6YeN572u5p+l6K+i6KGo5Y2VCiAgICByZXNldERhdGEoKSB7CiAgICAgIGNvbnNvbGUubG9nKCfph43nva7mn6Xor6LooajljZUnKQogICAgICB0aGlzLnNlYXJjaE9iaiA9IHt9CiAgICAgIHRoaXMuY3JlYXRlVGltZXMgPSBbXQogICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICB9CgogIH0KfQo="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"list.vue","sourceRoot":"src/views/system/sysUser","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"search-div\">\n      <el-form label-width=\"70px\" size=\"small\">\n        <el-row>\n          <el-col :span=\"8\">\n            <el-form-item label=\"关 键 字\">\n              <el-input style=\"width: 95%\" v-model=\"searchObj.keyword\" placeholder=\"用户名/姓名/手机号码\"></el-input>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"8\">\n            <el-form-item label=\"操作时间\">\n              <el-date-picker\n                v-model=\"createTimes\"\n                type=\"datetimerange\"\n                range-separator=\"至\"\n                start-placeholder=\"开始时间\"\n                end-placeholder=\"结束时间\"\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\n                style=\"margin-right: 10px;width: 100%;\"\n              />\n            </el-form-item>\n          </el-col>\n        </el-row>\n        <el-row style=\"display:flex\">\n          <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\"  @click=\"fetchData()\">搜索</el-button>\n          <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetData\">重置</el-button>\n        </el-row>\n      </el-form>\n    </div>\n\n    <!-- 工具条 -->\n    <div class=\"tools-div\">\n      <el-button type=\"success\" :disabled=\"$hasBP('bnt.sysUser.add')  === false\" icon=\"el-icon-plus\" size=\"mini\" @click=\"add\">添 加</el-button>\n    </div>\n\n\t<!-- 列表 -->\n    <el-table\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      stripe\n      border\n      style=\"width: 100%;margin-top: 10px;\">\n\n      <el-table-column\n        label=\"序号\"\n        width=\"70\"\n        align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ (page - 1) * limit + scope.$index + 1 }}\n        </template>\n      </el-table-column>\n\n      <el-table-column prop=\"username\" label=\"用户名\" width=\"180\"/>\n      <el-table-column prop=\"name\" label=\"姓名\" width=\"110\"/>\n      <el-table-column prop=\"phone\" label=\"手机\" />\n      <el-table-column prop=\"deptName\" label=\"所属部门\" />\n      <el-table-column label=\"状态\" width=\"80\">\n        <template slot-scope=\"scope\">\n          <el-switch\n            v-model=\"scope.row.status===1\"\n            @change=\"switchStatus(scope.row)\">\n          </el-switch>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"createTime\" label=\"创建时间\" />\n\n      <el-table-column label=\"操作\"  align=\"center\" fixed=\"right\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"primary\" :disabled=\"$hasBP('bnt.sysUser.update')  === false\" icon=\"el-icon-edit\" size=\"mini\" @click=\"edit(scope.row.id)\" title=\"修改\"/>\n          <el-button type=\"danger\" :disabled=\"$hasBP('bnt.sysUser.remove')  === false\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeDataById(scope.row.id)\" title=\"删除\" />\n           <el-button type=\"warning\" :disabled=\"$hasBP('bnt.sysUser.update')  === false\" icon=\"el-icon-baseball\" size=\"mini\" @click=\"showAssignRole(scope.row)\" title=\"分配角色\"/>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页组件 -->\n    <el-pagination\n      :current-page=\"page\"\n      :total=\"total\"\n      :page-size=\"limit\"\n      style=\"padding: 30px 0; text-align: center;\"\n      layout=\"total, prev, pager, next, jumper\"\n      @current-change=\"fetchData\"\n    />\n\n    <el-dialog title=\"分配角色\" :visible.sync=\"dialogRoleVisible\">\n      <el-form label-width=\"80px\">\n        <el-form-item label=\"用户名\">\n          <el-input disabled :value=\"sysUser.username\"></el-input>\n        </el-form-item>\n\n\n\n        <el-form-item label=\"角色列表\">\n          <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>\n          <div style=\"margin: 15px 0;\"></div>\n          <el-checkbox-group v-model=\"userRoleIds\" @change=\"handleCheckedChange\">\n            <el-checkbox v-for=\"role in allRoles\" :key=\"role.id\" :label=\"role.id\">{{role.roleName}}</el-checkbox>\n          </el-checkbox-group>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button type=\"primary\" @click=\"assignRole\" size=\"small\">保存</el-button>\n        <el-button @click=\"dialogRoleVisible = false\" size=\"small\">取消</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog title=\"添加/修改\" :visible.sync=\"dialogVisible\" width=\"40%\" >\n      <el-form ref=\"dataForm\" :model=\"sysUser\"  label-width=\"100px\" size=\"small\" style=\"padding-right: 40px;\">\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"sysUser.username\"/>\n        </el-form-item>\n        <el-form-item v-if=\"!sysUser.id\" label=\"密码\" prop=\"password\">\n          <el-input v-model=\"sysUser.password\" type=\"password\"/>\n        </el-form-item>\n        <el-form-item label=\"姓名\" prop=\"name\">\n          <el-input v-model=\"sysUser.name\"/>\n        </el-form-item>\n        <el-form-item label=\"手机\" prop=\"phone\">\n          <el-input v-model=\"sysUser.phone\"/>\n        </el-form-item>\n\n        <el-form-item label=\"所属部门\">\n           <select-dept-tree @saveTreeId=\"saveDeptId\" treeTitle=\"选择部门\" :dataTree=\"dataDeptTree\" :treeVal=\"sysUser.deptName\"></select-dept-tree>\n        </el-form-item>\n\n\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\" size=\"small\" icon=\"el-icon-refresh-right\">取 消</el-button>\n        <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"saveOrUpdate()\" size=\"small\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n  </div>\n</template>\n<script>\nimport api from '@/api/system/sysUser'\nimport roleApi from '@/api/system/sysRole'\nimport deptApi from '@/api/system/sysDept'\nexport default {\n    components:{\n        //导入树形选择组件\n        SelectDeptTree: () => import('@/components/Custom/TreeSelect/TreeSelect')\n    },\n  data() {\n    return {\n      listLoading: false, // 数据是否正在加载\n      list: null, // 列表\n      total: 0, // 数据库中的总记录数\n      page: 1, // 默认页码\n      limit: 3, // 每页记录数\n      searchObj: {}, // 查询表单对象\n\n      createTimes: [],\n\n      dialogVisible: false,\n      sysUser: {},\n\n      dialogRoleVisible: false,\n      allRoles: [], // 所有角色列表\n      userRoleIds: [], // 用户的角色ID的列表\n      isIndeterminate: false, // 是否是不确定的\n      checkAll: false, // 是否全选\n      //////\n      dataDeptTree:[] //树形选择数据\n    }\n  },\n  created() {\n    //调用列表方法\n    this.fetchData()\n  },\n  methods:{\n     //回调保存选择的部门id\n     saveDeptId(treeId,treeName){\n        console.log('回调treeId='+treeId)\n        this.sysUser.deptId = treeId\n         this.sysUser.deptName = treeName\n     },\n\n //列表\n    fetchData(page=1) {\n      this.page = page\n      if(this.createTimes && this.createTimes.length==2) {\n        this.searchObj.createTimeBegin = this.createTimes[0]\n        this.searchObj.createTimeEnd = this.createTimes[1]\n      }\n\n        //加载弹出选择部门数据\n        deptApi.findSelectNodes().then(response => {\n                    console.log('response.data='+response.data);\n                    this.dataDeptTree = response.data\n                })\n\n      api.getPageList(this.page,this.limit,this.searchObj)\n        .then(response => {\n          this.list = response.data.records\n          this.total = response.data.total\n        })\n    },\n\n    //展示分配角色\n    showAssignRole (row) {\n      this.sysUser = row\n      this.dialogRoleVisible = true\n       roleApi.getRolesByUserId(row.id).then(response => {\n        this.allRoles = response.data.allRoles\n        console.log(this.allRoles)\n        this.userRoleIds = response.data.userRoleIds\n        console.log(this.userRoleIds)\n        this.checkAll = this.userRoleIds.length===this.allRoles.length\n        this.isIndeterminate = this.userRoleIds.length>0 && this.userRoleIds.length<this.allRoles.length\n      })\n    },\n\n    /*\n    全选勾选状态发生改变的监听\n    */\n    handleCheckAllChange (value) {// value 当前勾选状态true/false\n      // 如果当前全选, userRoleIds就是所有角色id的数组, 否则是空数组\n      this.userRoleIds = value ? this.allRoles.map(item => item.id) : []\n      // 如果当前不是全选也不全不选时, 指定为false\n      this.isIndeterminate = false\n    },\n\n    /*\n    角色列表选中项发生改变的监听\n    */\n    handleCheckedChange (value) {\n      const {userRoleIds, allRoles} = this\n      this.checkAll = userRoleIds.length === allRoles.length && allRoles.length>0\n      this.isIndeterminate = userRoleIds.length>0 && userRoleIds.length<allRoles.length\n    },\n\n    //分配角色\n    assignRole () {\n      let assginRoleVo = {\n        userId: this.sysUser.id,\n        roleIdList: this.userRoleIds\n      }\n      roleApi.assignRoles(assginRoleVo).then(response => {\n        this.$message.success(response.message || '分配角色成功')\n        this.dialogRoleVisible = false\n        this.fetchData(this.page)\n      })\n    },\n    //更改用户状态\n    switchStatus(row) {\n      //判断，如果当前用户可用，修改禁用\n      row.status = row.status === 1 ? 0 : 1\n      api.updateStatus(row.id,row.status)\n        .then(response => {\n          this.$message.success(response.message || '操作成功')\n          this.fetchData()\n        })\n    },\n    //删除\n    removeDataById(id) {\n        this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          //调用方法删除\n          api.removeById(id)\n            .then(response => {\n              //提示\n              this.$message({\n                type: 'success',\n                message: '删除成功!'\n              });\n              //刷新\n              this.fetchData()\n          })\n        })\n    },\n    //根据id查询，数据回显\n    edit(id) {\n      //弹出框\n      this.dialogVisible = true\n      //调用接口查询\n      api.getUserId(id)\n        .then(response => {\n          this.sysUser = response.data\n        })\n    },\n    //添加或者修改方法\n    saveOrUpdate() {\n      if(!this.sysUser.id) {\n        this.save()\n      } else {\n        this.update()\n      }\n    },\n    //修改\n    update() {\n      api.update(this.sysUser)\n        .then(response => {\n          //提示\n          this.$message.success('操作成功')\n          //关闭弹框\n          this.dialogVisible = false\n          //刷新\n          this.fetchData()\n        })\n    },\n    //添加\n    save() {\n      api.save(this.sysUser)\n        .then(response => {\n          //提示\n          this.$message.success('操作成功')\n          //关闭弹框\n          this.dialogVisible = false\n          //刷新\n          this.fetchData()\n        })\n    },\n    //添加弹框的方法\n    add() {\n      this.dialogVisible = true\n      this.sysUser = {}\n    },\n    // 重置查询表单\n    resetData() {\n      console.log('重置查询表单')\n      this.searchObj = {}\n      this.createTimes = []\n      this.fetchData()\n    }\n\n  }\n}\n</script>\n"]}]}
