{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\sys_manage\\code\\guigu-system-front\\system-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\sys_manage\\code\\guigu-system-front\\system-front\\src\\views\\system\\sysUser\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\sys_manage\\code\\guigu-system-front\\system-front\\src\\views\\system\\sysUser\\list.vue","mtime":1665282231466},{"path":"C:\\Users\\Administrator\\Desktop\\sys_manage\\code\\guigu-system-front\\system-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\sys_manage\\code\\guigu-system-front\\system-front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\sys_manage\\code\\guigu-system-front\\system-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\sys_manage\\code\\guigu-system-front\\system-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXBpIGZyb20gJ0AvYXBpL3N5c3RlbS91c2VyJw0KaW1wb3J0IHJvbGVBcGkgZnJvbSAnQC9hcGkvc3lzdGVtL3JvbGUnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbGlzdExvYWRpbmc6IGZhbHNlLCAvLyDmlbDmja7mmK/lkKbmraPlnKjliqDovb0NCiAgICAgIGxpc3Q6IG51bGwsIC8vIOWIl+ihqA0KICAgICAgdG90YWw6IDAsIC8vIOaVsOaNruW6k+S4reeahOaAu+iusOW9leaVsA0KICAgICAgcGFnZTogMSwgLy8g6buY6K6k6aG156CBDQogICAgICBsaW1pdDogMywgLy8g5q+P6aG16K6w5b2V5pWwDQogICAgICBzZWFyY2hPYmo6IHt9LCAvLyDmn6Xor6LooajljZXlr7nosaENCg0KICAgICAgY3JlYXRlVGltZXM6IFtdLA0KDQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIHN5c1VzZXI6IHt9LA0KDQogICAgICBkaWFsb2dSb2xlVmlzaWJsZTogZmFsc2UsDQogICAgICBhbGxSb2xlczogW10sIC8vIOaJgOacieinkuiJsuWIl+ihqA0KICAgICAgdXNlclJvbGVJZHM6IFtdLCAvLyDnlKjmiLfnmoTop5LoibJJROeahOWIl+ihqA0KICAgICAgaXNJbmRldGVybWluYXRlOiBmYWxzZSwgLy8g5piv5ZCm5piv5LiN56Gu5a6a55qEDQogICAgICBjaGVja0FsbDogZmFsc2UgLy8g5piv5ZCm5YWo6YCJDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8v6LCD55So5YiX6KGo5pa55rOVDQogICAgdGhpcy5mZXRjaERhdGEoKQ0KICB9LA0KICBtZXRob2RzOnsNCiAgICAvL+WxleekuuWIhumFjeinkuiJsg0KICAgIHNob3dBc3NpZ25Sb2xlIChyb3cpIHsNCiAgICAgIHRoaXMuc3lzVXNlciA9IHJvdw0KICAgICAgdGhpcy5kaWFsb2dSb2xlVmlzaWJsZSA9IHRydWUNCiAgICAgICByb2xlQXBpLmdldFJvbGVzQnlVc2VySWQocm93LmlkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5hbGxSb2xlcyA9IHJlc3BvbnNlLmRhdGEuYWxsUm9sZXMNCiAgICAgICAgY29uc29sZS5sb2codGhpcy5hbGxSb2xlcykNCiAgICAgICAgdGhpcy51c2VyUm9sZUlkcyA9IHJlc3BvbnNlLmRhdGEudXNlclJvbGVJZHMNCiAgICAgICAgY29uc29sZS5sb2codGhpcy51c2VyUm9sZUlkcykNCiAgICAgICAgdGhpcy5jaGVja0FsbCA9IHRoaXMudXNlclJvbGVJZHMubGVuZ3RoPT09dGhpcy5hbGxSb2xlcy5sZW5ndGgNCiAgICAgICAgdGhpcy5pc0luZGV0ZXJtaW5hdGUgPSB0aGlzLnVzZXJSb2xlSWRzLmxlbmd0aD4wICYmIHRoaXMudXNlclJvbGVJZHMubGVuZ3RoPHRoaXMuYWxsUm9sZXMubGVuZ3RoDQogICAgICB9KQ0KICAgIH0sDQoNCiAgICAvKg0KICAgIOWFqOmAieWLvumAieeKtuaAgeWPkeeUn+aUueWPmOeahOebkeWQrA0KICAgICovDQogICAgaGFuZGxlQ2hlY2tBbGxDaGFuZ2UgKHZhbHVlKSB7Ly8gdmFsdWUg5b2T5YmN5Yu+6YCJ54q25oCBdHJ1ZS9mYWxzZQ0KICAgICAgLy8g5aaC5p6c5b2T5YmN5YWo6YCJLCB1c2VyUm9sZUlkc+WwseaYr+aJgOacieinkuiJsmlk55qE5pWw57uELCDlkKbliJnmmK/nqbrmlbDnu4QNCiAgICAgIHRoaXMudXNlclJvbGVJZHMgPSB2YWx1ZSA/IHRoaXMuYWxsUm9sZXMubWFwKGl0ZW0gPT4gaXRlbS5pZCkgOiBbXQ0KICAgICAgLy8g5aaC5p6c5b2T5YmN5LiN5piv5YWo6YCJ5Lmf5LiN5YWo5LiN6YCJ5pe2LCDmjIflrprkuLpmYWxzZQ0KICAgICAgdGhpcy5pc0luZGV0ZXJtaW5hdGUgPSBmYWxzZQ0KICAgIH0sDQoNCiAgICAvKg0KICAgIOinkuiJsuWIl+ihqOmAieS4remhueWPkeeUn+aUueWPmOeahOebkeWQrA0KICAgICovDQogICAgaGFuZGxlQ2hlY2tlZENoYW5nZSAodmFsdWUpIHsNCiAgICAgIGNvbnN0IHt1c2VyUm9sZUlkcywgYWxsUm9sZXN9ID0gdGhpcw0KICAgICAgdGhpcy5jaGVja0FsbCA9IHVzZXJSb2xlSWRzLmxlbmd0aCA9PT0gYWxsUm9sZXMubGVuZ3RoICYmIGFsbFJvbGVzLmxlbmd0aD4wDQogICAgICB0aGlzLmlzSW5kZXRlcm1pbmF0ZSA9IHVzZXJSb2xlSWRzLmxlbmd0aD4wICYmIHVzZXJSb2xlSWRzLmxlbmd0aDxhbGxSb2xlcy5sZW5ndGgNCiAgICB9LA0KDQogICAgLy/liIbphY3op5LoibINCiAgICBhc3NpZ25Sb2xlICgpIHsNCiAgICAgIGxldCBhc3NnaW5Sb2xlVm8gPSB7DQogICAgICAgIHVzZXJJZDogdGhpcy5zeXNVc2VyLmlkLA0KICAgICAgICByb2xlSWRMaXN0OiB0aGlzLnVzZXJSb2xlSWRzDQogICAgICB9DQogICAgICByb2xlQXBpLmFzc2lnblJvbGVzKGFzc2dpblJvbGVWbykudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXNwb25zZS5tZXNzYWdlIHx8ICfliIbphY3op5LoibLmiJDlip8nKQ0KICAgICAgICB0aGlzLmRpYWxvZ1JvbGVWaXNpYmxlID0gZmFsc2UNCiAgICAgICAgdGhpcy5mZXRjaERhdGEodGhpcy5wYWdlKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8v5pu05pS555So5oi354q25oCBDQogICAgc3dpdGNoU3RhdHVzKHJvdykgew0KICAgICAgLy/liKTmlq3vvIzlpoLmnpzlvZPliY3nlKjmiLflj6/nlKjvvIzkv67mlLnnpoHnlKgNCiAgICAgIHJvdy5zdGF0dXMgPSByb3cuc3RhdHVzID09PSAxID8gMCA6IDENCiAgICAgIGFwaS51cGRhdGVTdGF0dXMocm93LmlkLHJvdy5zdGF0dXMpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzcG9uc2UubWVzc2FnZSB8fCAn5pON5L2c5oiQ5YqfJykNCiAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpDQogICAgICAgIH0pDQogICAgfSwNCiAgICAvL+WIoOmZpA0KICAgIHJlbW92ZURhdGFCeUlkKGlkKSB7DQogICAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeeUqOaItywg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7DQogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAvL+iwg+eUqOaWueazleWIoOmZpA0KICAgICAgICAgIGFwaS5yZW1vdmVCeUlkKGlkKQ0KICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAvL+aPkOekug0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAvL+WIt+aWsA0KICAgICAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpDQogICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIC8v5qC55o2uaWTmn6Xor6LvvIzmlbDmja7lm57mmL4NCiAgICBlZGl0KGlkKSB7DQogICAgICAvL+W8ueWHuuahhg0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQ0KICAgICAgLy/osIPnlKjmjqXlj6Pmn6Xor6INCiAgICAgIGFwaS5nZXRVc2VySWQoaWQpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLnN5c1VzZXIgPSByZXNwb25zZS5kYXRhDQogICAgICAgIH0pDQogICAgfSwNCiAgICAvL+a3u+WKoOaIluiAheS/ruaUueaWueazlQ0KICAgIHNhdmVPclVwZGF0ZSgpIHsNCiAgICAgIGlmKCF0aGlzLnN5c1VzZXIuaWQpIHsNCiAgICAgICAgdGhpcy5zYXZlKCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMudXBkYXRlKCkNCiAgICAgIH0NCiAgICB9LA0KICAgIC8v5L+u5pS5DQogICAgdXBkYXRlKCkgew0KICAgICAgYXBpLnVwZGF0ZSh0aGlzLnN5c1VzZXIpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAvL+aPkOekug0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5pON5L2c5oiQ5YqfJykNCiAgICAgICAgICAvL+WFs+mXreW8ueahhg0KICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgLy/liLfmlrANCiAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpDQogICAgICAgIH0pDQogICAgfSwNCiAgICAvL+a3u+WKoA0KICAgIHNhdmUoKSB7DQogICAgICBhcGkuc2F2ZSh0aGlzLnN5c1VzZXIpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAvL+aPkOekug0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5pON5L2c5oiQ5YqfJykNCiAgICAgICAgICAvL+WFs+mXreW8ueahhg0KICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgLy/liLfmlrANCiAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpDQogICAgICAgIH0pDQogICAgfSwNCiAgICAvL+a3u+WKoOW8ueahhueahOaWueazlQ0KICAgIGFkZCgpIHsNCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICAgIHRoaXMuc3lzVXNlciA9IHt9DQogICAgfSwNCiAgICAvLyDph43nva7mn6Xor6LooajljZUNCiAgICByZXNldERhdGEoKSB7DQogICAgICBjb25zb2xlLmxvZygn6YeN572u5p+l6K+i6KGo5Y2VJykNCiAgICAgIHRoaXMuc2VhcmNoT2JqID0ge30NCiAgICAgIHRoaXMuY3JlYXRlVGltZXMgPSBbXQ0KICAgICAgdGhpcy5mZXRjaERhdGEoKQ0KICAgIH0sDQogICAgLy/liJfooagNCiAgICBmZXRjaERhdGEocGFnZT0xKSB7DQogICAgICB0aGlzLnBhZ2UgPSBwYWdlDQogICAgICBpZih0aGlzLmNyZWF0ZVRpbWVzICYmIHRoaXMuY3JlYXRlVGltZXMubGVuZ3RoPT0yKSB7DQogICAgICAgIHRoaXMuc2VhcmNoT2JqLmNyZWF0ZVRpbWVCZWdpbiA9IHRoaXMuY3JlYXRlVGltZXNbMF0NCiAgICAgICAgdGhpcy5zZWFyY2hPYmouY3JlYXRlVGltZUVuZCA9IHRoaXMuY3JlYXRlVGltZXNbMV0NCiAgICAgIH0NCiAgICAgIGFwaS5nZXRQYWdlTGlzdCh0aGlzLnBhZ2UsdGhpcy5saW1pdCx0aGlzLnNlYXJjaE9iaikNCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEucmVjb3Jkcw0KICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsDQogICAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/system/sysUser","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <div class=\"search-div\">\r\n      <el-form label-width=\"70px\" size=\"small\">\r\n        <el-row>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"关 键 字\">\r\n              <el-input style=\"width: 95%\" v-model=\"searchObj.keyword\" placeholder=\"用户名/姓名/手机号码\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-form-item label=\"操作时间\">\r\n              <el-date-picker\r\n                v-model=\"createTimes\"\r\n                type=\"datetimerange\"\r\n                range-separator=\"至\"\r\n                start-placeholder=\"开始时间\"\r\n                end-placeholder=\"结束时间\"\r\n                value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n                style=\"margin-right: 10px;width: 100%;\"\r\n              />\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row style=\"display:flex\">\r\n          <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\"  @click=\"fetchData()\">搜索</el-button>\r\n          <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetData\">重置</el-button>\r\n        </el-row>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 工具条 -->\r\n    <div class=\"tools-div\">\r\n      <el-button type=\"success\" :disabled=\"$hasBP('bnt.sysUser.add')  === false\" icon=\"el-icon-plus\" size=\"mini\" @click=\"add\">添 加</el-button>\r\n    </div>\r\n\r\n\t<!-- 列表 -->\r\n    <el-table\r\n      v-loading=\"listLoading\"\r\n      :data=\"list\"\r\n      stripe\r\n      border\r\n      style=\"width: 100%;margin-top: 10px;\">\r\n\r\n      <el-table-column\r\n        label=\"序号\"\r\n        width=\"70\"\r\n        align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          {{ (page - 1) * limit + scope.$index + 1 }}\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column prop=\"username\" label=\"用户名\" width=\"180\"/>\r\n      <el-table-column prop=\"name\" label=\"姓名\" width=\"110\"/>\r\n      <el-table-column prop=\"phone\" label=\"手机\" />\r\n      <el-table-column label=\"状态\" width=\"80\">\r\n        <template slot-scope=\"scope\">\r\n          <el-switch\r\n            v-model=\"scope.row.status===1\"\r\n            @change=\"switchStatus(scope.row)\">\r\n          </el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"createTime\" label=\"创建时间\" />\r\n\r\n      <el-table-column label=\"操作\"  align=\"center\" fixed=\"right\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"edit(scope.row.id)\" title=\"修改\"/>\r\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeDataById(scope.row.id)\" title=\"删除\" />\r\n           <el-button type=\"warning\" icon=\"el-icon-baseball\" size=\"mini\" @click=\"showAssignRole(scope.row)\" title=\"分配角色\"/>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页组件 -->\r\n    <el-pagination\r\n      :current-page=\"page\"\r\n      :total=\"total\"\r\n      :page-size=\"limit\"\r\n      style=\"padding: 30px 0; text-align: center;\"\r\n      layout=\"total, prev, pager, next, jumper\"\r\n      @current-change=\"fetchData\"\r\n    />\r\n\r\n    <el-dialog title=\"分配角色\" :visible.sync=\"dialogRoleVisible\">\r\n      <el-form label-width=\"80px\">\r\n        <el-form-item label=\"用户名\">\r\n          <el-input disabled :value=\"sysUser.username\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"角色列表\">\r\n          <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>\r\n          <div style=\"margin: 15px 0;\"></div>\r\n          <el-checkbox-group v-model=\"userRoleIds\" @change=\"handleCheckedChange\">\r\n            <el-checkbox v-for=\"role in allRoles\" :key=\"role.id\" :label=\"role.id\">{{role.roleName}}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button type=\"primary\" @click=\"assignRole\" size=\"small\">保存</el-button>\r\n        <el-button @click=\"dialogRoleVisible = false\" size=\"small\">取消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"添加/修改\" :visible.sync=\"dialogVisible\" width=\"40%\" >\r\n      <el-form ref=\"dataForm\" :model=\"sysUser\"  label-width=\"100px\" size=\"small\" style=\"padding-right: 40px;\">\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"sysUser.username\"/>\r\n        </el-form-item>\r\n        <el-form-item v-if=\"!sysUser.id\" label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"sysUser.password\" type=\"password\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"姓名\" prop=\"name\">\r\n          <el-input v-model=\"sysUser.name\"/>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"phone\">\r\n          <el-input v-model=\"sysUser.phone\"/>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\" size=\"small\" icon=\"el-icon-refresh-right\">取 消</el-button>\r\n        <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"saveOrUpdate()\" size=\"small\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport api from '@/api/system/user'\r\nimport roleApi from '@/api/system/role'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      listLoading: false, // 数据是否正在加载\r\n      list: null, // 列表\r\n      total: 0, // 数据库中的总记录数\r\n      page: 1, // 默认页码\r\n      limit: 3, // 每页记录数\r\n      searchObj: {}, // 查询表单对象\r\n\r\n      createTimes: [],\r\n\r\n      dialogVisible: false,\r\n      sysUser: {},\r\n\r\n      dialogRoleVisible: false,\r\n      allRoles: [], // 所有角色列表\r\n      userRoleIds: [], // 用户的角色ID的列表\r\n      isIndeterminate: false, // 是否是不确定的\r\n      checkAll: false // 是否全选\r\n    }\r\n  },\r\n  created() {\r\n    //调用列表方法\r\n    this.fetchData()\r\n  },\r\n  methods:{\r\n    //展示分配角色\r\n    showAssignRole (row) {\r\n      this.sysUser = row\r\n      this.dialogRoleVisible = true\r\n       roleApi.getRolesByUserId(row.id).then(response => {\r\n        this.allRoles = response.data.allRoles\r\n        console.log(this.allRoles)\r\n        this.userRoleIds = response.data.userRoleIds\r\n        console.log(this.userRoleIds)\r\n        this.checkAll = this.userRoleIds.length===this.allRoles.length\r\n        this.isIndeterminate = this.userRoleIds.length>0 && this.userRoleIds.length<this.allRoles.length\r\n      })\r\n    },\r\n\r\n    /*\r\n    全选勾选状态发生改变的监听\r\n    */\r\n    handleCheckAllChange (value) {// value 当前勾选状态true/false\r\n      // 如果当前全选, userRoleIds就是所有角色id的数组, 否则是空数组\r\n      this.userRoleIds = value ? this.allRoles.map(item => item.id) : []\r\n      // 如果当前不是全选也不全不选时, 指定为false\r\n      this.isIndeterminate = false\r\n    },\r\n\r\n    /*\r\n    角色列表选中项发生改变的监听\r\n    */\r\n    handleCheckedChange (value) {\r\n      const {userRoleIds, allRoles} = this\r\n      this.checkAll = userRoleIds.length === allRoles.length && allRoles.length>0\r\n      this.isIndeterminate = userRoleIds.length>0 && userRoleIds.length<allRoles.length\r\n    },\r\n\r\n    //分配角色\r\n    assignRole () {\r\n      let assginRoleVo = {\r\n        userId: this.sysUser.id,\r\n        roleIdList: this.userRoleIds\r\n      }\r\n      roleApi.assignRoles(assginRoleVo).then(response => {\r\n        this.$message.success(response.message || '分配角色成功')\r\n        this.dialogRoleVisible = false\r\n        this.fetchData(this.page)\r\n      })\r\n    },\r\n    //更改用户状态\r\n    switchStatus(row) {\r\n      //判断，如果当前用户可用，修改禁用\r\n      row.status = row.status === 1 ? 0 : 1\r\n      api.updateStatus(row.id,row.status)\r\n        .then(response => {\r\n          this.$message.success(response.message || '操作成功')\r\n          this.fetchData()\r\n        })\r\n    },\r\n    //删除\r\n    removeDataById(id) {\r\n        this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          //调用方法删除\r\n          api.removeById(id)\r\n            .then(response => {\r\n              //提示\r\n              this.$message({\r\n                type: 'success',\r\n                message: '删除成功!'\r\n              });\r\n              //刷新\r\n              this.fetchData()\r\n          })\r\n        })\r\n    },\r\n    //根据id查询，数据回显\r\n    edit(id) {\r\n      //弹出框\r\n      this.dialogVisible = true\r\n      //调用接口查询\r\n      api.getUserId(id)\r\n        .then(response => {\r\n          this.sysUser = response.data\r\n        })\r\n    },\r\n    //添加或者修改方法\r\n    saveOrUpdate() {\r\n      if(!this.sysUser.id) {\r\n        this.save()\r\n      } else {\r\n        this.update()\r\n      }\r\n    },\r\n    //修改\r\n    update() {\r\n      api.update(this.sysUser)\r\n        .then(response => {\r\n          //提示\r\n          this.$message.success('操作成功')\r\n          //关闭弹框\r\n          this.dialogVisible = false\r\n          //刷新\r\n          this.fetchData()\r\n        })\r\n    },\r\n    //添加\r\n    save() {\r\n      api.save(this.sysUser)\r\n        .then(response => {\r\n          //提示\r\n          this.$message.success('操作成功')\r\n          //关闭弹框\r\n          this.dialogVisible = false\r\n          //刷新\r\n          this.fetchData()\r\n        })\r\n    },\r\n    //添加弹框的方法\r\n    add() {\r\n      this.dialogVisible = true\r\n      this.sysUser = {}\r\n    },\r\n    // 重置查询表单\r\n    resetData() {\r\n      console.log('重置查询表单')\r\n      this.searchObj = {}\r\n      this.createTimes = []\r\n      this.fetchData()\r\n    },\r\n    //列表\r\n    fetchData(page=1) {\r\n      this.page = page\r\n      if(this.createTimes && this.createTimes.length==2) {\r\n        this.searchObj.createTimeBegin = this.createTimes[0]\r\n        this.searchObj.createTimeEnd = this.createTimes[1]\r\n      }\r\n      api.getPageList(this.page,this.limit,this.searchObj)\r\n        .then(response => {\r\n          this.list = response.data.records\r\n          this.total = response.data.total\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>"]}]}