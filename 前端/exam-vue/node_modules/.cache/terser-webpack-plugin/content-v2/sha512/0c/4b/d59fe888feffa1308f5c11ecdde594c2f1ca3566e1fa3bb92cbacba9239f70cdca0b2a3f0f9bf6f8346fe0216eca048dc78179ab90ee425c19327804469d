{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3e318221\"],{a539:function(e,t,s){\"use strict\";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{staticClass:\"app-container\"},[s(\"div\",{staticClass:\"tools-div\"},[s(\"el-button\",{attrs:{type:\"success\",icon:\"el-icon-plus\",size:\"mini\"},on:{click:function(t){return e.add()}}},[e._v(\"添 加\")])],1),s(\"el-table\",{staticStyle:{width:\"100%\",\"margin-bottom\":\"20px\",\"margin-top\":\"10px\"},attrs:{data:e.sysDeptList,\"row-key\":\"id\",border:\"\",\"default-expand-all\":!1,\"tree-props\":{children:\"children\"}}},[s(\"el-table-column\",{attrs:{prop:\"name\",label:\"部门名称\"}}),s(\"el-table-column\",{attrs:{prop:\"leader\",label:\"负责人\"}}),s(\"el-table-column\",{attrs:{prop:\"phone\",label:\"联系电话\"}}),s(\"el-table-column\",{attrs:{prop:\"sortValue\",label:\"排序\"}}),s(\"el-table-column\",{attrs:{label:\"状态\",width:\"80\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[s(\"el-switch\",{attrs:{disabled:!0},model:{value:1===t.row.status,callback:function(s){e.$set(t.row,\"status === 1\",s)},expression:\"scope.row.status === 1\"}})]}}])}),s(\"el-table-column\",{attrs:{prop:\"createTime\",label:\"创建时间\"}}),s(\"el-table-column\",{attrs:{label:\"操作\",width:\"180\",align:\"center\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[2!==t.row.type?s(\"el-button\",{attrs:{type:\"success\",icon:\"el-icon-plus\",size:\"mini\",title:\"添加下级部门\"},on:{click:function(s){return e.add(t.row)}}}):e._e(),s(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-edit\",size:\"mini\",title:\"修改\"},on:{click:function(s){return e.edit(t.row)}}}),s(\"el-button\",{attrs:{type:\"danger\",icon:\"el-icon-delete\",size:\"mini\",title:\"删除\",disabled:t.row.children.length>0},on:{click:function(s){return e.removeDataById(t.row.id)}}})]}}])})],1),s(\"el-dialog\",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:\"40%\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[s(\"el-form\",{ref:\"dataForm\",staticStyle:{\"padding-right\":\"40px\"},attrs:{model:e.sysDept,rules:e.rules,\"label-width\":\"150px\",size:\"small\"}},[s(\"el-form-item\",{attrs:{label:\"上级部门\"}},[s(\"select-dept-tree\",{attrs:{treeTitle:\"选择部门\",dataTree:e.dataDeptTree,treeVal:e.sysDept.parentName,treeId:e.sysDept.parentId},on:{saveTreeId:e.saveDeptId}})],1),s(\"el-form-item\",{attrs:{label:\"部门名称\",prop:\"name\"}},[s(\"el-input\",{model:{value:e.sysDept.name,callback:function(t){e.$set(e.sysDept,\"name\",t)},expression:\"sysDept.name\"}})],1),s(\"el-form-item\",{attrs:{label:\"负责人\",prop:\"leader\"}},[s(\"el-input\",{model:{value:e.sysDept.leader,callback:function(t){e.$set(e.sysDept,\"leader\",t)},expression:\"sysDept.leader\"}})],1),s(\"el-form-item\",{attrs:{label:\"电话\",prop:\"phone\"}},[s(\"el-input\",{model:{value:e.sysDept.phone,callback:function(t){e.$set(e.sysDept,\"phone\",t)},expression:\"sysDept.phone\"}})],1),s(\"el-form-item\",{attrs:{label:\"排序\"}},[s(\"el-input-number\",{attrs:{\"controls-position\":\"right\",min:0},model:{value:e.sysDept.sortValue,callback:function(t){e.$set(e.sysDept,\"sortValue\",t)},expression:\"sysDept.sortValue\"}})],1),s(\"el-form-item\",{attrs:{label:\"状态\",prop:\"type\"}},[s(\"el-radio-group\",{model:{value:e.sysDept.status,callback:function(t){e.$set(e.sysDept,\"status\",t)},expression:\"sysDept.status\"}},[s(\"el-radio\",{attrs:{label:1}},[e._v(\"正常\")]),s(\"el-radio\",{attrs:{label:0}},[e._v(\"停用\")])],1)],1)],1),s(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{attrs:{size:\"small\",icon:\"el-icon-refresh-right\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取 消\")]),s(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-check\",size:\"small\"},on:{click:function(t){return e.saveOrUpdate()}}},[e._v(\"确 定\")])],1)],1)],1)},n=[],i=(s(\"d3b7\"),s(\"3ca3\"),s(\"ddb0\"),s(\"b0c0\"),s(\"fcb7\")),l={id:\"\",parentId:\"\",name:\"\",treePath:\"\",leader:\"\",phone:\"\",sortValue:1,status:1},o={components:{SelectDeptTree:function(){return s.e(\"chunk-365da143\").then(s.bind(null,\"2143\"))}},data:function(){return{sysDeptList:[],expandKeys:[],dialogTitle:\"\",dialogVisible:!1,sysDept:l,saveBtnDisabled:!1,rules:{name:[{required:!0,message:\"请输入部门名称\",trigger:\"blur\"}]},dataDeptTree:[]}},created:function(){this.fetchData(),this.fetchPopDept()},methods:{fetchData:function(){var e=this;console.log(\"加载列表\"),i[\"a\"].findNodes().then((function(t){e.sysDeptList=t.data}))},saveDeptId:function(e){var t=this;e==this.sysDept.id?this.$alert(\"上级部门不能和当前部门相同\",\"提示\",{confirmButtonText:\"确定\",callback:function(e){t.sysDept.parentId=\"\",t.sysDept.parentName=\"\",i[\"a\"].getById(t.sysDept.id).then((function(e){t.sysDept=e.data}))}}):this.sysDept.parentId=e},fetchPopDept:function(){var e=this;i[\"a\"].findSelectNodes().then((function(t){e.dataDeptTree=t.data}))},removeDataById:function(e){var t=this;this.$confirm(\"此操作将永久删除该记录, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){return i[\"a\"].removeById(e)})).then((function(e){t.fetchData(),t.$message({type:\"success\",message:e.message})})).catch((function(){t.$message.info(\"取消删除\")}))},add:function(e){this.typeDisabled=!1,this.dialogTitle=\"添加下级部门\",this.dialogVisible=!0,this.sysDept=Object.assign({},l),this.sysDept.id=\"\",e?(this.sysDept.parentId=e.id,this.sysDept.parentName=e.name):(this.dialogTitle=\"添加顶级部门\",this.sysDept.parentId=\"0\")},edit:function(e){var t=this;this.dialogTitle=\"修改部门\",this.dialogVisible=!0,i[\"a\"].getById(e.id).then((function(e){t.sysDept=e.data}))},saveOrUpdate:function(){var e=this;this.$refs.dataForm.validate((function(t){t&&(e.saveBtnDisabled=!0,e.sysDept.id?e.update():e.save())}))},save:function(){var e=this;i[\"a\"].save(this.sysDept).then((function(t){e.$message.success(t.message||\"操作成功\"),e.dialogVisible=!1,e.fetchData(e.page)}))},update:function(){var e=this;i[\"a\"].updateById(this.sysDept).then((function(t){e.$message.success(t.message||\"操作成功\"),e.dialogVisible=!1,e.fetchData()}))}}},r=o,c=s(\"2877\"),d=Object(c[\"a\"])(r,a,n,!1,null,null,null);t[\"default\"]=d.exports},fcb7:function(e,t,s){\"use strict\";var a=s(\"b775\"),n=\"/admin/system/sysDept\";t[\"a\"]={findNodes:function(){return Object(a[\"a\"])({url:\"\".concat(n,\"/findNodes\"),method:\"get\"})},findSelectNodes:function(){return Object(a[\"a\"])({url:\"\".concat(n,\"/findSelectNodes\"),method:\"get\"})},getById:function(e){return Object(a[\"a\"])({url:\"\".concat(n,\"/get/\").concat(e),method:\"get\"})},removeById:function(e){return Object(a[\"a\"])({url:\"\".concat(n,\"/remove/\").concat(e),method:\"delete\"})},save:function(e){return Object(a[\"a\"])({url:\"\".concat(n,\"/save\"),method:\"post\",data:e})},updateById:function(e){return Object(a[\"a\"])({url:\"\".concat(n,\"/update\"),method:\"put\",data:e})}}}}]);","extractedComments":[]}