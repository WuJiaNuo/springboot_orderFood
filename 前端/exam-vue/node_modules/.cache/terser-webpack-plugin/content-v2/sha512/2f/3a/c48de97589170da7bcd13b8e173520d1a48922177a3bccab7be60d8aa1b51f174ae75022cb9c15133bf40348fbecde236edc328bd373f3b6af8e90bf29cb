{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-c48766ca\"],{\"39da\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"div\",{staticClass:\"search-div\"},[a(\"el-form\",{attrs:{\"label-width\":\"70px\",size:\"small\"}},[a(\"el-row\",[a(\"el-col\",{attrs:{span:24}},[a(\"el-form-item\",{attrs:{label:\"角色名称\"}},[a(\"el-input\",{staticStyle:{width:\"100%\"},attrs:{placeholder:\"角色名称\"},model:{value:e.searchObj.roleName,callback:function(t){e.$set(e.searchObj,\"roleName\",t)},expression:\"searchObj.roleName\"}})],1)],1)],1),a(\"el-row\",{staticStyle:{display:\"flex\"}},[a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:function(t){return e.fetchData()}}},[e._v(\"搜索\")]),a(\"el-button\",{attrs:{icon:\"el-icon-refresh\",size:\"mini\"},on:{click:e.resetData}},[e._v(\"重置\")])],1)],1)],1),a(\"div\",{staticClass:\"tools-div\"},[a(\"el-button\",{attrs:{type:\"success\",icon:\"el-icon-plus\",disabled:!1===e.$hasBP(\"bnt.sysRole.add\"),size:\"mini\"},on:{click:e.add}},[e._v(\"添 加\")]),a(\"el-button\",{staticClass:\"btn-add\",attrs:{size:\"mini\",disabled:!1===e.$hasBP(\"bnt.sysRole.remove\")},on:{click:function(t){return e.batchRemove()}}},[e._v(\"批量删除\")])],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],staticStyle:{width:\"100%\",\"margin-top\":\"10px\"},attrs:{data:e.list,stripe:\"\",border:\"\"},on:{\"selection-change\":e.handleSelectionChange}},[a(\"el-table-column\",{attrs:{type:\"selection\"}}),a(\"el-table-column\",{attrs:{label:\"序号\",width:\"70\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(\" \"+e._s((e.page-1)*e.limit+t.$index+1)+\" \")]}}])}),a(\"el-table-column\",{attrs:{prop:\"roleName\",label:\"角色名称\"}}),a(\"el-table-column\",{attrs:{prop:\"roleCode\",label:\"角色编码\"}}),a(\"el-table-column\",{attrs:{prop:\"createTime\",label:\"创建时间\",width:\"160\"}}),a(\"el-table-column\",{attrs:{label:\"操作\",width:\"200\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"primary\",disabled:!1===e.$hasBP(\"bnt.sysRole.update\"),icon:\"el-icon-edit\",size:\"mini\",title:\"修改\"},on:{click:function(a){return e.edit(t.row.id)}}}),a(\"el-button\",{attrs:{type:\"danger\",disabled:!1===e.$hasBP(\"bnt.sysRole.remove\"),icon:\"el-icon-delete\",size:\"mini\",title:\"删除\"},on:{click:function(a){return e.removeDataById(t.row.id)}}}),a(\"el-button\",{attrs:{type:\"warning\",icon:\"el-icon-baseball\",size:\"mini\",disabled:!1===e.$hasBP(\"bnt.sysRole.update\"),title:\"分配权限\"},on:{click:function(a){return e.showAssignAuth(t.row)}}})]}}])})],1),a(\"el-pagination\",{staticStyle:{padding:\"30px 0\",\"text-align\":\"center\"},attrs:{\"current-page\":e.page,total:e.total,\"page-size\":e.limit,layout:\"total, prev, pager, next, jumper\"},on:{\"current-change\":e.fetchData}}),a(\"el-dialog\",{attrs:{title:\"添加/修改\",visible:e.dialogVisible,width:\"40%\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[a(\"el-form\",{ref:\"dataForm\",staticStyle:{\"padding-right\":\"40px\"},attrs:{model:e.sysRole,rules:e.rules,\"label-width\":\"150px\",size:\"small\"}},[a(\"el-form-item\",{attrs:{label:\"角色名称\",prop:\"roleName\"}},[a(\"el-input\",{model:{value:e.sysRole.roleName,callback:function(t){e.$set(e.sysRole,\"roleName\",t)},expression:\"sysRole.roleName\"}})],1),a(\"el-form-item\",{attrs:{label:\"角色编码\",prop:\"roleCode\"}},[a(\"el-input\",{model:{value:e.sysRole.roleCode,callback:function(t){e.$set(e.sysRole,\"roleCode\",t)},expression:\"sysRole.roleCode\"}})],1)],1),a(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{attrs:{size:\"small\",icon:\"el-icon-refresh-right\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取 消\")]),a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-check\",size:\"small\"},on:{click:function(t){return e.saveOrUpdate()}}},[e._v(\"确 定\")])],1)],1)],1)},i=[],l=a(\"e505\"),o={data:function(){return{listLoading:!1,list:[],total:0,page:1,limit:3,searchObj:{},dialogVisible:!1,sysRole:{},selectValue:[],rules:{roleName:[{required:!0,message:\"请输入角色名称\",trigger:\"blur\"}],roleCode:[{required:!0,message:\"请输入角色编码\",trigger:\"blur\"}]}}},created:function(){this.fetchData()},methods:{showAssignAuth:function(e){this.$router.push(\"/assignAuth?id=\"+e.id+\"&roleName=\"+e.roleName)},handleSelectionChange:function(e){this.selectValue=e},batchRemove:function(){var e=this;0!=this.selectValue.length?this.$confirm(\"此操作将永久删除该角色, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){for(var t=[],a=0;a<e.selectValue.length;a++){var s=e.selectValue[a],i=s.id;t.push(i)}l[\"a\"].batchRemove(t).then((function(t){e.$message({type:\"success\",message:\"删除成功!\"}),e.fetchData()}))})):this.$message.warning(\"请选择要删除的记录！\")},edit:function(e){var t=this;this.dialogVisible=!0,l[\"a\"].getRoleId(e).then((function(e){t.sysRole=e.data}))},saveOrUpdate:function(){var e=this;this.$refs.dataForm.validate((function(t){t&&(e.sysRole.id?e.updateRole():e.saveRole())}))},updateRole:function(){var e=this;l[\"a\"].update(this.sysRole).then((function(t){e.$message({type:\"success\",message:\"修改成功!\"}),e.dialogVisible=!1,e.fetchData()}))},saveRole:function(){var e=this;l[\"a\"].saveRole(this.sysRole).then((function(t){e.$message({type:\"success\",message:\"添加成功!\"}),e.dialogVisible=!1,e.fetchData()}))},add:function(){this.dialogVisible=!0,this.sysRole={}},removeDataById:function(e){var t=this;this.$confirm(\"此操作将永久删除该角色, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){l[\"a\"].removeId(e).then((function(e){t.$message({type:\"success\",message:\"删除成功!\"}),t.fetchData()}))}))},resetData:function(){this.searchObj={},this.fetchData()},fetchData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,l[\"a\"].getPageList(this.page,this.limit,this.searchObj).then((function(t){e.list=t.data.records,e.total=t.data.total}))}}},n=o,c=a(\"2877\"),r=Object(c[\"a\"])(n,s,i,!1,null,null,null);t[\"default\"]=r.exports},e505:function(e,t,a){\"use strict\";a(\"99af\");var s=a(\"b775\"),i=\"/admin/system/sysRole\";t[\"a\"]={getPageList:function(e,t,a){return Object(s[\"a\"])({url:\"\".concat(i,\"/\").concat(e,\"/\").concat(t),method:\"get\",params:a})},removeId:function(e){return Object(s[\"a\"])({url:\"\".concat(i,\"/remove/\").concat(e),method:\"delete\"})},saveRole:function(e){return Object(s[\"a\"])({url:\"\".concat(i,\"/save\"),method:\"post\",data:e})},getRoleId:function(e){return Object(s[\"a\"])({url:\"\".concat(i,\"/findRoleById/\").concat(e),method:\"get\"})},update:function(e){return Object(s[\"a\"])({url:\"\".concat(i,\"/update\"),method:\"post\",data:e})},batchRemove:function(e){return Object(s[\"a\"])({url:\"\".concat(i,\"/batchRemove\"),method:\"delete\",data:e})},getRolesByUserId:function(e){return Object(s[\"a\"])({url:\"\".concat(i,\"/toAssign/\").concat(e),method:\"get\"})},assignRoles:function(e){return Object(s[\"a\"])({url:\"\".concat(i,\"/doAssign\"),method:\"post\",data:e})}}}}]);","extractedComments":[]}