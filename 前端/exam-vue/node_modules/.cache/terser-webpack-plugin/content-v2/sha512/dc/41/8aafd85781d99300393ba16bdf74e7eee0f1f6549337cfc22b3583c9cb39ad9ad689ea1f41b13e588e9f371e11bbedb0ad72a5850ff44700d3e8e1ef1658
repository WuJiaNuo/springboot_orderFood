{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-995d9bd0\"],{5367:function(e,t,a){\"use strict\";a(\"99af\");var o=a(\"b775\"),i=\"/eduservice/eduCourse\";t[\"a\"]={getPageList:function(e,t,a){return Object(o[\"a\"])({url:\"\".concat(i,\"/\").concat(e,\"/\").concat(t),method:\"get\",params:a})},getById:function(e){return Object(o[\"a\"])({url:\"\".concat(i,\"/get/\").concat(e),method:\"get\"})},save:function(e){return Object(o[\"a\"])({url:\"\".concat(i,\"/save\"),method:\"post\",data:e})},updateById:function(e){return Object(o[\"a\"])({url:\"\".concat(i,\"/update\"),method:\"put\",data:e})},removeById:function(e){return Object(o[\"a\"])({url:\"\".concat(i,\"/remove/\").concat(e),method:\"delete\"})},updateStatus:function(e,t){return Object(o[\"a\"])({url:\"\".concat(i,\"/updateStatus/\").concat(e,\"/\").concat(t),method:\"get\"})},getListTeacher:function(){return Object(o[\"a\"])({url:\"/eduservice/eduTeacher/findAll\",method:\"get\"})},getAllCourse:function(){return Object(o[\"a\"])({url:\"/eduservice/eduCourse/findAll\",method:\"get\"})}}},\"98d0\":function(e,t,a){\"use strict\";a(\"99af\");var o=a(\"b775\"),i=\"/eduservice/eduChapter\";t[\"a\"]={getPageList:function(e,t,a){return Object(o[\"a\"])({url:\"\".concat(i,\"/\").concat(e,\"/\").concat(t),method:\"get\",params:a})},findChapterByCourse:function(e){return Object(o[\"a\"])({url:\"\".concat(i,\"/findChapterByCourse/\").concat(e),method:\"get\"})},getById:function(e){return Object(o[\"a\"])({url:\"\".concat(i,\"/get/\").concat(e),method:\"get\"})},save:function(e){return Object(o[\"a\"])({url:\"\".concat(i,\"/save\"),method:\"post\",data:e})},updateById:function(e){return Object(o[\"a\"])({url:\"\".concat(i,\"/update\"),method:\"put\",data:e})},removeById:function(e){return Object(o[\"a\"])({url:\"\".concat(i,\"/remove/\").concat(e),method:\"delete\"})},updateStatus:function(e,t){return Object(o[\"a\"])({url:\"\".concat(i,\"/updateStatus/\").concat(e,\"/\").concat(t),method:\"get\"})}}},e2de:function(e,t,a){\"use strict\";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"div\",{staticClass:\"search-div\"},[a(\"el-form\",{attrs:{\"label-width\":\"70px\",size:\"small\"}},[a(\"el-row\",[a(\"el-col\",{attrs:{span:8}},[a(\"el-form-item\",{attrs:{label:\"节点名称\"}},[a(\"el-input\",{staticStyle:{width:\"95%\"},attrs:{placeholder:\"节点名称\"},model:{value:e.searchObj.title,callback:function(t){e.$set(e.searchObj,\"title\",t)},expression:\"searchObj.title\"}})],1)],1)],1),a(\"el-row\",{staticStyle:{display:\"flex\"}},[a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:function(t){return e.fetchData()}}},[e._v(\"搜索\")]),a(\"el-button\",{attrs:{icon:\"el-icon-refresh\",size:\"mini\"},on:{click:e.resetData}},[e._v(\"重置\")])],1)],1)],1),a(\"div\",{staticClass:\"tools-div\"},[a(\"el-button\",{attrs:{type:\"success\",icon:\"el-icon-plus\",size:\"mini\"},on:{click:e.add}},[e._v(\"添 加\")])],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],staticStyle:{width:\"100%\",\"margin-top\":\"10px\"},attrs:{data:e.list,stripe:\"\",border:\"\"}},[a(\"el-table-column\",{attrs:{label:\"序号\",width:\"70\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(\" \"+e._s((e.page-1)*e.limit+t.$index+1)+\" \")]}}])}),a(\"el-table-column\",{attrs:{prop:\"courseName\",label:\"课程名称\"}}),a(\"el-table-column\",{attrs:{prop:\"chapterName\",label:\"章节名称\"}}),a(\"el-table-column\",{attrs:{prop:\"title\",label:\"节点名称\"}}),a(\"el-table-column\",{attrs:{prop:\"sort\",label:\"排序字段\"}}),a(\"el-table-column\",{attrs:{prop:\"playCount\",label:\"播放次数\"}}),a(\"el-table-column\",{attrs:{prop:\"isFree\",label:\"是否可以试听：0收费 1免费\"}}),a(\"el-table-column\",{attrs:{prop:\"status\",label:\"视频状态\"}}),a(\"el-table-column\",{attrs:{prop:\"createTime\",label:\"创建时间\"}}),a(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-edit\",size:\"mini\",title:\"修改\"},on:{click:function(a){return e.edit(t.row.id)}}}),a(\"el-button\",{attrs:{type:\"danger\",icon:\"el-icon-delete\",size:\"mini\",title:\"删除\"},on:{click:function(a){return e.removeDataById(t.row.id)}}})]}}])})],1),a(\"el-pagination\",{staticStyle:{padding:\"30px 0\",\"text-align\":\"center\"},attrs:{\"current-page\":e.page,total:e.total,\"page-size\":e.limit,layout:\"total, prev, pager, next, jumper\"},on:{\"current-change\":e.fetchData}}),a(\"el-dialog\",{attrs:{title:\"添加/修改\",visible:e.dialogVisible,\"close-on-click-modal\":!1,width:\"40%\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[a(\"el-form\",{ref:\"dataForm\",staticStyle:{\"padding-right\":\"40px\"},attrs:{model:e.eduVideo,\"label-width\":\"100px\",size:\"small\"}},[a(\"el-form-item\",{attrs:{label:\"所属课程\"}},[a(\"el-select\",{attrs:{placeholder:\"课程\"},on:{change:e.getChapterByCourse},model:{value:e.eduVideo.courseId,callback:function(t){e.$set(e.eduVideo,\"courseId\",t)},expression:\"eduVideo.courseId\"}},e._l(e.courseList,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"所属章节\"}},[a(\"el-select\",{attrs:{placeholder:\"所属章节\"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.eduVideo.chapterId,callback:function(t){e.$set(e.eduVideo,\"chapterId\",t)},expression:\"eduVideo.chapterId\"}},e._l(e.chapterList,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"节点名称\",prop:\"title\"}},[a(\"el-input\",{model:{value:e.eduVideo.title,callback:function(t){e.$set(e.eduVideo,\"title\",t)},expression:\"eduVideo.title\"}})],1),a(\"el-form-item\",{attrs:{label:\"上传视频\",prop:\"upload\"}},[a(\"el-upload\",{ref:\"upload\",staticClass:\"upload-demo\",attrs:{action:e.BASE_API+\"/eduvod/video/uploadAlyiVideo\",\"on-preview\":e.handlePreview,\"on-remove\":e.handleRemove,\"on-success\":e.uploadBack,\"before-remove\":e.beforeRemove,multiple:\"\",limit:1,\"on-exceed\":e.handleExceed,headers:e.headers,\"show-file-list\":!1,\"on-progress\":e.uploading,\"file-list\":e.fileList}},[a(\"el-button\",{attrs:{size:\"small\",type:\"primary\"}},[e._v(\"点击上传\")])],1),e._v(\" \"),a(\"el-button\",{attrs:{type:\"danger\",size:\"small\"},on:{click:e.clearUpload}},[e._v(\"删除\")]),a(\"el-progress\",{attrs:{percentage:e.percentage}}),a(\"div\",[e._v(e._s(e.eduVideo.videoOriginalName))])],1),a(\"el-form-item\",{attrs:{label:\"排序\",prop:\"sort\"}},[a(\"el-input-number\",{attrs:{min:0,\"controls-position\":\"right\"},model:{value:e.eduVideo.sort,callback:function(t){e.$set(e.eduVideo,\"sort\",t)},expression:\"eduVideo.sort\"}})],1),a(\"el-form-item\",{attrs:{label:\"是否可以试听\",prop:\"isFree\"}},[a(\"el-radio\",{attrs:{label:1},model:{value:e.eduVideo.isFree,callback:function(t){e.$set(e.eduVideo,\"isFree\",t)},expression:\"eduVideo.isFree\"}},[e._v(\"是\")]),a(\"el-radio\",{attrs:{label:0},model:{value:e.eduVideo.isFree,callback:function(t){e.$set(e.eduVideo,\"isFree\",t)},expression:\"eduVideo.isFree\"}},[e._v(\"否\")])],1)],1),a(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{attrs:{size:\"small\",icon:\"el-icon-refresh-right\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取 消\")]),a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-check\",size:\"small\"},on:{click:function(t){return e.saveOrUpdate()}}},[e._v(\"确 定\")])],1)],1)],1)},i=[],n=(a(\"b0c0\"),a(\"99af\"),a(\"b775\")),c=\"/eduservice/eduVideo\",l={getPageList:function(e,t,a){return Object(n[\"a\"])({url:\"\".concat(c,\"/\").concat(e,\"/\").concat(t),method:\"get\",params:a})},getById:function(e){return Object(n[\"a\"])({url:\"\".concat(c,\"/get/\").concat(e),method:\"get\"})},save:function(e){return Object(n[\"a\"])({url:\"\".concat(c,\"/save\"),method:\"post\",data:e})},updateById:function(e){return Object(n[\"a\"])({url:\"\".concat(c,\"/update\"),method:\"put\",data:e})},removeById:function(e){return Object(n[\"a\"])({url:\"\".concat(c,\"/remove/\").concat(e),method:\"delete\"})},updateStatus:function(e,t){return Object(n[\"a\"])({url:\"\".concat(c,\"/updateStatus/\").concat(e,\"/\").concat(t),method:\"get\"})}},r=a(\"5367\"),s=a(\"98d0\"),u=a(\"5f87\"),d={videoSourceId:\"\",videoOriginalName:\"\"},p={data:function(){return{listLoading:!0,list:null,total:0,page:1,limit:10,searchObj:{},dialogVisible:!1,eduVideo:d,saveBtnDisabled:!1,courseList:[],chapterList:[],fileList:[],percentage:0,headers:{token:Object(u[\"a\"])()},BASE_API:\"http://localhost:5240\"}},created:function(){console.log(\"list created......\"),this.fetchData(),this.getCourseList()},mounted:function(){console.log(\"list mounted......\")},methods:{handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning(\"只能选择一个文件\")},beforeRemove:function(e,t){return this.$confirm(\"确定移除 \".concat(e.name,\"？\"))},uploading:function(e,t){var a=parseInt(e.percent);this.percentage=a>98?98:a},uploadBack:function(e,t){\"200\"==e.code?(this.percentage=100,this.eduVideo.videoOriginalName=t.name,this.$message.success(\"视频上传成功\"),this.eduVideo.videoSourceId=e.data):this.$message.error(\"系统异常，请联系管理员\")},clearUpload:function(){this.percentage=0,this.eduVideo.videoOriginalName=\"\",this.fileList=[]},fetchData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,l.getPageList(this.page,this.limit,this.searchObj).then((function(t){e.list=t.data.records,e.total=t.data.total,e.listLoading=!1}))},getChapterByCourse:function(e,t){var a=this;s[\"a\"].findChapterByCourse(e).then((function(e){a.chapterList=e.data,t||(a.eduVideo.chapterId=\"\"),a.$forceUpdate()}))},getCourseList:function(){var e=this;r[\"a\"].getAllCourse().then((function(t){e.courseList=t.data}))},resetData:function(){console.log(\"重置查询表单\"),this.searchObj={},this.fetchData()},removeDataById:function(e){var t=this;this.$confirm(\"此操作将永久删除该记录, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){return l.removeById(e)})).then((function(e){t.fetchData(t.page),t.$message.success(e.message||\"删除成功\")})).catch((function(){t.$message.info(\"取消删除\")}))},add:function(){this.dialogVisible=!0,this.eduVideo={}},edit:function(e){var t=this;this.dialogVisible=!0,l.getById(e).then((function(e){t.eduVideo=e.data,t.getChapterByCourse(t.eduVideo.courseId,!0)}))},saveOrUpdate:function(){this.eduVideo.id?this.update():this.save()},save:function(){var e=this;l.save(this.eduVideo).then((function(t){e.$message.success(\"操作成功\"),e.dialogVisible=!1,e.percentage=0,clearUpload(),e.fetchData(e.page)}))},update:function(){var e=this;l.updateById(this.eduVideo).then((function(t){e.$message.success(t.message||\"操作成功\"),e.dialogVisible=!1,e.percentage=0,clearUpload(),e.fetchData(e.page)}))}}},h=p,m=a(\"2877\"),f=Object(m[\"a\"])(h,o,i,!1,null,null,null);t[\"default\"]=f.exports}}]);","extractedComments":[]}