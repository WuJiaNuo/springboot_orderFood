{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-f69beb0c\"],{5367:function(e,t,a){\"use strict\";a(\"99af\");var s=a(\"b775\"),o=\"/eduservice/eduCourse\";t[\"a\"]={getPageList:function(e,t,a){return Object(s[\"a\"])({url:\"\".concat(o,\"/\").concat(e,\"/\").concat(t),method:\"get\",params:a})},getById:function(e){return Object(s[\"a\"])({url:\"\".concat(o,\"/get/\").concat(e),method:\"get\"})},save:function(e){return Object(s[\"a\"])({url:\"\".concat(o,\"/save\"),method:\"post\",data:e})},updateById:function(e){return Object(s[\"a\"])({url:\"\".concat(o,\"/update\"),method:\"put\",data:e})},removeById:function(e){return Object(s[\"a\"])({url:\"\".concat(o,\"/remove/\").concat(e),method:\"delete\"})},updateStatus:function(e,t){return Object(s[\"a\"])({url:\"\".concat(o,\"/updateStatus/\").concat(e,\"/\").concat(t),method:\"get\"})},getListTeacher:function(){return Object(s[\"a\"])({url:\"/eduservice/eduTeacher/findAll\",method:\"get\"})},getAllCourse:function(){return Object(s[\"a\"])({url:\"/eduservice/eduCourse/findAll\",method:\"get\"})}}},a2fb:function(e,t,a){\"use strict\";var s=a(\"b775\"),o=\"/eduservice/eduSubject\";t[\"a\"]={findNodes:function(){return Object(s[\"a\"])({url:\"\".concat(o,\"/findNodes\"),method:\"get\"})},removeById:function(e){return Object(s[\"a\"])({url:\"\".concat(o,\"/remove/\").concat(e),method:\"delete\"})},save:function(e){return Object(s[\"a\"])({url:\"\".concat(o,\"/save\"),method:\"post\",data:e})},updateById:function(e){return Object(s[\"a\"])({url:\"\".concat(o,\"/update\"),method:\"put\",data:e})}}},f419:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"div\",{staticClass:\"search-div\"},[a(\"el-form\",{attrs:{\"label-width\":\"70px\",size:\"small\"}},[a(\"el-row\",[a(\"el-col\",{attrs:{span:8}},[a(\"el-form-item\",{attrs:{label:\"名称\"}},[a(\"el-input\",{staticStyle:{width:\"95%\"},attrs:{placeholder:\"标题\"},model:{value:e.searchObj.title,callback:function(t){e.$set(e.searchObj,\"title\",t)},expression:\"searchObj.title\"}})],1)],1)],1),a(\"el-row\",{staticStyle:{display:\"flex\"}},[a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:function(t){return e.fetchData()}}},[e._v(\"搜索\")]),a(\"el-button\",{attrs:{icon:\"el-icon-refresh\",size:\"mini\"},on:{click:e.resetData}},[e._v(\"重置\")])],1)],1)],1),a(\"div\",{staticClass:\"tools-div\"},[a(\"el-button\",{attrs:{type:\"success\",icon:\"el-icon-plus\",size:\"mini\"},on:{click:e.add}},[e._v(\"添 加\")])],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],staticStyle:{width:\"100%\",\"margin-top\":\"10px\"},attrs:{data:e.list,stripe:\"\",border:\"\"}},[a(\"el-table-column\",{attrs:{label:\"序号\",width:\"70\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(\" \"+e._s((e.page-1)*e.limit+t.$index+1)+\" \")]}}])}),a(\"el-table-column\",{attrs:{prop:\"title\",label:\"课程标题\"}}),a(\"el-table-column\",{attrs:{prop:\"price\",label:\"课程销售价格\"}}),a(\"el-table-column\",{attrs:{prop:\"lessonNum\",label:\"总课时\"}}),a(\"el-table-column\",{attrs:{prop:\"buyCount\",label:\"销售数量\"}}),a(\"el-table-column\",{attrs:{prop:\"viewCount\",label:\"浏览数量\"}}),a(\"el-table-column\",{attrs:{prop:\"status\",label:\"课程状态\"}}),a(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-edit\",size:\"mini\",title:\"修改\"},on:{click:function(a){return e.edit(t.row.id)}}}),a(\"el-button\",{attrs:{type:\"danger\",icon:\"el-icon-delete\",size:\"mini\",title:\"删除\"},on:{click:function(a){return e.removeDataById(t.row.id)}}})]}}])})],1),a(\"el-pagination\",{staticStyle:{padding:\"30px 0\",\"text-align\":\"center\"},attrs:{\"current-page\":e.page,total:e.total,\"page-size\":e.limit,layout:\"total, prev, pager, next, jumper\"},on:{\"current-change\":e.fetchData}}),a(\"el-dialog\",{attrs:{title:\"添加/修改\",visible:e.dialogVisible,width:\"40%\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[a(\"el-form\",{ref:\"dataForm\",staticStyle:{\"padding-right\":\"40px\"},attrs:{model:e.eduCourse,\"label-width\":\"100px\",size:\"small\"}},[a(\"el-form-item\",{attrs:{label:\"课程讲师ID\",prop:\"teacherId\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.eduCourse.teacherId,callback:function(t){e.$set(e.eduCourse,\"teacherId\",t)},expression:\"eduCourse.teacherId\"}},e._l(e.teacherList,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"课程分类\",prop:\"subjectId\"}},[a(\"el-select\",{attrs:{placeholder:\"一级分类\"},on:{change:e.subjectLevelOneChanged},model:{value:e.eduCourse.subjectParentId,callback:function(t){e.$set(e.eduCourse,\"subjectParentId\",t)},expression:\"eduCourse.subjectParentId\"}},e._l(e.subjectOneList,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a(\"el-select\",{attrs:{placeholder:\"二级分类\"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.eduCourse.subjectId,callback:function(t){e.$set(e.eduCourse,\"subjectId\",t)},expression:\"eduCourse.subjectId\"}},e._l(e.subjectTwoList,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a(\"el-form-item\",{attrs:{label:\"课程标题\",prop:\"title\"}},[a(\"el-input\",{model:{value:e.eduCourse.title,callback:function(t){e.$set(e.eduCourse,\"title\",t)},expression:\"eduCourse.title\"}})],1),a(\"el-form-item\",{attrs:{label:\"课程价格\",prop:\"price\"}},[a(\"el-input-number\",{attrs:{min:0,\"controls-position\":\"right\"},model:{value:e.eduCourse.price,callback:function(t){e.$set(e.eduCourse,\"price\",t)},expression:\"eduCourse.price\"}})],1),a(\"el-form-item\",{attrs:{label:\"总课时\",prop:\"lessonNum\"}},[a(\"el-input-number\",{attrs:{min:0,\"controls-position\":\"right\"},model:{value:e.eduCourse.lessonNum,callback:function(t){e.$set(e.eduCourse,\"lessonNum\",t)},expression:\"eduCourse.lessonNum\"}})],1),a(\"el-form-item\",{attrs:{label:\"课程封面\",prop:\"cover\"}},[a(\"el-upload\",{staticClass:\"avatar-uploader\",attrs:{\"show-file-list\":!1,action:\"#\",\"http-request\":e.uploadLogo}},[a(\"img\",{attrs:{src:e.eduCourse.cover,width:\"380\",height:\"380\"}})])],1),a(\"el-form-item\",{attrs:{label:\"是否发布\",prop:\"status\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.eduCourse.status,callback:function(t){e.$set(e.eduCourse,\"status\",t)},expression:\"eduCourse.status\"}},[a(\"el-option\",{attrs:{label:\"是\",value:\"Normal\"}}),a(\"el-option\",{attrs:{label:\"否\",value:\"Draft\"}})],1)],1)],1),a(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{attrs:{size:\"small\",icon:\"el-icon-refresh-right\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取 消\")]),a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-check\",size:\"small\"},on:{click:function(t){return e.saveOrUpdate()}}},[e._v(\"确 定\")])],1)],1)],1)},o=[],i=a(\"5367\"),n=a(\"a2fb\"),l=a(\"b775\"),r=\"/eduoss/fileoss\",c={uploadFile:function(e){return Object(l[\"a\"])({url:\"\".concat(r,\"/upload\"),method:\"post\",timeout:6e5,data:e})}},u={data:function(){return{listLoading:!0,list:null,total:0,page:1,limit:10,searchObj:{},dialogVisible:!1,eduCourse:{cover:\"https://lanf001.oss-cn-beijing.aliyuncs.com/2023/03/26/1ada44965a134935ba49d02cf9dcda71file.png\"},saveBtnDisabled:!1,BASE_API:\"http://localhost:5240\",teacherList:[],subjectOneList:[],subjectTwoList:[]}},created:function(){console.log(\"list created......\"),this.fetchData()},mounted:function(){console.log(\"list mounted......\"),this.getListTeacher(),this.getOneSubject()},methods:{uploadLogo:function(e){var t=this,a=e.file,s=\"image/jpeg\"===a.type,o=\"image/png\"===a.type,i=a.size/1024/1024<2;if(s||o)if(i){var n=new FormData;n.append(\"file\",a),c.uploadFile(n).then((function(e){200==e.code&&(t.eduCourse.cover=e.data.url)})).catch((function(e){}))}else this.$message.error(\"上传头像图片大小不能超过 2MB!\");else this.$message.error(\"上传头像图片只能是 JPG 或者png 格式!\")},subjectLevelOneChanged:function(e){for(var t=0;t<this.subjectOneList.length;t++){var a=this.subjectOneList[t];e===a.id&&(this.subjectTwoList=a.children,this.eduCourse.subjectId=\"\")}this.$forceUpdate()},getOneSubject:function(){var e=this;n[\"a\"].findNodes().then((function(t){e.subjectOneList=t.data}))},getListTeacher:function(){var e=this;i[\"a\"].getListTeacher().then((function(t){e.teacherList=t.data}))},fetchData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,i[\"a\"].getPageList(this.page,this.limit,this.searchObj).then((function(t){e.list=t.data.records,e.total=t.data.total,e.listLoading=!1}))},resetData:function(){console.log(\"重置查询表单\"),this.searchObj={},this.fetchData()},removeDataById:function(e){var t=this;this.$confirm(\"此操作将永久删除该记录, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){return i[\"a\"].removeById(e)})).then((function(e){t.fetchData(t.page),t.$message.success(e.message||\"删除成功\")})).catch((function(){t.$message.info(\"取消删除\")}))},add:function(){this.dialogVisible=!0,this.eduCourse={cover:\"https://lanf001.oss-cn-beijing.aliyuncs.com/2023/03/26/1ada44965a134935ba49d02cf9dcda71file.png\"}},edit:function(e){var t=this;this.dialogVisible=!0,i[\"a\"].getById(e).then((function(e){t.subjectLevelOneChanged(e.data.subjectParentId),t.eduCourse=e.data}))},saveOrUpdate:function(){this.eduCourse.id?this.update():this.save()},save:function(){var e=this;i[\"a\"].save(this.eduCourse).then((function(t){e.$message.success(\"操作成功\"),e.dialogVisible=!1,e.fetchData(e.page)}))},update:function(){var e=this;i[\"a\"].updateById(this.eduCourse).then((function(t){e.$message.success(t.message||\"操作成功\"),e.dialogVisible=!1,e.fetchData(e.page)}))}}},d=u,p=a(\"2877\"),h=Object(p[\"a\"])(d,s,o,!1,null,null,null);t[\"default\"]=h.exports}}]);","extractedComments":[]}