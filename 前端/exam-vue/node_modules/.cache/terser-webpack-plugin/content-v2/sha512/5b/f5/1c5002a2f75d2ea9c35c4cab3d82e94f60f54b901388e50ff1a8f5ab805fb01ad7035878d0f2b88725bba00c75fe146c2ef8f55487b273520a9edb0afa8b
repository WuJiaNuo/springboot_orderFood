{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-4e0ba14c\"],{\"78d5\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-container\",{staticStyle:{height:\"100%\",border:\"1px solid #eee\"}},[a(\"el-aside\",{staticStyle:{\"background-color\":\"rgb(238, 241, 246)\"},attrs:{width:\"200px\"}},[a(\"el-input\",{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{placeholder:\"请输入关键字过滤\"},model:{value:e.searchDeptValue,callback:function(t){e.searchDeptValue=t},expression:\"searchDeptValue\"}}),a(\"el-tag\",[e._v(\"当前选择：\"+e._s(e.selectedDeptName))]),a(\"el-tree\",{ref:\"eltree\",attrs:{data:e.dataDeptTree,\"node-key\":\"id\",\"default-expand-all\":!0,\"expand-on-click-node\":!1,\"default-expanded-keys\":e.defaultDeptExpandedKeys,\"filter-node-method\":e.filterDeptNode},on:{\"current-change\":e.handleDeptTreeSelectChange}})],1),a(\"el-container\",[a(\"el-main\",[a(\"div\",{staticClass:\"app-container\"},[a(\"div\",{staticClass:\"search-div\"},[a(\"el-form\",{attrs:{\"label-width\":\"70px\",size:\"small\"}},[a(\"el-row\",[a(\"el-col\",{attrs:{span:8}},[a(\"el-form-item\",{attrs:{label:\"关 键 字\"}},[a(\"el-input\",{staticStyle:{width:\"95%\"},attrs:{placeholder:\"用户名/姓名/手机号码\"},model:{value:e.searchObj.keyword,callback:function(t){e.$set(e.searchObj,\"keyword\",t)},expression:\"searchObj.keyword\"}})],1)],1),a(\"el-col\",{attrs:{span:8}},[a(\"el-form-item\",{attrs:{label:\"操作时间\"}},[a(\"el-date-picker\",{staticStyle:{\"margin-right\":\"10px\",width:\"100%\"},attrs:{type:\"datetimerange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始时间\",\"end-placeholder\":\"结束时间\",\"value-format\":\"yyyy-MM-dd HH:mm:ss\"},model:{value:e.createTimes,callback:function(t){e.createTimes=t},expression:\"createTimes\"}})],1)],1)],1),a(\"el-row\",{staticStyle:{display:\"flex\"}},[a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:function(t){return e.fetchData()}}},[e._v(\"搜索\")]),a(\"el-button\",{attrs:{icon:\"el-icon-refresh\",size:\"mini\"},on:{click:e.resetData}},[e._v(\"重置\")])],1)],1)],1),a(\"div\",{staticClass:\"tools-div\"},[a(\"el-button\",{attrs:{type:\"success\",disabled:!1===e.$hasBP(\"bnt.sysUser.add\"),icon:\"el-icon-plus\",size:\"mini\"},on:{click:e.add}},[e._v(\"添 加 \")]),a(\"el-button\",{staticClass:\"btn-add\",attrs:{size:\"mini\",disabled:!1===e.$hasBP(\"bnt.sysUser.remove\")},on:{click:function(t){return e.batchRemove()}}},[e._v(\"批量删除\")]),a(\"el-upload\",{staticClass:\"upload-demo\",attrs:{action:\"#\",\"on-preview\":e.handlePreview,\"on-remove\":e.handleRemove,\"before-remove\":e.beforeRemove,multiple:\"\",limit:1,\"on-exceed\":e.handleExceed,\"file-list\":e.fileList,\"show-file-list\":!1,\"http-request\":e.uploadFile}}),a(\"el-button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{size:\"mini\",disabled:!1===e.$hasBP(\"bnt.sysUser.list\"),type:\"primary\"},on:{click:e.exportData}},[e._v(\"导出数据\")])],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],staticStyle:{width:\"100%\",\"margin-top\":\"10px\"},attrs:{data:e.list,stripe:\"\",border:\"\",\"row-key\":e.getRowKeys},on:{\"selection-change\":e.handleSelectionChange}},[a(\"el-table-column\",{attrs:{label:\"序号\",width:\"70\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(\" \"+e._s((e.page-1)*e.limit+t.$index+1)+\" \")]}}])}),a(\"el-table-column\",{attrs:{type:\"selection\",\"reserve-selection\":!0}}),a(\"el-table-column\",{attrs:{prop:\"username\",label:\"用户名\",width:\"65px\",\"show-overflow-tooltip\":\"true\"}}),a(\"el-table-column\",{attrs:{prop:\"name\",label:\"姓名\",width:\"65px\",\"show-overflow-tooltip\":\"true\"}}),a(\"el-table-column\",{attrs:{prop:\"phone\",label:\"手机\",width:\"100px\",\"show-overflow-tooltip\":\"true\"}}),a(\"el-table-column\",{attrs:{prop:\"deptName\",label:\"所属部门\",\"show-overflow-tooltip\":\"true\"}}),a(\"el-table-column\",{attrs:{label:\"状态\",width:\"65px\",\"show-overflow-tooltip\":\"true\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-switch\",{on:{change:function(a){return e.switchStatus(t.row)}},model:{value:1===t.row.status,callback:function(a){e.$set(t.row,\"status===1\",a)},expression:\"scope.row.status===1\"}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"createTime\",label:\"创建时间\",\"show-overflow-tooltip\":\"true\"}}),a(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",fixed:\"right\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"primary\",disabled:!1===e.$hasBP(\"bnt.sysUser.update\"),icon:\"el-icon-edit\",size:\"mini\",title:\"修改\"},on:{click:function(a){return e.edit(t.row.id)}}}),a(\"el-button\",{attrs:{type:\"danger\",icon:\"el-icon-delete\",size:\"mini\",disabled:!1===e.$hasBP(\"bnt.sysUser.remove\"),title:\"删除\"},on:{click:function(a){return e.removeDataById(t.row.id)}}}),a(\"el-button\",{attrs:{type:\"warning\",icon:\"el-icon-baseball\",size:\"mini\",disabled:!1===e.$hasBP(\"bnt.sysUser.update\"),title:\"分配角色\"},on:{click:function(a){return e.showAssignRole(t.row)}}})]}}])})],1),a(\"el-pagination\",{staticStyle:{padding:\"30px 0\",\"text-align\":\"center\"},attrs:{\"current-page\":e.page,total:e.total,\"page-size\":e.limit,layout:\"total, prev, pager, next, jumper\"},on:{\"current-change\":e.fetchData}}),a(\"el-dialog\",{attrs:{title:\"分配角色\",visible:e.dialogRoleVisible},on:{\"update:visible\":function(t){e.dialogRoleVisible=t}}},[a(\"el-form\",{attrs:{\"label-width\":\"80px\"}},[a(\"el-form-item\",{attrs:{label:\"用户名\"}},[a(\"el-input\",{attrs:{disabled:\"\",value:e.sysUser.username}})],1),a(\"el-form-item\",{attrs:{label:\"角色列表\"}},[a(\"el-checkbox\",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:\"checkAll\"}},[e._v(\"全选 \")]),a(\"div\",{staticStyle:{margin:\"15px 0\"}}),a(\"el-checkbox-group\",{on:{change:e.handleCheckedChange},model:{value:e.userRoleIds,callback:function(t){e.userRoleIds=t},expression:\"userRoleIds\"}},e._l(e.allRoles,(function(t){return a(\"el-checkbox\",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.roleName))])})),1)],1)],1),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{attrs:{type:\"primary\",size:\"small\"},on:{click:e.assignRole}},[e._v(\"保存\")]),a(\"el-button\",{attrs:{size:\"small\"},on:{click:function(t){e.dialogRoleVisible=!1}}},[e._v(\"取消\")])],1)],1),a(\"el-dialog\",{attrs:{title:\"添加/修改\",visible:e.dialogVisible,width:\"40%\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[a(\"el-form\",{ref:\"dataForm\",staticStyle:{\"padding-right\":\"40px\"},attrs:{model:e.sysUser,rules:e.rules,\"label-width\":\"100px\",size:\"small\"}},[a(\"el-form-item\",{attrs:{label:\"用户名\",prop:\"username\"}},[a(\"el-input\",{model:{value:e.sysUser.username,callback:function(t){e.$set(e.sysUser,\"username\",t)},expression:\"sysUser.username\"}})],1),e.sysUser.id?a(\"el-form-item\",{attrs:{label:\"新密码\",prop:\"newpassword\"}},[a(\"el-input\",{attrs:{type:\"password\"},model:{value:e.sysUser.newpassword,callback:function(t){e.$set(e.sysUser,\"newpassword\",t)},expression:\"sysUser.newpassword\"}})],1):a(\"el-form-item\",{attrs:{label:\"密码\",prop:\"password\"}},[a(\"el-input\",{attrs:{type:\"password\"},model:{value:e.sysUser.password,callback:function(t){e.$set(e.sysUser,\"password\",t)},expression:\"sysUser.password\"}})],1),a(\"el-form-item\",{attrs:{label:\"姓名\",prop:\"name\"}},[a(\"el-input\",{model:{value:e.sysUser.name,callback:function(t){e.$set(e.sysUser,\"name\",t)},expression:\"sysUser.name\"}})],1),a(\"el-form-item\",{attrs:{label:\"手机\",prop:\"phone\"}},[a(\"el-input\",{model:{value:e.sysUser.phone,callback:function(t){e.$set(e.sysUser,\"phone\",t)},expression:\"sysUser.phone\"}})],1),a(\"el-form-item\",{attrs:{label:\"所属部门\",prop:\"deptIds\"}},[a(\"el-tree\",{ref:\"eltreeDept\",attrs:{data:e.dataDeptTree,\"node-key\":\"id\",\"show-checkbox\":\"\",\"expand-on-click-node\":!1,\"check-strictly\":\"true\",\"default-checked-keys\":e.sysUser.deptIds}})],1),a(\"el-form-item\",{attrs:{label:\"所属岗位\",prop:\"postId\"}},[a(\"el-select\",{attrs:{placeholder:\"所属岗位\"},model:{value:e.sysUser.postId,callback:function(t){e.$set(e.sysUser,\"postId\",t)},expression:\"sysUser.postId\"}},e._l(e.sysPostX0d96aa0bList,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{attrs:{size:\"small\",icon:\"el-icon-refresh-right\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取 消\")]),a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-check\",size:\"small\"},on:{click:function(t){return e.saveOrUpdate()}}},[e._v(\"确 定\")])],1)],1)],1)])],1)],1)},n=[],o=(a(\"4de4\"),a(\"d3b7\"),a(\"b0c0\"),a(\"d81d\"),a(\"7e5c\")),l=a(\"e505\"),i=a(\"c2d0\"),r=a(\"5f87\"),c=a(\"ccd5\"),d={components:{},data:function(){var e=this,t=function(t,a,s){var n=e.$refs.eltreeDept.getCheckedKeys();n&&0!==n.length?s():s(new Error(\"请选择关联机构\"))};return{listLoading:!1,list:null,total:0,page:1,limit:5,searchObj:{},createTimes:[],dialogVisible:!1,sysUser:{},dialogRoleVisible:!1,allRoles:[],userRoleIds:[],isIndeterminate:!1,checkAll:!1,dataDeptTree:[],searchDeptValue:\"\",defaultDeptExpandedKeys:[],selectedDeptValue:\"\",selectedDeptName:\"\",sysPostX0d96aa0bList:[],selectValue:[],fileList:[],dowTempPath:\"http://localhost:5240/temp/temp.xlsx\",rules:{username:[{required:!0,message:\"请输入用户名\",trigger:\"blur\"},{min:2,message:\"长度在 2个字符以上\",trigger:\"blur\"}],name:[{required:!0,message:\"请输入姓名\",trigger:\"blur\"}],phone:[{required:!0,message:\"请输入手机\",trigger:\"blur\"}],password:[{required:!0,message:\"请输入密码\",trigger:\"blur\"}],deptIds:[{required:!0,validator:t,trigger:\"change\"}]}}},created:function(){this.fetchData(),this.fetchPopDept(),this.getAllSysPostX0d96aa0b()},watch:{searchDeptValue:function(e){this.$refs.eltree.filter(e)}},methods:{getRowKeys:function(e){return e.id},handleSelectionChange:function(e){this.selectValue=e},batchRemove:function(){var e=this;0!=this.selectValue.length?this.$confirm(\"此操作将永久删除, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){for(var t=[],a=0;a<e.selectValue.length;a++){var s=e.selectValue[a],n=s.id;t.push(n)}o[\"a\"].batchRemove(t).then((function(t){e.$message({type:\"success\",message:\"删除成功!\"}),e.fetchData()}))})):this.$message.warning(\"请选择要删除的记录！\")},exportData:function(){window.open(\"http://localhost:5240/admin/system/sysUser/export?token=\"+Object(r[\"a\"])())},getAllSysPostX0d96aa0b:function(){var e=this,t={};c[\"a\"].getAllSysPost(t).then((function(t){e.sysPostX0d96aa0bList=t.data}))},fetchPopDept:function(){var e=this;i[\"a\"].findSelectNodes().then((function(t){e.dataDeptTree=t.data}))},handleDeptTreeSelectChange:function(e){this.selectedDeptValue=e.id,this.selectedDeptName=e.label,this.searchObj.deptId=e.id,this.fetchData(this.page)},filterDeptNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning(\"一次只能选择一个文件\")},beforeRemove:function(e,t){return this.$confirm(\"确定移除 \".concat(e.name,\"？\"))},uploadFile:function(e){var t=this,a=e.file,s=new FormData;s.append(\"file\",a),o[\"a\"].uploadFile(s).then((function(e){200==e.code&&(t.$message({type:\"success\",message:\"导入成功!\"}),t.fetchData(t.page),t.fileList=[])})).catch((function(e){t.fileList=[]}))},fetchData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,this.createTimes&&2==this.createTimes.length&&(this.searchObj.createTimeBegin=this.createTimes[0],this.searchObj.createTimeEnd=this.createTimes[1]),o[\"a\"].getPageList(this.page,this.limit,this.searchObj).then((function(t){e.list=t.data.records,e.total=t.data.total}))},showAssignRole:function(e){var t=this;this.sysUser=e,this.dialogRoleVisible=!0,l[\"a\"].getRolesByUserId(e.id).then((function(e){t.allRoles=e.data.allRoles,console.log(t.allRoles),t.userRoleIds=e.data.userRoleIds,console.log(t.userRoleIds),t.checkAll=t.userRoleIds.length===t.allRoles.length,t.isIndeterminate=t.userRoleIds.length>0&&t.userRoleIds.length<t.allRoles.length}))},handleCheckAllChange:function(e){this.userRoleIds=e?this.allRoles.map((function(e){return e.id})):[],this.isIndeterminate=!1},handleCheckedChange:function(e){var t=this.userRoleIds,a=this.allRoles;this.checkAll=t.length===a.length&&a.length>0,this.isIndeterminate=t.length>0&&t.length<a.length},assignRole:function(){var e=this,t={userId:this.sysUser.id,roleIdList:this.userRoleIds};l[\"a\"].assignRoles(t).then((function(t){e.$message.success(t.message||\"分配角色成功\"),e.dialogRoleVisible=!1,e.fetchData(e.page)}))},switchStatus:function(e){var t=this;e.status=1===e.status?0:1,o[\"a\"].updateStatus(e.id,e.status).then((function(e){t.$message.success(e.message||\"操作成功\"),t.fetchData()}))},removeDataById:function(e){var t=this;this.$confirm(\"此操作将永久删除该用户, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){o[\"a\"].removeById(e).then((function(e){t.$message({type:\"success\",message:\"删除成功!\"}),t.fetchData()}))}))},edit:function(e){var t=this;this.dialogVisible=!0,o[\"a\"].getUserId(e).then((function(e){t.$nextTick((function(){this.$refs.eltreeDept.setCheckedKeys([]),this.sysUser=e.data}))}))},saveOrUpdate:function(){var e=this;this.$refs.dataForm.validate((function(t){if(!t)return console.log(\"error submit!!\"),!1;e.sysUser.deptIds=e.$refs.eltreeDept.getCheckedKeys(),e.sysUser.id?e.update():e.save()}))},update:function(){var e=this;o[\"a\"].update(this.sysUser).then((function(t){e.$message.success(\"操作成功\"),e.dialogVisible=!1,e.fetchData()}))},save:function(){var e=this;o[\"a\"].save(this.sysUser).then((function(t){e.$message.success(\"操作成功\"),e.dialogVisible=!1,e.fetchData()}))},add:function(){this.dialogVisible=!0,this.sysUser={},this.$nextTick((function(){this.$refs.eltreeDept.setCheckedKeys([])}))},resetData:function(){console.log(\"重置查询表单\"),this.searchObj={},this.createTimes=[],this.fetchData()}}},u=d,h=(a(\"af2e\"),a(\"2877\")),p=Object(h[\"a\"])(u,s,n,!1,null,null,null);t[\"default\"]=p.exports},\"7e5c\":function(e,t,a){\"use strict\";a(\"99af\");var s=a(\"b775\"),n=\"/admin/system/sysUser\";t[\"a\"]={getPageList:function(e,t,a){return Object(s[\"a\"])({url:\"\".concat(n,\"/\").concat(e,\"/\").concat(t),method:\"get\",params:a})},save:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/save\"),method:\"post\",data:e})},getUserId:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/getUser/\").concat(e),method:\"get\"})},getByIds:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/getByIds\"),method:\"post\",data:e})},update:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/update\"),method:\"post\",data:e})},removeById:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/remove/\").concat(e),method:\"delete\"})},batchRemove:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/batchRemove\"),method:\"delete\",data:e})},updateStatus:function(e,t){return Object(s[\"a\"])({url:\"\".concat(n,\"/updateStatus/\").concat(e,\"/\").concat(t),method:\"get\"})},uploadFile:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/import\"),method:\"post\",data:e})}}},a614:function(e,t,a){},af2e:function(e,t,a){\"use strict\";a(\"a614\")},c2d0:function(e,t,a){\"use strict\";var s=a(\"b775\"),n=\"/admin/system/sysDept\";t[\"a\"]={findNodes:function(){return Object(s[\"a\"])({url:\"\".concat(n,\"/findNodes\"),method:\"get\"})},findSelectNodes:function(){return Object(s[\"a\"])({url:\"\".concat(n,\"/findSelectNodes\"),method:\"get\"})},findNodesByParent:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/findNodesByParent/\").concat(e),method:\"get\"})},getById:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/get/\").concat(e),method:\"get\"})},removeById:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/remove/\").concat(e),method:\"delete\"})},save:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/save\"),method:\"post\",data:e})},updateById:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/update\"),method:\"put\",data:e})}}},ccd5:function(e,t,a){\"use strict\";a(\"99af\");var s=a(\"b775\"),n=\"/system/sysPost\";t[\"a\"]={getPageList:function(e,t,a){return Object(s[\"a\"])({url:\"\".concat(n,\"/\").concat(e,\"/\").concat(t),method:\"get\",params:a})},getAllSysPost:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/list\"),method:\"get\",params:e})},getById:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/get/\").concat(e),method:\"get\"})},getByIds:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/getByIds\"),method:\"post\",data:e})},save:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/save\"),method:\"post\",data:e})},updateById:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/update\"),method:\"put\",data:e})},removeById:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/remove/\").concat(e),method:\"delete\"})},batchRemove:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/batchRemove\"),method:\"delete\",data:e})},updateStatus:function(e,t){return Object(s[\"a\"])({url:\"\".concat(n,\"/updateStatus/\").concat(e,\"/\").concat(t),method:\"get\"})}}},e505:function(e,t,a){\"use strict\";a(\"99af\");var s=a(\"b775\"),n=\"/admin/system/sysRole\";t[\"a\"]={getPageList:function(e,t,a){return Object(s[\"a\"])({url:\"\".concat(n,\"/\").concat(e,\"/\").concat(t),method:\"get\",params:a})},removeId:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/remove/\").concat(e),method:\"delete\"})},saveRole:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/save\"),method:\"post\",data:e})},getRoleId:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/findRoleById/\").concat(e),method:\"get\"})},update:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/update\"),method:\"post\",data:e})},batchRemove:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/batchRemove\"),method:\"delete\",data:e})},getRolesByUserId:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/toAssign/\").concat(e),method:\"get\"})},assignRoles:function(e){return Object(s[\"a\"])({url:\"\".concat(n,\"/doAssign\"),method:\"post\",data:e})}}}}]);","extractedComments":[]}