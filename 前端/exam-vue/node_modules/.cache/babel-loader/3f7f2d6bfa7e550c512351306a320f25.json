{"remainingRequest":"F:\\project\\base\\sourcecode\\front\\exam_vue\\node_modules\\babel-loader\\lib\\index.js!F:\\project\\base\\sourcecode\\front\\exam_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\project\\base\\sourcecode\\front\\exam_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\project\\base\\sourcecode\\front\\exam_vue\\src\\components\\Custom\\TreeSelect\\TreeModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\project\\base\\sourcecode\\front\\exam_vue\\src\\components\\Custom\\TreeSelect\\TreeModal.vue","mtime":1695044329291},{"path":"F:\\project\\base\\sourcecode\\front\\exam_vue\\babel.config.js","mtime":1637306514000},{"path":"F:\\project\\base\\sourcecode\\front\\exam_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\project\\base\\sourcecode\\front\\exam_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\project\\base\\sourcecode\\front\\exam_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\project\\base\\sourcecode\\front\\exam_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgc3lzRGVwdEFwaSBmcm9tICdAL2FwaS9zeXN0ZW0vc3lzRGVwdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgZGF0YVRyZWU6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgfSwKICAgIHRyZWVJZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnLAogICAgICByZXF1aXJlZDogZmFsc2UKICAgIH0sCiAgICB0cmVlVGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJywKICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICB9LAogICAgaXNMYXp5OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgcHJvcHM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbGFiZWw6ICduYW1lJywKICAgICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nLAogICAgICAgICAgaXNMZWFmOiAnaXNMZWFmJwogICAgICAgIH07CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0cmVlUHJvcHM6IHsKICAgICAgICBsYWJlbDogJ25hbWUnLAogICAgICAgIGlkOiAnaWQnLAogICAgICAgIGNoaWxkcmVuOiAnY2hpbGRsaXN0JywKICAgICAgICBpc0xlYWY6ICdsZWFmJwogICAgICB9LAogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgdHJlZURhdGE6IFtdLAogICAgICBzZWFyY2hWYWx1ZTogJycsCiAgICAgIGRlZmF1bHRFeHBhbmRlZEtleXM6IFtdLAogICAgICBzZWxlY3RlZFZhbHVlOiAnJywKICAgICAgc2VsZWN0ZWROYW1lOiAnJwogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBzZWFyY2hWYWx1ZTogZnVuY3Rpb24gc2VhcmNoVmFsdWUodmFsdWUpIHsKICAgICAgdGhpcy4kcmVmcy50cmVlLmZpbHRlcih2YWx1ZSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzaG93OiBmdW5jdGlvbiBzaG93KGlkLCBuYW1lKSB7CiAgICAgIHRoaXMuc2VhcmNoVmFsdWUgPSAnJzsKICAgICAgdGhpcy5kZWZhdWx0RXhwYW5kZWRLZXlzID0gW107CiAgICAgIHRoaXMuc2VsZWN0ZWRWYWx1ZSA9IGlkOwogICAgICB0aGlzLnNlbGVjdGVkTmFtZSA9IG5hbWU7CgogICAgICBpZiAodGhpcy5pc0xhenkgPT0gZmFsc2UpIHsKICAgICAgICB0aGlzLmxvYWRUcmVlKCk7CiAgICAgIH0KCiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgbG9hZE5vZGVCeVBhcmVudDogZnVuY3Rpb24gbG9hZE5vZGVCeVBhcmVudChub2RlLCByZXNvbHZlKSB7CiAgICAgIGlmIChub2RlLmxldmVsID09PSAwKSB7CiAgICAgICAgLy/osIPnlKjlkI7lj7Dmn6Xor6LnrKzkuIDnuqfliKsKICAgICAgICBzeXNEZXB0QXBpLmZpbmROb2Rlc0J5UGFyZW50KCcwJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHBhcmVudElkID0gbm9kZS5kYXRhLmlkOwogICAgICAgIHN5c0RlcHRBcGkuZmluZE5vZGVzQnlQYXJlbnQocGFyZW50SWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgbG9hZFRyZWU6IGZ1bmN0aW9uIGxvYWRUcmVlKCkgewogICAgICB0aGlzLnRyZWVEYXRhID0gdGhpcy5kYXRhVHJlZTsgLy8gICB0aGlzLiRhcGkuc3lzdGVtLm9yZ2FuaXphdGlvbi50cmVlKCkKICAgICAgLy8gICAgIC50aGVuKHJlcyA9PiB7CiAgICAgIC8vICAgICAgIHRoaXMudHJlZURhdGEgPSByZXMuZGF0YQogICAgICAvLyAgICAgICAvLyDpu5jorqTlsZXlvIDmoLnoioLngrkKICAgICAgLy8gICAgICAgdGhpcy5kZWZhdWx0RXhwYW5kZWRLZXlzLnB1c2godGhpcy50cmVlRGF0YVswXS5pZCkKICAgICAgLy8gICAgICAgLy8g6buY6K6k5bGV5byA5b2T5YmN6IqC54K5CiAgICAgIC8vICAgICAgIHRoaXMuZGVmYXVsdEV4cGFuZGVkS2V5cy5wdXNoKHRoaXMuc2VsZWN0ZWRWYWx1ZSkKICAgICAgLy8gICAgIH0pCiAgICAgIC8vdGhpcy50cmVlRGF0YSA9IFt7aWQ6JzEnLGxhYmVsOifkuIDnuqcnLGNoaWxkcmVuOlt7aWQ6JzInLGxhYmVsOifkuoznuqcxJ30se2lkOiczJyxsYWJlbDon5LqM57qnMid9XX1dCiAgICAgIC8vIOm7mOiupOWxleW8gOagueiKgueCuQoKICAgICAgaWYgKHRoaXMuaXNMYXp5ICE9ICd0cnVlJykgewogICAgICAgIHRoaXMuZGVmYXVsdEV4cGFuZGVkS2V5cy5wdXNoKHRoaXMudHJlZURhdGFbMF0uaWQpOyAvLyDpu5jorqTlsZXlvIDlvZPliY3oioLngrkKCiAgICAgICAgdGhpcy5kZWZhdWx0RXhwYW5kZWRLZXlzLnB1c2godGhpcy50cmVlSWQpOwogICAgICB9CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBjb25maXJtOiBmdW5jdGlvbiBjb25maXJtKCkgewogICAgICB0aGlzLiRlbWl0KCdvaycsIHRoaXMuc2VsZWN0ZWRWYWx1ZSwgdGhpcy5zZWxlY3RlZE5hbWUpOwogICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDmoJHoioLngrnpgInkuK3mlLnlj5gKICAgIGhhbmRsZVRyZWVTZWxlY3RDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVRyZWVTZWxlY3RDaGFuZ2UoZGF0YSkgewogICAgICB0aGlzLnNlbGVjdGVkVmFsdWUgPSBkYXRhLmlkOwoKICAgICAgaWYgKGRhdGEubGFiZWwpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkTmFtZSA9IGRhdGEubGFiZWw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZE5hbWUgPSBkYXRhLm5hbWU7CiAgICAgIH0KICAgIH0sCiAgICBmaWx0ZXJOb2RlOiBmdW5jdGlvbiBmaWx0ZXJOb2RlKHZhbHVlLCBkYXRhKSB7CiAgICAgIGlmICghdmFsdWUpIHJldHVybiB0cnVlOwoKICAgICAgaWYgKGRhdGEubGFiZWwpIHsKICAgICAgICByZXR1cm4gZGF0YS5sYWJlbC5pbmRleE9mKHZhbHVlKSAhPT0gLTE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGRhdGEubmFtZS5pbmRleE9mKHZhbHVlKSAhPT0gLTE7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;EACAA;IACAC;MACAC,WADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAG,WAFA;MAGAF;IAHA,CALA;IAUAG;MACAJ,YADA;MAEAG,WAFA;MAGAF;IAHA,CAVA;IAeAI;MACAL,aADA;MAEAG;IAFA,CAfA;IAmBAL;MACAE,YADA;MAEAG;QACA;UACAG,aADA;UAEAC,oBAFA;UAGAC;QAHA;MAKA;IARA;EAnBA,CADA;EA+BAC,IA/BA,kBA+BA;IACA;MACAC;QACAJ,aADA;QAEAK,QAFA;QAGAJ,qBAHA;QAIAC;MAJA,CADA;MAOAI,cAPA;MAQAC,YARA;MASAC,eATA;MAUAC,uBAVA;MAWAC,iBAXA;MAYAC;IAZA;EAcA,CA9CA;EA+CAC;IACAJ,WADA,uBACAK,KADA,EACA;MACA;IACA;EAHA,CA/CA;EAoDAC;IACAC,IADA,gBACAV,EADA,EACAW,IADA,EACA;MACA;MACA;MACA;MACA;;MACA;QACA;MACA;;MACA;IACA,CAVA;IAWAC,gBAXA,4BAWAC,IAXA,EAWAC,OAXA,EAWA;MACA;QACA;QACAC;UACAD;QACA,CAFA;MAGA,CALA,MAKA;QACA;QACAC;UACAD;QACA,CAFA;MAGA;IACA,CAvBA;IAwBAE,QAxBA,sBAwBA;MACA,8BADA,CAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA;MACA;;MACA;QACA,mDADA,CAEA;;QACA;MACA;IACA,CA1CA;IA2CAC,KA3CA,mBA2CA;MACA;IACA,CA7CA;IA8CAC,OA9CA,qBA8CA;MACA;MACA;IACA,CAjDA;IAkDA;IACAC,sBAnDA,kCAmDArB,IAnDA,EAmDA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CA1DA;IA2DAsB,UA3DA,sBA2DAZ,KA3DA,EA2DAV,IA3DA,EA2DA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA;EAlEA;AApDA","names":["props","dataTree","type","required","treeId","default","treeTitle","isLazy","label","children","isLeaf","data","treeProps","id","visible","treeData","searchValue","defaultExpandedKeys","selectedValue","selectedName","watch","value","methods","show","name","loadNodeByParent","node","resolve","sysDeptApi","loadTree","close","confirm","handleTreeSelectChange","filterNode"],"sourceRoot":"src/components/Custom/TreeSelect","sources":["TreeModal.vue"],"sourcesContent":["<template>\n  <div>\n    <el-dialog :title=\"treeTitle\" :visible=\"visible\" :class=\"$style.ElDialog\" width=\"400px\" append-to-body\n               @close=\"close\">\n      <el-input v-model=\"searchValue\" placeholder=\"请输入关键字过滤\" style=\"margin-bottom:10px;\"/>\n      <el-tag>当前选择：{{ selectedName }}</el-tag>\n      <el-tree\n        ref=\"tree\"\n        :data=\"treeData\"\n        node-key=\"id\"\n        :default-expanded-keys=\"defaultExpandedKeys\"\n        :filter-node-method=\"filterNode\"\n        :expand-on-click-node=\"false\"\n        @current-change=\"handleTreeSelectChange\"\n        :props=\"props\"\n        v-if=\"isLazy!=true\"\n      />\n      <el-tree\n        ref=\"tree\"\n        node-key=\"id\"\n        :props=\"treeProps\"\n        :load=\"loadNodeByParent\"\n        lazy\n        @current-change=\"handleTreeSelectChange\"\n        v-if=\"isLazy==true\"\n      >\n      </el-tree>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"confirm\">确定</el-button>\n        <el-button @click=\"close\">关闭</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\n    import sysDeptApi from '@/api/system/sysDept'\n    export default {\n        props: {\n            dataTree: {\n                type: Array,\n                required: false\n            },\n            treeId: {\n                type: String,\n                default: '',\n                required: false\n            },\n            treeTitle: {\n                type: String,\n                default: '',\n                required: false\n            },\n            isLazy: {\n                type: Boolean,\n                default: false\n            },\n            props: {\n                type: Object,\n                default: function () {\n                    return {\n                        label: 'name',\n                        children: 'children',\n                        isLeaf: 'isLeaf'\n                    }\n                }\n            }\n        },\n        data() {\n            return {\n                treeProps: {\n                    label: 'name',\n                    id:'id',\n                    children: 'childlist',\n                    isLeaf: 'leaf'\n                },\n                visible: false,\n                treeData: [],\n                searchValue: '',\n                defaultExpandedKeys: [],\n                selectedValue: '',\n                selectedName: ''\n            }\n        },\n        watch: {\n            searchValue(value) {\n                this.$refs.tree.filter(value)\n            }\n        },\n        methods: {\n            show(id, name) {\n                this.searchValue = ''\n                this.defaultExpandedKeys = []\n                this.selectedValue = id\n                this.selectedName = name\n                if(this.isLazy==false){\n                    this.loadTree()\n                }\n                this.visible = true\n            },\n            loadNodeByParent(node, resolve) {\n                if (node.level === 0) {\n                    //调用后台查询第一级别\n                    sysDeptApi.findNodesByParent('0').then(response => {\n                        resolve(response.data);\n                    })\n                }else{\n                    let parentId = node.data.id;\n                    sysDeptApi.findNodesByParent(parentId).then(response => {\n                        resolve(response.data);\n                    })\n                }\n            },\n            loadTree() {\n                this.treeData = this.dataTree\n                //   this.$api.system.organization.tree()\n                //     .then(res => {\n                //       this.treeData = res.data\n                //       // 默认展开根节点\n                //       this.defaultExpandedKeys.push(this.treeData[0].id)\n                //       // 默认展开当前节点\n                //       this.defaultExpandedKeys.push(this.selectedValue)\n                //     })\n\n                //this.treeData = [{id:'1',label:'一级',children:[{id:'2',label:'二级1'},{id:'3',label:'二级2'}]}]\n                // 默认展开根节点\n                if(this.isLazy != 'true'){\n                    this.defaultExpandedKeys.push(this.treeData[0].id)\n                    // 默认展开当前节点\n                    this.defaultExpandedKeys.push(this.treeId)\n                }\n            },\n            close() {\n                this.visible = false\n            },\n            confirm() {\n                this.$emit('ok', this.selectedValue, this.selectedName)\n                this.visible = false\n            },\n            // 树节点选中改变\n            handleTreeSelectChange(data) {\n                this.selectedValue = data.id\n                if(data.label) {\n                    this.selectedName = data.label\n                }else{\n                    this.selectedName = data.name\n                }\n            },\n            filterNode(value, data) {\n                if (!value) return true\n                if(data.label){\n                    return data.label.indexOf(value) !== -1\n                }else{\n                    return data.name.indexOf(value) !== -1\n                }\n            }\n\n        }\n    }\n\n</script>\n\n<style lang=\"scss\" module>\n  .ElDialog {\n    :global .el-dialog__body {\n      padding-top: 0px !important;\n    }\n  }\n</style>\n\n"]}]}
