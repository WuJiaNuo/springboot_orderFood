{"remainingRequest":"F:\\exam_vue\\node_modules\\babel-loader\\lib\\index.js!F:\\exam_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\exam_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\exam_vue\\src\\components\\Custom\\TreeSelect\\TreeModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\exam_vue\\src\\components\\Custom\\TreeSelect\\TreeModal.vue","mtime":1682967855889},{"path":"F:\\exam_vue\\babel.config.js","mtime":1637306514000},{"path":"F:\\exam_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\exam_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\exam_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\exam_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgc3lzRGVwdEFwaSBmcm9tICdAL2FwaS9zeXN0ZW0vc3lzRGVwdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgZGF0YVRyZWU6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgfSwKICAgIHRyZWVJZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnLAogICAgICByZXF1aXJlZDogZmFsc2UKICAgIH0sCiAgICB0cmVlVGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJywKICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICB9LAogICAgaXNMYXp5OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgcHJvcHM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbGFiZWw6ICdsYWJlbCcsCiAgICAgICAgICBjaGlsZHJlbjogJ2NoaWxkcmVuJywKICAgICAgICAgIGlzTGVhZjogJ2lzTGVhZicKICAgICAgICB9OwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdHJlZVByb3BzOiB7CiAgICAgICAgbGFiZWw6ICduYW1lJywKICAgICAgICBpZDogJ2lkJywKICAgICAgICBjaGlsZHJlbjogJ2NoaWxkbGlzdCcsCiAgICAgICAgaXNMZWFmOiAnbGVhZicKICAgICAgfSwKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIHRyZWVEYXRhOiBbXSwKICAgICAgc2VhcmNoVmFsdWU6ICcnLAogICAgICBkZWZhdWx0RXhwYW5kZWRLZXlzOiBbXSwKICAgICAgc2VsZWN0ZWRWYWx1ZTogJycsCiAgICAgIHNlbGVjdGVkTmFtZTogJycKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgc2VhcmNoVmFsdWU6IGZ1bmN0aW9uIHNlYXJjaFZhbHVlKHZhbHVlKSB7CiAgICAgIHRoaXMuJHJlZnMudHJlZS5maWx0ZXIodmFsdWUpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2hvdzogZnVuY3Rpb24gc2hvdyhpZCwgbmFtZSkgewogICAgICB0aGlzLnNlYXJjaFZhbHVlID0gJyc7CiAgICAgIHRoaXMuZGVmYXVsdEV4cGFuZGVkS2V5cyA9IFtdOwogICAgICB0aGlzLnNlbGVjdGVkVmFsdWUgPSBpZDsKICAgICAgdGhpcy5zZWxlY3RlZE5hbWUgPSBuYW1lOwoKICAgICAgaWYgKHRoaXMuaXNMYXp5ID09IGZhbHNlKSB7CiAgICAgICAgdGhpcy5sb2FkVHJlZSgpOwogICAgICB9CgogICAgICB0aGlzLnZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGxvYWROb2RlQnlQYXJlbnQ6IGZ1bmN0aW9uIGxvYWROb2RlQnlQYXJlbnQobm9kZSwgcmVzb2x2ZSkgewogICAgICBpZiAobm9kZS5sZXZlbCA9PT0gMCkgewogICAgICAgIC8v6LCD55So5ZCO5Y+w5p+l6K+i56ys5LiA57qn5YirCiAgICAgICAgc3lzRGVwdEFwaS5maW5kTm9kZXNCeVBhcmVudCgnMCcpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBwYXJlbnRJZCA9IG5vZGUuZGF0YS5pZDsKICAgICAgICBzeXNEZXB0QXBpLmZpbmROb2Rlc0J5UGFyZW50KHBhcmVudElkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZS5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGxvYWRUcmVlOiBmdW5jdGlvbiBsb2FkVHJlZSgpIHsKICAgICAgdGhpcy50cmVlRGF0YSA9IHRoaXMuZGF0YVRyZWU7IC8vICAgdGhpcy4kYXBpLnN5c3RlbS5vcmdhbml6YXRpb24udHJlZSgpCiAgICAgIC8vICAgICAudGhlbihyZXMgPT4gewogICAgICAvLyAgICAgICB0aGlzLnRyZWVEYXRhID0gcmVzLmRhdGEKICAgICAgLy8gICAgICAgLy8g6buY6K6k5bGV5byA5qC56IqC54K5CiAgICAgIC8vICAgICAgIHRoaXMuZGVmYXVsdEV4cGFuZGVkS2V5cy5wdXNoKHRoaXMudHJlZURhdGFbMF0uaWQpCiAgICAgIC8vICAgICAgIC8vIOm7mOiupOWxleW8gOW9k+WJjeiKgueCuQogICAgICAvLyAgICAgICB0aGlzLmRlZmF1bHRFeHBhbmRlZEtleXMucHVzaCh0aGlzLnNlbGVjdGVkVmFsdWUpCiAgICAgIC8vICAgICB9KQogICAgICAvL3RoaXMudHJlZURhdGEgPSBbe2lkOicxJyxsYWJlbDon5LiA57qnJyxjaGlsZHJlbjpbe2lkOicyJyxsYWJlbDon5LqM57qnMSd9LHtpZDonMycsbGFiZWw6J+S6jOe6pzInfV19XQogICAgICAvLyDpu5jorqTlsZXlvIDmoLnoioLngrkKCiAgICAgIGlmICh0aGlzLmlzTGF6eSAhPSAndHJ1ZScpIHsKICAgICAgICB0aGlzLmRlZmF1bHRFeHBhbmRlZEtleXMucHVzaCh0aGlzLnRyZWVEYXRhWzBdLmlkKTsgLy8g6buY6K6k5bGV5byA5b2T5YmN6IqC54K5CgogICAgICAgIHRoaXMuZGVmYXVsdEV4cGFuZGVkS2V5cy5wdXNoKHRoaXMudHJlZUlkKTsKICAgICAgfQogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgY29uZmlybTogZnVuY3Rpb24gY29uZmlybSgpIHsKICAgICAgdGhpcy4kZW1pdCgnb2snLCB0aGlzLnNlbGVjdGVkVmFsdWUsIHRoaXMuc2VsZWN0ZWROYW1lKTsKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgLy8g5qCR6IqC54K56YCJ5Lit5pS55Y+YCiAgICBoYW5kbGVUcmVlU2VsZWN0Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVUcmVlU2VsZWN0Q2hhbmdlKGRhdGEpIHsKICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlID0gZGF0YS5pZDsKCiAgICAgIGlmIChkYXRhLmxhYmVsKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZE5hbWUgPSBkYXRhLmxhYmVsOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VsZWN0ZWROYW1lID0gZGF0YS5uYW1lOwogICAgICB9CiAgICB9LAogICAgZmlsdGVyTm9kZTogZnVuY3Rpb24gZmlsdGVyTm9kZSh2YWx1ZSwgZGF0YSkgewogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gdHJ1ZTsKCiAgICAgIGlmIChkYXRhLmxhYmVsKSB7CiAgICAgICAgcmV0dXJuIGRhdGEubGFiZWwuaW5kZXhPZih2YWx1ZSkgIT09IC0xOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBkYXRhLm5hbWUuaW5kZXhPZih2YWx1ZSkgIT09IC0xOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;EACAA;IACAC;MACAC,WADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAG,WAFA;MAGAF;IAHA,CALA;IAUAG;MACAJ,YADA;MAEAG,WAFA;MAGAF;IAHA,CAVA;IAeAI;MACAL,aADA;MAEAG;IAFA,CAfA;IAmBAL;MACAE,YADA;MAEAG;QACA;UACAG,cADA;UAEAC,oBAFA;UAGAC;QAHA;MAKA;IARA;EAnBA,CADA;EA+BAC,IA/BA,kBA+BA;IACA;MACAC;QACAJ,aADA;QAEAK,QAFA;QAGAJ,qBAHA;QAIAC;MAJA,CADA;MAOAI,cAPA;MAQAC,YARA;MASAC,eATA;MAUAC,uBAVA;MAWAC,iBAXA;MAYAC;IAZA;EAcA,CA9CA;EA+CAC;IACAJ,WADA,uBACAK,KADA,EACA;MACA;IACA;EAHA,CA/CA;EAoDAC;IACAC,IADA,gBACAV,EADA,EACAW,IADA,EACA;MACA;MACA;MACA;MACA;;MACA;QACA;MACA;;MACA;IACA,CAVA;IAWAC,gBAXA,4BAWAC,IAXA,EAWAC,OAXA,EAWA;MACA;QACA;QACAC;UACAD;QACA,CAFA;MAGA,CALA,MAKA;QACA;QACAC;UACAD;QACA,CAFA;MAGA;IACA,CAvBA;IAwBAE,QAxBA,sBAwBA;MACA,8BADA,CAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA;MACA;;MACA;QACA,mDADA,CAEA;;QACA;MACA;IACA,CA1CA;IA2CAC,KA3CA,mBA2CA;MACA;IACA,CA7CA;IA8CAC,OA9CA,qBA8CA;MACA;MACA;IACA,CAjDA;IAkDA;IACAC,sBAnDA,kCAmDArB,IAnDA,EAmDA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CA1DA;IA2DAsB,UA3DA,sBA2DAZ,KA3DA,EA2DAV,IA3DA,EA2DA;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA;EAlEA;AApDA","names":["props","dataTree","type","required","treeId","default","treeTitle","isLazy","label","children","isLeaf","data","treeProps","id","visible","treeData","searchValue","defaultExpandedKeys","selectedValue","selectedName","watch","value","methods","show","name","loadNodeByParent","node","resolve","sysDeptApi","loadTree","close","confirm","handleTreeSelectChange","filterNode"],"sourceRoot":"src/components/Custom/TreeSelect","sources":["TreeModal.vue"],"sourcesContent":["<template>\n  <div>\n    <el-dialog :title=\"treeTitle\" :visible=\"visible\" :class=\"$style.ElDialog\" width=\"400px\" append-to-body\n               @close=\"close\">\n      <el-input v-model=\"searchValue\" placeholder=\"请输入关键字过滤\" style=\"margin-bottom:10px;\"/>\n      <el-tag>当前选择：{{ selectedName }}</el-tag>\n      <el-tree\n        ref=\"tree\"\n        :data=\"treeData\"\n        node-key=\"id\"\n        :default-expanded-keys=\"defaultExpandedKeys\"\n        :filter-node-method=\"filterNode\"\n        :expand-on-click-node=\"false\"\n        @current-change=\"handleTreeSelectChange\"\n        :props=\"props\"\n        v-if=\"isLazy!=true\"\n      />\n      <el-tree\n        ref=\"tree\"\n        node-key=\"id\"\n        :props=\"treeProps\"\n        :load=\"loadNodeByParent\"\n        lazy\n        @current-change=\"handleTreeSelectChange\"\n        v-if=\"isLazy==true\"\n      >\n      </el-tree>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"confirm\">确定</el-button>\n        <el-button @click=\"close\">关闭</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\n    import sysDeptApi from '@/api/system/sysDept'\n    export default {\n        props: {\n            dataTree: {\n                type: Array,\n                required: false\n            },\n            treeId: {\n                type: String,\n                default: '',\n                required: false\n            },\n            treeTitle: {\n                type: String,\n                default: '',\n                required: false\n            },\n            isLazy: {\n                type: Boolean,\n                default: false\n            },\n            props: {\n                type: Object,\n                default: function () {\n                    return {\n                        label: 'label',\n                        children: 'children',\n                        isLeaf: 'isLeaf'\n                    }\n                }\n            }\n        },\n        data() {\n            return {\n                treeProps: {\n                    label: 'name',\n                    id:'id',\n                    children: 'childlist',\n                    isLeaf: 'leaf'\n                },\n                visible: false,\n                treeData: [],\n                searchValue: '',\n                defaultExpandedKeys: [],\n                selectedValue: '',\n                selectedName: ''\n            }\n        },\n        watch: {\n            searchValue(value) {\n                this.$refs.tree.filter(value)\n            }\n        },\n        methods: {\n            show(id, name) {\n                this.searchValue = ''\n                this.defaultExpandedKeys = []\n                this.selectedValue = id\n                this.selectedName = name\n                if(this.isLazy==false){\n                    this.loadTree()\n                }\n                this.visible = true\n            },\n            loadNodeByParent(node, resolve) {\n                if (node.level === 0) {\n                    //调用后台查询第一级别\n                    sysDeptApi.findNodesByParent('0').then(response => {\n                        resolve(response.data);\n                    })\n                }else{\n                    let parentId = node.data.id;\n                    sysDeptApi.findNodesByParent(parentId).then(response => {\n                        resolve(response.data);\n                    })\n                }\n            },\n            loadTree() {\n                this.treeData = this.dataTree\n                //   this.$api.system.organization.tree()\n                //     .then(res => {\n                //       this.treeData = res.data\n                //       // 默认展开根节点\n                //       this.defaultExpandedKeys.push(this.treeData[0].id)\n                //       // 默认展开当前节点\n                //       this.defaultExpandedKeys.push(this.selectedValue)\n                //     })\n\n                //this.treeData = [{id:'1',label:'一级',children:[{id:'2',label:'二级1'},{id:'3',label:'二级2'}]}]\n                // 默认展开根节点\n                if(this.isLazy != 'true'){\n                    this.defaultExpandedKeys.push(this.treeData[0].id)\n                    // 默认展开当前节点\n                    this.defaultExpandedKeys.push(this.treeId)\n                }\n            },\n            close() {\n                this.visible = false\n            },\n            confirm() {\n                this.$emit('ok', this.selectedValue, this.selectedName)\n                this.visible = false\n            },\n            // 树节点选中改变\n            handleTreeSelectChange(data) {\n                this.selectedValue = data.id\n                if(data.label) {\n                    this.selectedName = data.label\n                }else{\n                    this.selectedName = data.name\n                }\n            },\n            filterNode(value, data) {\n                if (!value) return true\n                if(data.label){\n                    return data.label.indexOf(value) !== -1\n                }else{\n                    return data.name.indexOf(value) !== -1\n                }\n            }\n\n        }\n    }\n\n</script>\n\n<style lang=\"scss\" module>\n  .ElDialog {\n    :global .el-dialog__body {\n      padding-top: 0px !important;\n    }\n  }\n</style>\n\n"]}]}
