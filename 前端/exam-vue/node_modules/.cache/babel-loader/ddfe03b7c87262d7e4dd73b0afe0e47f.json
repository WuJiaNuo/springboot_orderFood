{"remainingRequest":"F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\node_modules\\babel-loader\\lib\\index.js!F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\src\\store\\modules\\user.js","dependencies":[{"path":"F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\src\\store\\modules\\user.js","mtime":1665280596295},{"path":"F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\babel.config.js","mtime":1698853375725},{"path":"F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0LCBnZXRJbmZvIGFzIF9nZXRJbmZvIH0gZnJvbSAnQC9hcGkvdXNlcic7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgeyByZXNldFJvdXRlciB9IGZyb20gJ0Avcm91dGVyJzsKCnZhciBnZXREZWZhdWx0U3RhdGUgPSBmdW5jdGlvbiBnZXREZWZhdWx0U3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHRva2VuOiBnZXRUb2tlbigpLAogICAgbmFtZTogJycsCiAgICBhdmF0YXI6ICcnLAogICAgYnV0dG9uczogW10sCiAgICAvLyDmlrDlop4KICAgIG1lbnVzOiAnJyAvL+aWsOWingoKICB9Owp9OwoKdmFyIHN0YXRlID0gZ2V0RGVmYXVsdFN0YXRlKCk7CnZhciBtdXRhdGlvbnMgPSB7CiAgUkVTRVRfU1RBVEU6IGZ1bmN0aW9uIFJFU0VUX1NUQVRFKHN0YXRlKSB7CiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCBnZXREZWZhdWx0U3RhdGUoKSk7CiAgfSwKICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgfSwKICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgIHN0YXRlLm5hbWUgPSBuYW1lOwogIH0sCiAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgfSwKICAvLyDmlrDlop4KICBTRVRfQlVUVE9OUzogZnVuY3Rpb24gU0VUX0JVVFRPTlMoc3RhdGUsIGJ1dHRvbnMpIHsKICAgIHN0YXRlLmJ1dHRvbnMgPSBidXR0b25zOwogIH0sCiAgLy8g5paw5aKeCiAgU0VUX01FTlVTOiBmdW5jdGlvbiBTRVRfTUVOVVMoc3RhdGUsIG1lbnVzKSB7CiAgICBzdGF0ZS5tZW51cyA9IG1lbnVzOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgLy8gdXNlciBsb2dpbgogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgdmFyIHVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWUsCiAgICAgICAgcGFzc3dvcmQgPSB1c2VySW5mby5wYXNzd29yZDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9sb2dpbih7CiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLnRyaW0oKSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCBkYXRhLnRva2VuKTsKICAgICAgICBzZXRUb2tlbihkYXRhLnRva2VuKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyBnZXQgdXNlciBpbmZvCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2dldEluZm8oc3RhdGUudG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgIHJldHVybiByZWplY3QoJ1ZlcmlmaWNhdGlvbiBmYWlsZWQsIHBsZWFzZSBMb2dpbiBhZ2Fpbi4nKTsKICAgICAgICB9CgogICAgICAgIHZhciBuYW1lID0gZGF0YS5uYW1lLAogICAgICAgICAgICBhdmF0YXIgPSBkYXRhLmF2YXRhcjsKICAgICAgICBjb21taXQoJ1NFVF9OQU1FJywgbmFtZSk7CiAgICAgICAgY29tbWl0KCdTRVRfQVZBVEFSJywgYXZhdGFyKTsKICAgICAgICBjb21taXQoIlNFVF9CVVRUT05TIiwgZGF0YS5idXR0b25zKTsKICAgICAgICBjb21taXQoIlNFVF9NRU5VUyIsIGRhdGEucm91dGVycyk7CiAgICAgICAgcmVzb2x2ZShkYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHVzZXIgbG9nb3V0CiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIC8vbG9nb3V0KHN0YXRlLnRva2VuKS50aGVuKCgpID0+IHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgICAgcmVzZXRSb3V0ZXIoKTsKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICByZXNvbHZlKCk7IC8vIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgLy8gICByZWplY3QoZXJyb3IpCiAgICAgIC8vIH0pCiAgICB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","getDefaultState","token","name","avatar","buttons","menus","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","SET_BUTTONS","SET_MENUS","actions","userInfo","commit","username","password","Promise","resolve","reject","trim","then","response","data","catch","error","routers","resetToken","namespaced"],"sources":["F:/Program_Java/Spring/Spring_Boot/project/源码/源码/前端/exam-vue/src/store/modules/user.js"],"sourcesContent":["import { login, logout, getInfo } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { resetRouter } from '@/router'\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    avatar: '',\n\n    buttons: [], // 新增\n    menus: '' //新增\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n\n  // 新增\n  SET_BUTTONS: (state, buttons) => {\n    state.buttons = buttons\n  },\n  // 新增\n  SET_MENUS: (state, menus) => {\n    state.menus = menus\n  }\n}\n\nconst actions = {\n  // user login\n  login({ commit }, userInfo) {\n    const { username, password } = userInfo\n    return new Promise((resolve, reject) => {\n      login({ username: username.trim(), password: password }).then(response => {\n        const { data } = response\n        commit('SET_TOKEN', data.token)\n        setToken(data.token)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        const { data } = response\n\n        if (!data) {\n          return reject('Verification failed, please Login again.')\n        }\n\n        const { name, avatar } = data\n\n        commit('SET_NAME', name)\n        commit('SET_AVATAR', avatar)\n\n        commit(\"SET_BUTTONS\", data.buttons)\n        commit(\"SET_MENUS\", data.routers)\n        resolve(data)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      //logout(state.token).then(() => {\n        removeToken() // must remove  token  first\n        resetRouter()\n        commit('RESET_STATE')\n        resolve()\n      // }).catch(error => {\n      //   reject(error)\n      // })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      resolve()\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n"],"mappings":"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"}]}