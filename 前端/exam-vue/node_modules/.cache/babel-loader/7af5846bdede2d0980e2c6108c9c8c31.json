{"remainingRequest":"F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\node_modules\\babel-loader\\lib\\index.js!F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\src\\views\\system\\sysDept\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\src\\views\\system\\sysDept\\list.vue","mtime":1695042971148},{"path":"F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\babel.config.js","mtime":1698853375725},{"path":"F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\Program_Java\\Spring\\Spring_Boot\\project\\源码\\源码\\前端\\exam-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIGZyb20gIkY6L1Byb2dyYW1fSmF2YS9TcHJpbmcvU3ByaW5nX0Jvb3QvcHJvamVjdC9cdTZFOTBcdTc4MDEvXHU2RTkwXHU3ODAxL1x1NTI0RFx1N0FFRi9leGFtLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW50ZXJvcFJlcXVpcmVXaWxkY2FyZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGFwaSBmcm9tICdAL2FwaS9zeXN0ZW0vc3lzRGVwdCc7CnZhciBkZWZhdWx0Rm9ybSA9IHsKICBpZDogJycsCiAgcGFyZW50SWQ6ICcnLAogIG5hbWU6ICcnLAogIHRyZWVQYXRoOiAnJywKICBsZWFkZXI6ICcnLAogIHBob25lOiAnJywKICBzb3J0VmFsdWU6IDEsCiAgc3RhdHVzOiAxCn07CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICAvL+WvvOWFpeagkeW9oumAieaLqee7hOS7tgogICAgU2VsZWN0RGVwdFRyZWU6IGZ1bmN0aW9uIFNlbGVjdERlcHRUcmVlKCkgewogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoJ0AvY29tcG9uZW50cy9DdXN0b20vVHJlZVNlbGVjdC9UcmVlU2VsZWN0JykpOwogICAgICB9KTsKICAgIH0KICB9LAogIC8vIOWumuS5ieaVsOaNrgogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzeXNEZXB0TGlzdDogW10sCiAgICAgIGV4cGFuZEtleXM6IFtdLAogICAgICAvLyDpnIDopoHoh6rliqjlsZXlvIDnmoTpobkKICAgICAgZGlhbG9nVGl0bGU6ICcnLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgc3lzRGVwdDogZGVmYXVsdEZvcm0sCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UsCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemDqOmXqOWQjeensCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBkYXRhRGVwdFRyZWU6IFtdIC8v5qCR5b2i6YCJ5oup5pWw5o2uCgogICAgfTsKICB9LAogIC8v5b2T6aG16Z2i5Yqg6L295pe26I635Y+W5pWw5o2uCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgICB0aGlzLmZldGNoUG9wRGVwdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy/osIPnlKhhcGnlsYLojrflj5bmlbDmja7lupPkuK3nmoTmlbDmja4KICAgIGZldGNoRGF0YTogZnVuY3Rpb24gZmV0Y2hEYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coJ+WKoOi9veWIl+ihqCcpOwogICAgICBhcGkuZmluZE5vZGVzKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5zeXNEZXB0TGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5Zue6LCD5L+d5a2Y6YCJ5oup55qE6YOo6ZeoaWQKICAgIHNhdmVEZXB0SWQ6IGZ1bmN0aW9uIHNhdmVEZXB0SWQodHJlZUlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKHRyZWVJZCA9PSB0aGlzLnN5c0RlcHQuaWQpIHsKICAgICAgICB0aGlzLiRhbGVydCgn5LiK57qn6YOo6Zeo5LiN6IO95ZKM5b2T5YmN6YOo6Zeo55u45ZCMJywgJ+aPkOekuicsIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiBjYWxsYmFjayhhY3Rpb24pIHsKICAgICAgICAgICAgX3RoaXMyLnN5c0RlcHQucGFyZW50SWQgPSAnJzsKICAgICAgICAgICAgX3RoaXMyLnN5c0RlcHQucGFyZW50TmFtZSA9ICcnOwogICAgICAgICAgICBhcGkuZ2V0QnlJZChfdGhpczIuc3lzRGVwdC5pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBfdGhpczIuc3lzRGVwdCA9IHJlc3BvbnNlLmRhdGE7IC8vdGhpcy5zeXNEZXB0LnBhcmVudE5hbWUgPSByb3cubmFtZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnN5c0RlcHQucGFyZW50SWQgPSB0cmVlSWQ7CiAgICAgICAgdGhpcy5zeXNEZXB0LnBhcmVudE5hbWUgPSB0cmVlTmFtZTsKICAgICAgfQogICAgfSwKICAgIGZldGNoUG9wRGVwdDogZnVuY3Rpb24gZmV0Y2hQb3BEZXB0KCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIC8v5Yqg6L295by55Ye66YCJ5oup6YOo6Zeo5pWw5o2uCiAgICAgIGFwaS5maW5kU2VsZWN0Tm9kZXMoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5kYXRhRGVwdFRyZWUgPSByZXNwb25zZS5kYXRhOwogICAgICAgIGNvbnNvbGUubG9nKCdsb2FkRGVwdERhdGEnKTsKICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShfdGhpczMuZGF0YURlcHRUcmVlKSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5qC55o2uaWTliKDpmaTmlbDmja4KICAgIHJlbW92ZURhdGFCeUlkOiBmdW5jdGlvbiByZW1vdmVEYXRhQnlJZChpZCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIC8vIGRlYnVnZ2VyCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeiusOW9lSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBwcm9taXNlCiAgICAgICAgLy8g54K55Ye756Gu5a6a77yM6L+c56iL6LCD55SoYWpheAogICAgICAgIHJldHVybiBhcGkucmVtb3ZlQnlJZChpZCk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM0LmZldGNoRGF0YSgpOwoKICAgICAgICBfdGhpczQuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0LiRtZXNzYWdlLmluZm8oJ+WPlua2iOWIoOmZpCcpOwogICAgICB9KTsKICAgIH0sCiAgICAvL+W8ueWHuua3u+WKoOaIluabtOaWsOeahOihqOWNlQogICAgYWRkOiBmdW5jdGlvbiBhZGQocm93KSB7CiAgICAgIGRlYnVnZ2VyOwogICAgICB0aGlzLnR5cGVEaXNhYmxlZCA9IGZhbHNlOwogICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gJ+a3u+WKoOS4i+e6p+mDqOmXqCc7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuc3lzRGVwdCA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRGb3JtKTsKICAgICAgdGhpcy5zeXNEZXB0LmlkID0gJyc7CgogICAgICBpZiAocm93KSB7CiAgICAgICAgdGhpcy5zeXNEZXB0LnBhcmVudElkID0gcm93LmlkOwogICAgICAgIHRoaXMuc3lzRGVwdC5wYXJlbnROYW1lID0gcm93Lm5hbWU7IC8vdGhpcy5zeXNEZXB0LmNvbXBvbmVudCA9ICdQYXJlbnRWaWV3JwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAn5re75Yqg6aG257qn6YOo6ZeoJzsKICAgICAgICB0aGlzLnN5c0RlcHQucGFyZW50SWQgPSAnMCc7CiAgICAgIH0KICAgIH0sCiAgICAvL+e8lui+kQogICAgZWRpdDogZnVuY3Rpb24gZWRpdChyb3cpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBkZWJ1Z2dlcjsKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICfkv67mlLnpg6jpl6gnOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOyAvL3RoaXMuc3lzRGVwdCA9IE9iamVjdC5hc3NpZ24oe30sIHJvdykKCiAgICAgIGFwaS5nZXRCeUlkKHJvdy5pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczUuc3lzRGVwdCA9IHJlc3BvbnNlLmRhdGE7IC8vdGhpcy5zeXNEZXB0LnBhcmVudE5hbWUgPSByb3cubmFtZQogICAgICB9KTsKICAgIH0sCiAgICAvL+a3u+WKoOaIluabtOaWsAogICAgc2F2ZU9yVXBkYXRlOiBmdW5jdGlvbiBzYXZlT3JVcGRhdGUoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmcy5kYXRhRm9ybS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIF90aGlzNi5zYXZlQnRuRGlzYWJsZWQgPSB0cnVlOyAvLyDpmLLmraLooajljZXph43lpI3mj5DkuqQKCiAgICAgICAgICBpZiAoIV90aGlzNi5zeXNEZXB0LmlkKSB7CiAgICAgICAgICAgIF90aGlzNi5zYXZlKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczYudXBkYXRlKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+a3u+WKoAogICAgc2F2ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICBhcGkuc2F2ZSh0aGlzLnN5c0RlcHQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXM3LiRtZXNzYWdlLnN1Y2Nlc3MocmVzcG9uc2UubWVzc2FnZSB8fCAn5pON5L2c5oiQ5YqfJyk7CgogICAgICAgIF90aGlzNy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CgogICAgICAgIF90aGlzNy5mZXRjaERhdGEoX3RoaXM3LnBhZ2UpOwogICAgICB9KTsKICAgIH0sCiAgICAvL+abtOaWsAogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgYXBpLnVwZGF0ZUJ5SWQodGhpcy5zeXNEZXB0KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzOC4kbWVzc2FnZS5zdWNjZXNzKHJlc3BvbnNlLm1lc3NhZ2UgfHwgJ+aTjeS9nOaIkOWKnycpOwoKICAgICAgICBfdGhpczguZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICBfdGhpczguZmV0Y2hEYXRhKCk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AAEA;EACAA,MADA;EAEAC,YAFA;EAGAC,QAHA;EAIAC,YAJA;EAKAC,UALA;EAMAC,SANA;EAOAC,YAPA;EAQAC;AARA;AAUA;EACAC;IACA;IACAC;MAAA;QAAA;MAAA;IAAA;EAFA,CADA;EAKA;EACAC,IANA,kBAMA;IACA;MACAC,eADA;MAEAC,cAFA;MAEA;MACAC,eAHA;MAIAC,oBAJA;MAKAC,oBALA;MAMAC,sBANA;MAOAC;QACAf;UAAAgB;UAAAC;UAAAC;QAAA;MADA,CAPA;MAUAC,gBAVA,CAUA;;IAVA;EAYA,CAnBA;EAqBA;EACAC,OAtBA,qBAsBA;IACA;IACA;EACA,CAzBA;EA2BAC;IACA;IACAC,SAFA,uBAEA;MAAA;;MACAC;MACAC;QACA;MACA,CAFA;IAGA,CAPA;IASA;IACAC,UAVA,sBAUAC,MAVA,EAUA;MAAA;;MACA;QACA;UACAC,uBADA;UAEAC;YACA;YACA;YACAJ;cACA,+BADA,CAEA;YACA,CAHA;UAIA;QATA;MAWA,CAZA,MAYA;QACA;QACA;MACA;IAEA,CA5BA;IA8BAK,YA9BA,0BA8BA;MAAA;;MACA;MACAL;QACA;QACAD;QACAA;MACA,CAJA;IAMA,CAtCA;IAwCA;IACAO,cAzCA,0BAyCAhC,EAzCA,EAyCA;MAAA;;MACA;MACA;QACA6B,uBADA;QAEAI,sBAFA;QAGAC;MAHA,GAIAC,IAJA,CAIA;QAAA;QACA;QACA;MACA,CAPA,EAOAA,IAPA,CAOA;QACA;;QACA;UACAD,eADA;UAEAf;QAFA;MAIA,CAbA,EAaAiB,KAbA,CAaA;QACA;MACA,CAfA;IAgBA,CA3DA;IA6DA;IACAC,GA9DA,eA8DAC,GA9DA,EA8DA;MACA;MACA;MACA;MACA;MAEA;MACA;;MACA;QACA;QACA,mCAFA,CAGA;MACA,CAJA,MAIA;QACA;QACA;MACA;IACA,CA9EA;IAgFA;IACAC,IAjFA,gBAiFAD,GAjFA,EAiFA;MAAA;;MACA;MACA;MACA,0BAHA,CAIA;;MACAZ;QACA,+BADA,CAEA;MACA,CAHA;IAKA,CA3FA;IA6FA;IACAc,YA9FA,0BA8FA;MAAA;;MACA;QACA;UACA,8BADA,CACA;;UACA;YACA;UACA,CAFA,MAEA;YACA;UACA;QACA;MACA,CATA;IAUA,CAzGA;IA2GA;IACAC,IA5GA,kBA4GA;MAAA;;MACAf;QACA;;QACA;;QACA;MACA,CAJA;IAKA,CAlHA;IAoHA;IACAgB,MArHA,oBAqHA;MAAA;;MACAhB;QACA;;QACA;;QACA;MACA,CAJA;IAKA;EA3HA;AA3BA","names":["id","parentId","name","treePath","leader","phone","sortValue","status","components","SelectDeptTree","data","sysDeptList","expandKeys","dialogTitle","dialogVisible","sysDept","saveBtnDisabled","rules","required","message","trigger","dataDeptTree","created","methods","fetchData","console","api","saveDeptId","treeId","confirmButtonText","callback","fetchPopDept","removeDataById","cancelButtonText","type","then","catch","add","row","edit","saveOrUpdate","save","update"],"sourceRoot":"src/views/system/sysDept","sources":["list.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <!-- 工具条 -->\n    <div class=\"tools-div\">\n      <el-button type=\"success\" icon=\"el-icon-plus\" :disabled=\"$hasBP('bnt.sysDept.add')  === false\" size=\"mini\" @click=\"add()\">添 加</el-button>\n    </div>\n    <el-table\n      :data=\"sysDeptList\"\n      style=\"width: 100%;margin-bottom: 20px;margin-top: 10px;\"\n      row-key=\"id\"\n      border\n      :default-expand-all=\"false\"\n      :tree-props=\"{children: 'children'}\">\n\n      <el-table-column prop=\"name\" label=\"部门名称\"/>\n      <el-table-column prop=\"leader\" label=\"负责人\"/>\n      <el-table-column prop=\"phone\" label=\"联系电话\"/>\n      <el-table-column prop=\"sortValue\" label=\"排序\"/>\n      <el-table-column label=\"状态\" width=\"80\">\n        <template slot-scope=\"scope\">\n          <el-switch\n            v-model=\"scope.row.status === 1\" :disabled=\"true\">\n          </el-switch>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"createTime\" label=\"创建时间\"/>\n      <el-table-column label=\"操作\" width=\"180\" align=\"center\" fixed=\"right\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"success\" v-if=\"scope.row.type !== 2\" icon=\"el-icon-plus\" size=\"mini\" @click=\"add(scope.row)\"\n                     title=\"添加下级部门\"/>\n          <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" :disabled=\"$hasBP('bnt.sysDept.update')  === false\" @click=\"edit(scope.row)\" title=\"修改\"/>\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" :disabled=\"$hasBP('bnt.sysDept.remove')  === false || scope.row.children.length > 0 \" @click=\"removeDataById(scope.row.id)\" title=\"删除\"\n                     />\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" width=\"40%\">\n      <el-form ref=\"dataForm\" :model=\"sysDept\" :rules=\"rules\" label-width=\"150px\" size=\"small\"\n               style=\"padding-right: 40px;\">\n        <el-form-item label=\"上级部门\">\n          <select-dept-tree @saveTreeId=\"saveDeptId\" treeTitle=\"选择部门\" :dataTree=\"dataDeptTree\"\n                            :treeVal=\"sysDept.parentName\" :treeId=\"sysDept.parentId\"></select-dept-tree>\n        </el-form-item>\n\n        <el-form-item label=\"部门名称\" prop=\"name\">\n          <el-input v-model=\"sysDept.name\"/>\n        </el-form-item>\n\n        <el-form-item label=\"负责人\" prop=\"leader\">\n          <el-input v-model=\"sysDept.leader\"/>\n        </el-form-item>\n\n        <el-form-item label=\"电话\" prop=\"phone\">\n          <el-input v-model=\"sysDept.phone\"/>\n        </el-form-item>\n\n        <el-form-item label=\"排序\">\n          <el-input-number v-model=\"sysDept.sortValue\" controls-position=\"right\" :min=\"0\"/>\n        </el-form-item>\n\n        <el-form-item label=\"状态\" prop=\"type\">\n          <el-radio-group v-model=\"sysDept.status\">\n            <el-radio :label=\"1\">正常</el-radio>\n            <el-radio :label=\"0\">停用</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\" size=\"small\" icon=\"el-icon-refresh-right\">取 消</el-button>\n        <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"saveOrUpdate()\" size=\"small\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n\n<script>\n    import api from '@/api/system/sysDept'\n\n    const defaultForm = {\n        id: '',\n        parentId: '',\n        name: '',\n        treePath: '',\n        leader: '',\n        phone: '',\n        sortValue: 1,\n        status: 1\n    }\n    export default {\n        components: {\n            //导入树形选择组件\n            SelectDeptTree: () => import('@/components/Custom/TreeSelect/TreeSelect')\n        },\n        // 定义数据\n        data() {\n            return {\n                sysDeptList: [],\n                expandKeys: [], // 需要自动展开的项\n                dialogTitle: '',\n                dialogVisible: false,\n                sysDept: defaultForm,\n                saveBtnDisabled: false,\n                rules: {\n                    name: [{required: true, message: '请输入部门名称', trigger: 'blur'}],\n                },\n                dataDeptTree: [] //树形选择数据\n            }\n        },\n\n        //当页面加载时获取数据\n        created() {\n            this.fetchData()\n            this.fetchPopDept()\n        },\n\n        methods: {\n            //调用api层获取数据库中的数据\n            fetchData() {\n                console.log('加载列表')\n                api.findNodes().then(response => {\n                    this.sysDeptList = response.data\n                })\n            },\n\n            //回调保存选择的部门id\n            saveDeptId(treeId) {\n                if (treeId == this.sysDept.id) {\n                    this.$alert('上级部门不能和当前部门相同', '提示', {\n                        confirmButtonText: '确定',\n                        callback: action => {\n                            this.sysDept.parentId = '';\n                            this.sysDept.parentName = '';\n                            api.getById(this.sysDept.id).then(response => {\n                                this.sysDept = response.data\n                                //this.sysDept.parentName = row.name\n                            })\n                        }\n                    });\n                } else {\n                    this.sysDept.parentId = treeId\n                    this.sysDept.parentName= treeName\n                }\n\n            },\n\n            fetchPopDept() {\n                //加载弹出选择部门数据\n                api.findSelectNodes().then(response => {\n                    this.dataDeptTree = response.data\n                    console.log('loadDeptData')\n                    console.log(JSON.stringify(this.dataDeptTree))\n                })\n\n            },\n\n            //根据id删除数据\n            removeDataById(id) {\n                // debugger\n                this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    type: 'warning'\n                }).then(() => { // promise\n                    // 点击确定，远程调用ajax\n                    return api.removeById(id)\n                }).then((response) => {\n                    this.fetchData()\n                    this.$message({\n                        type: 'success',\n                        message: response.message\n                    })\n                }).catch(() => {\n                    this.$message.info('取消删除')\n                })\n            },\n\n            //弹出添加或更新的表单\n            add(row) {\n                debugger\n                this.typeDisabled = false\n                this.dialogTitle = '添加下级部门'\n                this.dialogVisible = true\n\n                this.sysDept = Object.assign({}, defaultForm)\n                this.sysDept.id = ''\n                if (row) {\n                    this.sysDept.parentId = row.id\n                    this.sysDept.parentName = row.name\n                    //this.sysDept.component = 'ParentView'\n                } else {\n                    this.dialogTitle = '添加顶级部门'\n                    this.sysDept.parentId = '0'\n                }\n            },\n\n            //编辑\n            edit(row) {\n                debugger\n                this.dialogTitle = '修改部门'\n                this.dialogVisible = true\n                //this.sysDept = Object.assign({}, row)\n                api.getById(row.id).then(response => {\n                    this.sysDept = response.data\n                    //this.sysDept.parentName = row.name\n                })\n\n            },\n\n            //添加或更新\n            saveOrUpdate() {\n                this.$refs.dataForm.validate(valid => {\n                    if (valid) {\n                        this.saveBtnDisabled = true // 防止表单重复提交\n                        if (!this.sysDept.id) {\n                            this.save()\n                        } else {\n                            this.update()\n                        }\n                    }\n                })\n            },\n\n            //添加\n            save() {\n                api.save(this.sysDept).then(response => {\n                    this.$message.success(response.message || '操作成功')\n                    this.dialogVisible = false\n                    this.fetchData(this.page)\n                })\n            },\n\n            //更新\n            update() {\n                api.updateById(this.sysDept).then(response => {\n                    this.$message.success(response.message || '操作成功')\n                    this.dialogVisible = false\n                    this.fetchData()\n                })\n            }\n        }\n    }\n</script>\n"]}]}